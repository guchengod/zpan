import{N as e,b as t,d as o,a as n,aa as s,t as a,ak as u,Z as l,ap as d,W as c,ar as r}from"./base-BBwbuMrY.js";import{d as i,i as m,h as E,a3 as v,o as f,a2 as p,C as T,O as y,c as S,m as M,aj as L}from"./index-B6LbRxzB.js";import{a as A}from"./scroll-Ck97Tz0c.js";var Y=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Y||{});const h=t=>{if(!t)return{onClick:e,onMousedown:e,onMouseup:e};let o=!1,n=!1;return{onClick:e=>{o&&n&&t(e),o=n=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{n=e.target===e.currentTarget}}},b=t({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:o([String,Array,Object])},zIndex:{type:o([String,Number])}});const C=i({name:"ElOverlay",props:b,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const s=n("overlay"),{onClick:a,onMousedown:u,onMouseup:l}=h(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?m("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:u,onMouseup:l},[E(t,"default")],Y.STYLE|Y.CLASS|Y.PROPS,["onClick","onMouseup","onMousedown"]):v("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[E(t,"default")])}}),N=(e,t,o,n)=>{let a={offsetX:0,offsetY:0};const u=t=>{const o=t.clientX,u=t.clientY,{offsetX:l,offsetY:d}=a,c=e.value.getBoundingClientRect(),r=c.left,i=c.top,m=c.width,E=c.height,v=document.documentElement.clientWidth,f=document.documentElement.clientHeight,p=-r+l,T=-i+d,y=v-r-m+l,S=f-i-E+d,M=t=>{let c=l+t.clientX-o,r=d+t.clientY-u;(null==n?void 0:n.value)||(c=Math.min(Math.max(c,p),y),r=Math.min(Math.max(r,T),S)),a={offsetX:c,offsetY:r},e.value&&(e.value.style.transform=`translate(${s(c)}, ${s(r)})`)},L=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",L)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",L)},l=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",u)};return f((()=>{p((()=>{o.value?t.value&&e.value&&t.value.addEventListener("mousedown",u):l()}))})),T((()=>{l()})),{resetPosition:()=>{a={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")}}},x=(e,t={})=>{y(e)||a("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||n("popup"),s=S((()=>o.bm("parent","hidden")));if(!u||l(document.body,s.value))return;let i=0,m=!1,E="0";const v=()=>{setTimeout((()=>{"undefined"!=typeof document&&m&&document&&(document.body.style.width=E,r(document.body,s.value))}),200)};M(e,(e=>{if(!e)return void v();m=!l(document.body,s.value),m&&(E=document.body.style.width,d(document.body,s.value)),i=A(o.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,n=c(document.body,"overflowY");i>0&&(t||"scroll"===n)&&m&&(document.body.style.width=`calc(100% - ${i}px)`)})),L((()=>v()))};export{C as E,h as a,x as b,N as u};
