System.register(["./base-legacy.C4HCoRVd.js","./loading-legacy.BfOje5Sp.js","./ZFormItem-legacy.BCuPcTQ5.js","./button-legacy.DICWts_D.js","./input-legacy.QHqwdb9y.js","./input-number-legacy.UJWZdvLd.js","./radio-legacy.B9rFPEIL.js","./tag-legacy.BUaIpLO9.js","./select-legacy.Cvd99nu-.js","./scrollbar-legacy.5w33Y1a7.js","./popper-legacy.A4J8PAUb.js","./index-legacy.DUvvBSvn.js","./unit-legacy.Ck5OWA1B.js","./switch-legacy.CjRXBuq6.js","./useLinkSetting-legacy._dHb0dfS.js","./admin-setting-legacy.DyAKlYCg.js","./index-legacy.DSn-UQMq.js","./XCircleIcon-legacy.BGkuiBqN.js","./index-legacy.DdGmP4UA.js","./directive-legacy.BxLSi8TL.js","./plugin-vue_export-helper-legacy.ul8DAaRV.js","./request-legacy.-200HP3-.js","./event-legacy.CFsZpNd4.js","./index-legacy.BI_Z7oJg.js","./castArray-legacy.BWmXikMi.js","./scroll-legacy.DnkC-nvr.js","./index-legacy.kQS7dIBi.js","./_Uint8Array-legacy.CXcrhg08.js","./debounce-legacy.D6b8stkf.js","./index-legacy.BcMCRM2R.js","./validator-legacy.DjRp0Ah9.js"],(function(e,l){"use strict";var n,t,u,a,o,r,i,d,c,s,f,p,m,v,g,b,y,h,V,x,w,k,j,_,P,C,U,T,L,I,z,E,F,R,A;return{setters:[function(e){n=e.H},null,function(e){t=e.Z,u=e.a},null,null,function(e){a=e.E},function(e){o=e.E},null,function(e){r=e.E,i=e.a},null,null,function(e){d=e.a,c=e.e,s=e.k,f=e.r,p=e.m,m=e.F,v=e.v,g=e.i,b=e.u,y=e.w,h=e.b,V=e.J,x=e.K,w=e.t,k=e.N,j=e.j,_=e.O},function(e){P=e.g,C=e.a},function(e){U=e.E},function(e){T=e.u},function(e){L=e.a,I=e.t},function(e){z=e.u},function(e){E=e.r,F=e.a},function(e){R=e.E},function(e){A=e.v},null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");function D(e,l){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 01.75.75v16.19l6.22-6.22a.75.75 0 111.06 1.06l-7.5 7.5a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 111.06-1.06l6.22 6.22V3a.75.75 0 01.75-.75z","clip-rule":"evenodd"})])}function S(e,l){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M11.47 2.47a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06l-6.22-6.22V21a.75.75 0 01-1.5 0V4.81l-6.22 6.22a.75.75 0 11-1.06-1.06l7.5-7.5z","clip-rule":"evenodd"})])}function Z(e,l){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M3.75 12a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75z","clip-rule":"evenodd"})])}function H(e,l){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z","clip-rule":"evenodd"})])}l.textContent="\n/*$vite$:1*/",document.head.appendChild(l);var M={class:"flex flex-wrap"},B={class:"flex items-center"},O=["onClick"],X=["onClick"],N=["onClick"],$=["onClick"],q={class:"ml-3 text-gray-500"},J={__name:"TimePicker",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup:function(e,l){var n=l.emit,t=e,u=f(t.modelValue?t.modelValue:[{value:"1",unit:"d",second:86400}]);return p(u,(function(e){n("update:modelValue",e)})),function(e,l){var n=a,t=r,o=i;return d(),c("div",M,[(d(!0),c(m,null,v(u.value,(function(e,l){return d(),c("div",{key:l,class:"mb-4 w-full"},[s("div",B,[g(n,{modelValue:e.value,"onUpdate:modelValue":function(l){return e.value=l},min:1,max:b(P)(e.unit),disabled:"forever"===e.unit},null,8,["modelValue","onUpdate:modelValue","max","disabled"]),g(o,{modelValue:e.unit,"onUpdate:modelValue":function(l){return e.unit=l},"fit-input-width":"",class:"ml-3 w-20"},{default:y((function(){return[(d(!0),c(m,null,v(b(C),(function(e){return d(),h(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"]),V(s("button",{type:"button",onClick:function(e){return function(e){if(0!==e){var l=u.value[e];u.value.splice(e,1),u.value.splice(e-1,0,l)}}(l)},class:"ml-2 py-2 px-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:bg-blue-700 focus:outline-none font-bold"},[g(b(S),{class:"h-4"})],8,O),[[x,0!==l]]),V(s("button",{type:"button",onClick:function(e){return function(e){if(e!==u.value.length-1){var l=u.value[e];u.value.splice(e,1),u.value.splice(e+1,0,l)}}(l)},class:"ml-2 py-2 px-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:bg-blue-700 focus:outline-none font-bold"},[g(b(D),{class:"h-4"})],8,X),[[x,l!==u.value.length-1]]),V(s("button",{type:"button",onClick:function(e){return function(e){u.value.splice(e,0,{value:"",unit:"s"})}(l+1)},class:"ml-2 py-2 px-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:bg-blue-700 focus:outline-none font-bold"},[g(b(H),{class:"h-4"})],8,N),[[x,l===u.value.length-1]]),V(s("button",{type:"button",onClick:function(e){return function(e){u.value.splice(e,1)}(l)},class:"ml-2 py-2 px-2 rounded-md bg-red-500 text-white hover:bg-red-600 focus:bg-red-700 focus:outline-none font-bold"},[g(b(Z),{class:"h-4"})],8,$),[[x,u.value.length>1]])]),s("small",q,w(e.formatted),1)])})),128))])}}},W={class:"zfile-admin-down-link-body"},G={class:"text-red-400 font-bold"},K=s("ul",null,[s("li",null,[k(" 限制泛域名 "),s("span",{class:"text-red-400"},"http 协议"),k(" 全部子目录可访问： "),s("div",{class:"inline select-all font-bold"},[s("span",{class:"text-red-400"},"http://"),k("*example.com/** ")])]),s("li",null,[k(" 限制泛域名 "),s("span",{class:"text-red-400"},"https 协议"),k(" 全部子目录可访问： "),s("div",{class:"inline select-all font-bold"},[s("span",{class:"text-red-400"},"https://"),k("*example.com/** ")])]),s("li",null,[k(" 限制泛域名 "),s("span",{class:"text-red-400"},"全部协议"),k(" 全部子目录可访问： "),s("div",{class:"inline select-all font-bold"},[s("span",{class:"text-red-400"},"*://"),k("*example.com/** ")])])],-1),Q={key:0},Y={key:1},ee={class:"mt-4"},le=s("div",null," 可在下方输入你要测试的地址（应包含协议，路径，从浏览器地址栏复制就是了） ",-1),ne=s("span",null,"单 IP",-1),te=s("span",null,"秒内允许下载",-1),ue=s("span",null,"次",-1),ae=s("span",null,"设置直链防止恶意下载，单 IP N 秒内只允许访问 M 次直链，如其中一个为 0 则不做任何限制.",-1),oe=s("br",null,null,-1),re=s("br",null,null,-1),ie=s("span",null,"注意：此功能对直链、短链都有效，且共享限制次数。但直链/短链跳转后的实际下载链接无法限制，因为那些链接不经过 ZFile.",-1),de=s("br",null,null,-1),ce=s("br",null,null,-1),se={class:"text-blue-400"},fe={class:"dialog-footer"};e("default",{__name:"basic-setting",setup:function(e){var l=T(),r=l.data,i=l.saveData,p=l.saveLoading,m=f("");L().then((function(e){m.value=e.data.data}));var v=f(""),P=f(null),C=z((function(){var e,l={antPath:null==r||null===(e=r.value)||void 0===e?void 0:e.refererValue,testPath:v.value};I(l).then((function(e){P.value=e.data.data}))}),250);return function(e,l){var f=U,T=t,L=R,I=J,z=o,D=a,S=n,Z=u,H=A;return d(),c("div",W,[b(r)?V((d(),h(Z,{key:0,model:b(r),"element-loading-text":"保存中..."},{"form-title":y((function(){return[k(" 直/短链设置 ")]})),"form-sub-title":y((function(){return[k(" 这里可以配置直/短链相关设置 ")]})),footer:y((function(){return[s("span",fe,[g(S,{type:"primary",onClick:b(i)},{default:y((function(){return[k("保存")]})),_:1},8,["onClick"])])]})),default:y((function(){return[g(T,{label:"记录下载日志"},{tips:y((function(){return[k(" 是否记录直/短链下载日志 ")]})),default:y((function(){return[g(f,{modelValue:b(r).recordDownloadLog,"onUpdate:modelValue":l[0]||(l[0]=function(e){return b(r).recordDownloadLog=e})},null,8,["modelValue"])]})),_:1}),g(T,{label:"是否允许生成/使用直链（路径）"},{tips:y((function(){return[k(" 控制是否生成直链时显示直链路径及是否允许使用直链进行下载. ")]})),default:y((function(){return[g(f,{modelValue:b(r).showPathLink,"onUpdate:modelValue":l[1]||(l[1]=function(e){return b(r).showPathLink=e})},null,8,["modelValue"])]})),_:1}),g(T,{label:"直链地址前缀"},{tips:y((function(){return[k(" 直链地址前缀, 如 http(s)://ip:port/"),s("span",G,w(b(r).directLinkPrefix),1),k("/path/filename ")]})),default:y((function(){return[g(L,{modelValue:b(r).directLinkPrefix,"onUpdate:modelValue":l[2]||(l[2]=function(e){return b(r).directLinkPrefix=e})},null,8,["modelValue"])]})),_:1}),g(T,{label:"是否允许使用短链"},{tips:y((function(){return[k(" 控制是否生成直链时显示短链路径及是否允许使用短链进行下载 ")]})),default:y((function(){return[g(f,{modelValue:b(r).showShortLink,"onUpdate:modelValue":l[3]||(l[3]=function(e){return b(r).showShortLink=e})},null,8,["modelValue"])]})),_:1}),g(T,{label:"短链有效期"},{tips:y((function(){return[k(" 控制生成短链的有效期 ")]})),default:y((function(){return[g(I,{modelValue:b(r).linkExpireTimes,"onUpdate:modelValue":l[4]||(l[4]=function(e){return b(r).linkExpireTimes=e})},null,8,["modelValue"])]})),_:1}),g(T,{label:"Referer 防盗链"},{tips:y((function(){return[k(" 防盗链支持访问文件直链或短链时校验，如用户直接访问直链跳转后的存储源原始链接，无法进行校验和拦截。 ")]})),default:y((function(){return[g(z,{modelValue:b(r).refererType,"onUpdate:modelValue":l[5]||(l[5]=function(e){return b(r).refererType=e}),label:"off"},{default:y((function(){return[k("不启用 Referer 防盗链")]})),_:1},8,["modelValue"]),g(z,{modelValue:b(r).refererType,"onUpdate:modelValue":l[6]||(l[6]=function(e){return b(r).refererType=e}),label:"white_list"},{default:y((function(){return[k("启用白名单")]})),_:1},8,["modelValue"]),g(z,{modelValue:b(r).refererType,"onUpdate:modelValue":l[7]||(l[7]=function(e){return b(r).refererType=e}),label:"black_list"},{default:y((function(){return[k("启用黑名单")]})),_:1},8,["modelValue"])]})),_:1}),V(g(T,{label:"Referer 配置"},{default:y((function(){return[g(z,{modelValue:b(r).refererAllowEmpty,"onUpdate:modelValue":l[8]||(l[8]=function(e){return b(r).refererAllowEmpty=e}),label:!0},{default:y((function(){return[k("允许 Referer 为空")]})),_:1},8,["modelValue"]),g(z,{modelValue:b(r).refererAllowEmpty,"onUpdate:modelValue":l[9]||(l[9]=function(e){return b(r).refererAllowEmpty=e}),label:!1},{default:y((function(){return[k("禁止 Referer 为空")]})),_:1},8,["modelValue"])]})),_:1},512),[[x,"no"!==b(r).refererType]]),V(g(T,{label:"白名单"},{tips:y((function(){return[k(" 每行输入一个域名，如： "),K,"white_list"===b(r).refererType?(d(),c("div",Q," 每行输入一个域名，需要写协议头支持 * 通配符，如白名单 http://*zfile.vip 将只允许 http://zfile.vip、http://www.zfile.vip、http://demo.zfile.vip 等网站访问。 ")):j("",!0),"black_list"===b(r).refererType?(d(),c("div",Y," 每行输入一个域名，需要写协议头，支持 * 通配符，如黑名单 http://*zfile.vip 将禁止所有如 http://zfile.vip、http://www.zfile.vip、http://demo.zfile.vip 等网站访问。 ")):j("",!0),s("div",ee,[le,g(L,{onInput:b(C),modelValue:b(v),"onUpdate:modelValue":l[11]||(l[11]=function(e){return _(v)?v.value=e:null})},{suffix:y((function(){return[b(v)&&!0===b(P)?(d(),h(b(E),{key:0,class:"w-4 text-green-500"})):b(v)&&!1===b(P)?(d(),h(b(F),{key:1,class:"w-4 text-red-500"})):j("",!0)]})),_:1},8,["onInput","modelValue"])])]})),default:y((function(){return[g(L,{type:"textarea",onInput:b(C),rows:6,modelValue:b(r).refererValue,"onUpdate:modelValue":l[10]||(l[10]=function(e){return b(r).refererValue=e})},null,8,["onInput","modelValue"])]})),_:1},512),[[x,"no"!==b(r).refererType]]),g(T,{label:"直链下载限制"},{tips:y((function(){return[ae,oe,re,ie,de,ce,s("span",null,[k('注意：如果你使用了反向代理，而不是直接访问的 ZFile 端口, 那你需要在反向代理处设置以下请求头为用户真实 IP："X-Forwarded-For", "X-Real-IP", "Proxy-Client-IP", "WL-Proxy-Client-IP", "HTTP_CLIENT_IP", "HTTP_X_FORWARDED_FOR"，不然不论谁访问 ZFile 都只能获取到反代服务器的 IP，同服务器一般是获取到 127.0.0.1 或 localhost, 这样此功能就无法正常使用!!! (辅助信息: 系统获取到您当前 IP 为 '),s("span",se,w(b(m)),1),k(")")])]})),default:y((function(){return[ne,g(D,{modelValue:b(r).linkLimitSecond,"onUpdate:modelValue":l[12]||(l[12]=function(e){return b(r).linkLimitSecond=e}),min:0,max:86400,step:1,size:"small",class:"mx-2"},null,8,["modelValue"]),te,g(D,{modelValue:b(r).linkDownloadLimit,"onUpdate:modelValue":l[13]||(l[13]=function(e){return b(r).linkDownloadLimit=e}),min:0,max:9999999,step:1,size:"small",class:"mx-2"},null,8,["modelValue"]),ue]})),_:1})]})),_:1},8,["model"])),[[H,b(p)]]):j("",!0)])}}})}}}));
