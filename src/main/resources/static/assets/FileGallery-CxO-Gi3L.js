import{a as e,aD as t,_ as l,b as a,s as i,aa as s,w as o,H as r}from"./base-BBwbuMrY.js";/* empty css               */import{d as n,a as c,e as d,k as f,u,c as m,h as p,i as g,f as y,n as v,t as h,j as z,aB as C,H as k,r as b,E as x,F as w,v as _,w as $,N as E,J as N,K as A}from"./index-B6LbRxzB.js";import{c as B}from"./common-B1W1rpUW.js";import{a as j,i as M}from"./useFileUpload-DuqU_uzX.js";import{_ as S}from"./plugin-vue_export-helper-BCo6x5W8.js";import"./request-B2kMKzxx.js";import"./useCommon-CGwVn2w-.js";import"./index-X5TNrnOa.js";import"./checkbox-C28m1aVK.js";import"./event-BwRzfsZt.js";import"./index-CfE48oVh.js";import"./_Uint8Array-FYYXr4ha.js";/* empty css              */import"./index-KUFYR68Z.js";import"./use-outside-click-ez4SFYwU.js";import"./directive-c3Zp8yaa.js";import"./XCircleIcon-C5fQ6vrv.js";import"./index-XSoVjJxG.js";import"./index-58WTuj8x.js";import"./scroll-Ck97Tz0c.js";import"./index-Cd2l2kYr.js";import"./validator-EOLRKd5b.js";const R=n({name:"ImgEmpty"});var L=l(n({...R,setup(l){const a=e("empty"),i=t();return(e,t)=>(c(),d("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[f("defs",null,[f("linearGradient",{id:`linearGradient-1-${u(i)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[f("stop",{"stop-color":`var(${u(a).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),f("stop",{"stop-color":`var(${u(a).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),f("linearGradient",{id:`linearGradient-2-${u(i)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[f("stop",{"stop-color":`var(${u(a).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),f("stop",{"stop-color":`var(${u(a).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),f("rect",{id:`path-3-${u(i)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),f("g",{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[f("g",{id:"B-type",transform:"translate(-1268.000000, -535.000000)"},[f("g",{id:"Group-2",transform:"translate(1268.000000, 535.000000)"},[f("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${u(a).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),f("polygon",{id:"Rectangle-Copy-14",fill:`var(${u(a).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),f("g",{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[f("polygon",{id:"Rectangle-Copy-10",fill:`var(${u(a).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),f("polygon",{id:"Rectangle-Copy-11",fill:`var(${u(a).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),f("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${u(i)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),f("polygon",{id:"Rectangle-Copy-13",fill:`var(${u(a).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),f("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${u(i)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),f("g",{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},[f("use",{id:"Mask",fill:`var(${u(a).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${u(i)}`},null,8,["fill","xlink:href"]),f("polygon",{id:"Rectangle-Copy",fill:`var(${u(a).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${u(i)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),f("polygon",{id:"Rectangle-Copy-18",fill:`var(${u(a).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}}),[["__file","img-empty.vue"]]);const F=a({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),I=n({name:"ElEmpty"});const T=o(l(n({...I,props:F,setup(t){const l=t,{t:a}=i(),o=e("empty"),r=m((()=>l.description||a("el.table.emptyText"))),n=m((()=>({width:s(l.imageSize)})));return(e,t)=>(c(),d("div",{class:y(u(o).b())},[f("div",{class:y(u(o).e("image")),style:v(u(n))},[e.image?(c(),d("img",{key:0,src:e.image,ondragstart:"return false"},null,8,["src"])):p(e.$slots,"image",{key:1},(()=>[g(L)]))],6),f("div",{class:y(u(o).e("description"))},[e.$slots.description?p(e.$slots,"description",{key:0}):(c(),d("p",{key:1},h(u(r)),1))],2),e.$slots.default?(c(),d("div",{key:0,class:y(u(o).e("bottom"))},[p(e.$slots,"default")],2)):z("v-if",!0)],2))}}),[["__file","empty.vue"]]));var V,W,G,D,H={exports:{}};V||(V=1,W=H,G="undefined"!=typeof window?window:{},D=function(e,t,l){var a,i;if(function(){var t,l={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in i=e.lazySizesConfig||e.lazysizesConfig||{},l)t in i||(i[t]=l[t])}(),!t||!t.getElementsByClassName)return{init:function(){},cfg:i,noSupport:!0};var s,o,r,n,c,d,f,u,m,p,g,y,v,h,z,C,k,b,x,w,_,$,E,N,A,B,j,M,S,R,L,F,I,T,V,W,G,D,H,O,P,U,q,J,K,X=t.documentElement,Y=e.HTMLPictureElement,Z="addEventListener",Q="getAttribute",ee=e[Z].bind(e),te=e.setTimeout,le=e.requestAnimationFrame||te,ae=e.requestIdleCallback,ie=/^picture$/i,se=["load","error","lazyincluded","_lazyloaded"],oe={},re=Array.prototype.forEach,ne=function(e,t){return oe[t]||(oe[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),oe[t].test(e[Q]("class")||"")&&oe[t]},ce=function(e,t){ne(e,t)||e.setAttribute("class",(e[Q]("class")||"").trim()+" "+t)},de=function(e,t){var l;(l=ne(e,t))&&e.setAttribute("class",(e[Q]("class")||"").replace(l," "))},fe=function(e,t,l){var a=l?Z:"removeEventListener";l&&fe(e,t),se.forEach((function(l){e[a](l,t)}))},ue=function(e,l,i,s,o){var r=t.createEvent("Event");return i||(i={}),i.instance=a,r.initEvent(l,!s,!o),r.detail=i,e.dispatchEvent(r),r},me=function(t,l){var a;!Y&&(a=e.picturefill||i.pf)?(l&&l.src&&!t[Q]("srcset")&&t.setAttribute("srcset",l.src),a({reevaluate:!0,elements:[t]})):l&&l.src&&(t.src=l.src)},pe=function(e,t){return(getComputedStyle(e,null)||{})[t]},ge=function(e,t,l){for(l=l||e.offsetWidth;l<i.minSize&&t&&!e._lazysizesWidth;)l=t.offsetWidth,t=t.parentNode;return l},ye=(U=[],q=P=[],J=function(){var e=q;for(q=P.length?U:P,H=!0,O=!1;e.length;)e.shift()();H=!1},K=function(e,l){H&&!l?e.apply(this,arguments):(q.push(e),O||(O=!0,(t.hidden?te:le)(J)))},K._lsFlush=J,K),ve=function(e,t){return t?function(){ye(e)}:function(){var t=this,l=arguments;ye((function(){e.apply(t,l)}))}},he=function(e){var t,a=0,s=i.throttleDelay,o=i.ricTimeout,r=function(){t=!1,a=l.now(),e()},n=ae&&o>49?function(){ae(r,{timeout:o}),o!==i.ricTimeout&&(o=i.ricTimeout)}:ve((function(){te(r)}),!0);return function(e){var i;(e=!0===e)&&(o=33),t||(t=!0,(i=s-(l.now()-a))<0&&(i=0),e||i<9?n():te(n,i))}},ze=function(e){var t,a,i=99,s=function(){t=null,e()},o=function(){var e=l.now()-a;e<i?te(o,i-e):(ae||s)(s)};return function(){a=l.now(),t||(t=te(o,i))}},Ce=(k=/^img$/i,b=/^iframe$/i,x="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),w=0,_=0,$=0,E=-1,N=function(e){$--,(!e||$<0||!e.target)&&($=0)},A=function(e){return null==C&&(C="hidden"==pe(t.body,"visibility")),C||!("hidden"==pe(e.parentNode,"visibility")&&"hidden"==pe(e,"visibility"))},B=function(e,l){var a,i=e,s=A(e);for(y-=l,z+=l,v-=l,h+=l;s&&(i=i.offsetParent)&&i!=t.body&&i!=X;)(s=(pe(i,"opacity")||1)>0)&&"visible"!=pe(i,"overflow")&&(a=i.getBoundingClientRect(),s=h>a.left&&v<a.right&&z>a.top-1&&y<a.bottom+1);return s},M=he(j=function(){var e,l,s,o,r,n,f,m,k,b,N,j,M=a.elements;if((u=i.loadMode)&&$<8&&(e=M.length)){for(l=0,E++;l<e;l++)if(M[l]&&!M[l]._lazyRace)if(!x||a.prematureUnveil&&a.prematureUnveil(M[l]))V(M[l]);else if((m=M[l][Q]("data-expand"))&&(n=1*m)||(n=_),b||(b=!i.expand||i.expand<1?X.clientHeight>500&&X.clientWidth>500?500:370:i.expand,a._defEx=b,N=b*i.expFactor,j=i.hFac,C=null,_<N&&$<1&&E>2&&u>2&&!t.hidden?(_=N,E=0):_=u>1&&E>1&&$<6?b:w),k!==n&&(p=innerWidth+n*j,g=innerHeight+n,f=-1*n,k=n),s=M[l].getBoundingClientRect(),(z=s.bottom)>=f&&(y=s.top)<=g&&(h=s.right)>=f*j&&(v=s.left)<=p&&(z||h||v||y)&&(i.loadHidden||A(M[l]))&&(d&&$<3&&!m&&(u<3||E<4)||B(M[l],n))){if(V(M[l]),r=!0,$>9)break}else!r&&d&&!o&&$<4&&E<4&&u>2&&(c[0]||i.preloadAfterLoad)&&(c[0]||!m&&(z||h||v||y||"auto"!=M[l][Q](i.sizesAttr)))&&(o=c[0]||M[l]);o&&!r&&V(o)}}),R=ve(S=function(e){var t=e.target;t._lazyCache?delete t._lazyCache:(N(e),ce(t,i.loadedClass),de(t,i.loadingClass),fe(t,L),ue(t,"lazyloaded"))}),L=function(e){R({target:e.target})},F=function(e,t){var l=e.getAttribute("data-load-mode")||i.iframeLoadMode;0==l?e.contentWindow.location.replace(t):1==l&&(e.src=t)},I=function(e){var t,l=e[Q](i.srcsetAttr);(t=i.customMedia[e[Q]("data-media")||e[Q]("media")])&&e.setAttribute("media",t),l&&e.setAttribute("srcset",l)},T=ve((function(e,t,l,a,s){var o,r,n,c,d,u;(d=ue(e,"lazybeforeunveil",t)).defaultPrevented||(a&&(l?ce(e,i.autosizesClass):e.setAttribute("sizes",a)),r=e[Q](i.srcsetAttr),o=e[Q](i.srcAttr),s&&(c=(n=e.parentNode)&&ie.test(n.nodeName||"")),u=t.firesLoad||"src"in e&&(r||o||c),d={target:e},ce(e,i.loadingClass),u&&(clearTimeout(f),f=te(N,2500),fe(e,L,!0)),c&&re.call(n.getElementsByTagName("source"),I),r?e.setAttribute("srcset",r):o&&!c&&(b.test(e.nodeName)?F(e,o):e.src=o),s&&(r||c)&&me(e,{src:o})),e._lazyRace&&delete e._lazyRace,de(e,i.lazyClass),ye((function(){var t=e.complete&&e.naturalWidth>1;u&&!t||(t&&ce(e,i.fastLoadedClass),S(d),e._lazyCache=!0,te((function(){"_lazyCache"in e&&delete e._lazyCache}),9)),"lazy"==e.loading&&$--}),!0)})),V=function(e){if(!e._lazyRace){var t,l=k.test(e.nodeName),a=l&&(e[Q](i.sizesAttr)||e[Q]("sizes")),s="auto"==a;(!s&&d||!l||!e[Q]("src")&&!e.srcset||e.complete||ne(e,i.errorClass)||!ne(e,i.lazyClass))&&(t=ue(e,"lazyunveilread").detail,s&&ke.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,$++,T(e,t,s,a,l))}},W=ze((function(){i.loadMode=3,M()})),D=function(){d||(l.now()-m<999?te(D,999):(d=!0,i.loadMode=3,M(),ee("scroll",G,!0)))},{_:function(){m=l.now(),a.elements=t.getElementsByClassName(i.lazyClass),c=t.getElementsByClassName(i.lazyClass+" "+i.preloadClass),ee("scroll",M,!0),ee("resize",M,!0),ee("pageshow",(function(e){if(e.persisted){var l=t.querySelectorAll("."+i.loadingClass);l.length&&l.forEach&&le((function(){l.forEach((function(e){e.complete&&V(e)}))}))}})),e.MutationObserver?new MutationObserver(M).observe(X,{childList:!0,subtree:!0,attributes:!0}):(X[Z]("DOMNodeInserted",M,!0),X[Z]("DOMAttrModified",M,!0),setInterval(M,999)),ee("hashchange",M,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach((function(e){t[Z](e,M,!0)})),/d$|^c/.test(t.readyState)?D():(ee("load",D),t[Z]("DOMContentLoaded",M),te(D,2e4)),a.elements.length?(j(),ye._lsFlush()):M()},checkElems:M,unveil:V,_aLSL:G=function(){3==i.loadMode&&(i.loadMode=2),W()}}),ke=(o=ve((function(e,t,l,a){var i,s,o;if(e._lazysizesWidth=a,a+="px",e.setAttribute("sizes",a),ie.test(t.nodeName||""))for(s=0,o=(i=t.getElementsByTagName("source")).length;s<o;s++)i[s].setAttribute("sizes",a);l.detail.dataAttr||me(e,l.detail)})),r=function(e,t,l){var a,i=e.parentNode;i&&(l=ge(e,i,l),(a=ue(e,"lazybeforesizes",{width:l,dataAttr:!!t})).defaultPrevented||(l=a.detail.width)&&l!==e._lazysizesWidth&&o(e,i,a,l))},{_:function(){s=t.getElementsByClassName(i.autosizesClass),ee("resize",n)},checkElems:n=ze((function(){var e,t=s.length;if(t)for(e=0;e<t;e++)r(s[e])})),updateElem:r}),be=function(){!be.i&&t.getElementsByClassName&&(be.i=!0,ke._(),Ce._())};return te((function(){i.init&&be()})),a={cfg:i,autoSizer:ke,loader:Ce,init:be,uP:me,aC:ce,rC:de,hC:ne,fire:ue,gW:ge,rAF:ye}}(G,G.document,Date),G.lazySizes=D,W.exports&&(W.exports=D));const O={class:"zfile-gallery-body"},P={key:0,class:"zfile-img-body"},U=["onClick"],q=["data-src","alt"],J={class:"zfile-gallery-img-text"},K={class:"zfile-gallery-img-text"},X={key:1},Y={class:"zfile-gallery-img-text"},Z={key:1,class:"h-full"},Q=S({__name:"FileGallery",setup(e){C((e=>({"069a8460":u(o),"4b13d65f":u(s),"3da46345":u(i)})));let t=k(),l=j();const a=m((()=>{let e=l.filterFileByType("image");if(0===e.length)return[];let a=b([]),i=t.zfileConfig.gallery.column,s=0;return e.forEach(((e,t)=>{t%i==0&&(0!==t&&s++,a.value[s]=[]),a.value[s].push(e)})),(o=a.value)[0].map(((e,t)=>o.map((e=>e[t]))));var o}));let i=m((()=>t.zfileConfig.gallery.rowSpacing+"px")),s=m((()=>`0 ${t.zfileConfig.gallery.columnSpacing/2}px`)),o=m((()=>{let e=t.zfileConfig.gallery.column,l=t.zfileConfig.gallery.columnSpacing;return`calc(calc(100% / ${t.zfileConfig.gallery.column}) - calc(${(e-1)*l}px / ${e}))`}));const{openImage:n}=M();let p=x([]);const S=e=>{p.push(e.currentTarget.alt)};return(e,i)=>{const s=r,o=T;return c(),d("div",O,[u(a).length>0?(c(),d("div",P,[(c(!0),d(w,null,_(u(a),((e,l)=>(c(),d("div",{class:"zfile-img-row",key:l},[(c(!0),d(w,null,_(e,(e=>(c(),d("div",{class:"zfile-img-col",onClick:l=>{return a=e,void(t.zfileConfig.imagePreview.gallery&&p.includes(a.name)&&n(a));var a},style:v({display:"hover"===u(t).zfileConfig.gallery.showInfoMode?"flex":"block"})},[e?.url?(c(),d(w,{key:0},[f("img",{class:y(["zfile-gallery-img lazyload",u(t).zfileConfig.gallery.roundedBorder?"zfile-gallery-img-rounded":""]),"data-sizes":"auto",onLoad:S,"data-src":e.url,loading:"lazy",alt:e.name},null,42,q),u(t).zfileConfig.gallery.showInfo&&"hover"===u(t).zfileConfig.gallery.showInfoMode?N((c(),d("div",{key:0,class:y([u(t).zfileConfig.gallery.roundedBorder?"zfile-gallery-img-rounded":"","zfile-gallery-img-hover-info"])},[f("span",J,h(e.name),1),f("span",K,h(u(B).fileSizeFormat(e.size)),1)],2)),[[A,u(p).includes(e.name)]]):z("",!0),u(t).zfileConfig.gallery.showInfo&&"bottom"===u(t).zfileConfig.gallery.showInfoMode?N((c(),d("div",X,[f("span",Y,h(e.name),1)],512)),[[A,u(p).includes(e.name)]]):z("",!0)],64)):z("",!0)],12,U)))),256))])))),128))])):(c(),d("div",Z,[g(o,{class:"h-full",description:"当前文件夹无图片"},{default:$((()=>[g(s,{type:"primary",onClick:i[0]||(i[0]=e=>u(l).imgMode=!1)},{default:$((()=>[E("退出画廊模式")])),_:1})])),_:1})]))])}}},[["__scopeId","data-v-14b64d67"]]);export{Q as default};
