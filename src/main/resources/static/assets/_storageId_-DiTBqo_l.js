import{aT as e,aU as a,y as s,aB as l,H as t}from"./base-BBwbuMrY.js";/* empty css                *//* empty css               */import"./tag-CxKPM5Nx.js";import{E as o,a as i}from"./select-D4OJKeW_.js";import"./scrollbar-Cg0Qc4lf.js";import{E as r}from"./popper-CF2HgFfE.js";import"./tooltip-l0sNRNKZ.js";/* empty css              */import{E as n}from"./alert-bZCV4XKB.js";import{_ as m}from"./SvgIcon-CP4hezaL.js";import{Z as d,a as p}from"./ZFormItem-DqyrjkCI.js";import{k as c,m as u,l as f}from"./admin-storage-D0L6B7uH.js";import{u as j,r as b}from"./common-D92ZSWsJ.js";import{r as g,I as v,M as h,o as k,a6 as x,J as y,u as _,a as I,b as V,w,k as F,i as U,t as C,N as E,e as B,F as D,v as T,P as z,Q as G}from"./index-B6LbRxzB.js";import{E as Z}from"./request-B2kMKzxx.js";import{E as q}from"./index-XSoVjJxG.js";import{b as A}from"./route-block-B_A1xBdJ.js";import{_ as H}from"./plugin-vue_export-helper-BCo6x5W8.js";import{r as J}from"./CheckBadgeIcon-Cn-PgIwF.js";import{E as L}from"./index-KUFYR68Z.js";import{v as M}from"./directive-c3Zp8yaa.js";import"./castArray-Cx7RYULx.js";import"./event-BwRzfsZt.js";import"./scroll-Ck97Tz0c.js";import"./index-CfE48oVh.js";import"./_Uint8Array-FYYXr4ha.js";import"./debounce-Da1en5bL.js";import"./index-Cd2l2kYr.js";import"./index-58WTuj8x.js";import"./validator-EOLRKd5b.js";let P=g([]),K=g(!1);const N=e=>(z("data-v-8859d854"),e=e(),G(),e),O={class:"flex justify-items-center"},Q=N((()=>F("div",{class:"rules-tips"},"Glob 表达式规则：",-1))),S=N((()=>F("div",{class:"rules-tips"},[F("b",null,"*"),E("：单级路径通配符，如表达式 "),F("span",{class:"select-all code"},"/*.jpg"),E(" 可以匹配根路径下所有的 jpg 后缀的文件 ")],-1))),W=N((()=>F("div",{class:"rules-tips"},[F("b",null,"**"),E("：多级路径通配符，如表达式 "),F("span",{class:"select-all code"},"/**.jpg"),E(" 可以匹配所有路径下的 jpg 后缀的文件 ")],-1))),$={class:"rules-tips-link"},R={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},X=N((()=>F("span",null,"参考文章 (Wikipedia)",-1))),Y={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},ee={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},ae={class:"sm:flex sm:space-x-2 sm:border-b-0 sm:pb-0 border-b pb-2"},se={__name:"[storageId]",setup(z){let G=v(),A=h(),H=G.params.storageId;const{loading:N,loadFilterData:se,filterList:le,addFilterItem:te,deleteFilterItem:oe,saveFilterData:ie}=function(e,a){let s=a.params.storageId;const l=()=>{P.value.push({mode:"hidden",expression:"",storageId:s,description:"表达式 - "+P.value.length})};return{loading:K,loadFilterData:()=>{c(s).then((e=>{P.value=e.data,0===P.value.length&&l()}))},filterList:P,addFilterItem:l,deleteFilterItem:e=>{P.value.splice(e,1)},saveFilterData:()=>{P.value.find((e=>{if(j.isEmpty(e.expression))return Z.warning("请检查数据填写是否完整"),!0}))||(K.value=!0,u(s,P.value).then((()=>{q.confirm("保存成功, 是否返回存储源列表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:a=>{"confirm"===a&&e.push("/admin/storage-list")}})})).finally((()=>{K.value=!1})))}}}(A,G);k((()=>{se(),ne()}));const re=g(),ne=()=>{f(H).then((e=>{e.data.type=e.data.type.key,re.value=e.data}))};return(c,u)=>{const f=m,j=x("router-link"),g=n,v=L,h=r,k=o,z=i,G=t,Z=M;return y((I(),V(p,{model:_(le),class:"zfile-admin-filter-form"},{"form-title":w((()=>[F("div",O,[U(j,{to:"/admin/storage-list"},{default:w((()=>[U(f,{class:"inline mr-2 cursor-pointer",name:"file-type-back"})])),_:1}),F("span",null,"过滤文件（"+C(_(re)?.name)+"）",1)])])),"form-sub-title":w((()=>[U(g,{closable:!1,type:"info"},{default:w((()=>[Q,S,W,F("div",$,[F("a",R,[U(_(e),{class:"inline mr-1"}),X]),F("a",Y,[U(_(e),{class:"inline mr-1"}),E("参考文章 (阮一峰)")]),F("a",ee,[U(_(e),{class:"inline mr-1"}),E("参考文章 (Github)")])])])),_:1})])),footer:w((()=>[U(G,{type:"primary",size:"default",icon:_(J),onClick:_(ie)},{default:w((()=>[E("保存设置")])),_:1},8,["icon","onClick"])])),default:w((()=>[(I(!0),B(D,null,T(_(le),((e,l)=>(I(),V(d,{required:!0,key:l,class:"expression-item"},{default:w((()=>[F("div",ae,[U(h,{content:"此处可填写表达书描述，用于辅助记忆，防止时间过长后不知道表达式含义.",placement:"top"},{default:w((()=>[U(v,{"prefix-icon":_(a),placeholder:"请输入表达式描述",modelValue:e.description,"onUpdate:modelValue":a=>e.description=a},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])])),_:2},1024),U(v,{"prefix-icon":_(b),placeholder:"请输入表达式",modelValue:e.expression,"onUpdate:modelValue":a=>e.expression=a,modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"]),U(z,{class:"editor-input",modelValue:e.mode,"onUpdate:modelValue":a=>e.mode=a},{default:w((()=>[U(k,{label:"仅隐藏",value:"hidden"}),U(k,{label:"隐藏并不可访问(针对目录)",value:"inaccessible"}),U(k,{label:"隐藏并不可访问不可下载(针对文件)",value:"disable_download"})])),_:2},1032,["modelValue","onUpdate:modelValue"]),U(G,{type:"danger",onClick:e=>_(oe)(l),icon:_(s)},null,8,["onClick","icon"])])])),_:2},1024)))),128)),U(d,null,{default:w((()=>[U(G,{type:"primary",size:"default",icon:_(l),onClick:_(te)},{default:w((()=>[E("添加更多")])),_:1},8,["icon","onClick"])])),_:1})])),_:1},8,["model"])),[[Z,_(N)]])}}};"function"==typeof A&&A(se);const le=H(se,[["__scopeId","data-v-8859d854"]]);export{le as default};
