System.register(["./base-legacy.C4HCoRVd.js","./loading-legacy.BfOje5Sp.js","./ZFormItem-legacy.BCuPcTQ5.js","./input-legacy.QHqwdb9y.js","./input-number-legacy.UJWZdvLd.js","./radio-legacy.B9rFPEIL.js","./popper-legacy.A4J8PAUb.js","./popover-legacy.4IRfn_Dd.js","./button-legacy.DICWts_D.js","./index-legacy.DUvvBSvn.js","./admin-setting-legacy.DyAKlYCg.js","./request-legacy.-200HP3-.js","./route-block-legacy.wdPIt6g0.js","./plugin-vue_export-helper-legacy.ul8DAaRV.js","./CheckBadgeIcon-legacy.D70XKG37.js","./index-legacy.DdGmP4UA.js","./index-legacy.O2R__VPQ.js","./directive-legacy.BxLSi8TL.js","./event-legacy.CFsZpNd4.js","./index-legacy.BI_Z7oJg.js","./index-legacy.BcMCRM2R.js","./dropdown-legacy.BtcWL6-C.js"],(function(e,n){"use strict";var t,a,o,l,i,u,r,c,d,f,s,m,p,g,v,x,V,y,h,w,L,_,b,j,H,U,k,z,C,M,N,D,B,E,A;return{setters:[function(e){t=e.au,a=e.G,o=e.aC,l=e.H},null,function(e){i=e.Z,u=e.a},null,function(e){r=e.E},function(e){c=e.E},null,null,null,function(e){d=e.a,f=e.e,s=e.k,m=e.$,p=e.H,g=e.r,v=e.m,x=e.u,V=e.J,y=e.b,h=e.w,w=e.N,L=e.i,_=e.K,b=e.t,j=e.j,H=e.P,U=e.Q},function(e){k=e.l,z=e.e},function(e){C=e.E},function(e){M=e.b},function(e){N=e._},function(e){D=e.r},function(e){B=e.E},function(e){E=e.E},function(e){A=e.v},null,null,null,null],execute:function(){var n=document.createElement("style");function F(e,n){return d(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})])}function T(e,n){return d(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),s("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"})])}function q(e,n){return d(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})])}function S(e,n){return d(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.74 12.74 0 002.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 00.374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 00-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08zm3.094 8.016a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})])}n.textContent=".el-button[data-v-d5333aa8],.el-input[data-v-d5333aa8] input{height:35px}\n/*$vite$:1*/",document.head.appendChild(n);var I=function(e){return H("data-v-d5333aa8"),e=e(),U(),e},$={class:"mt-2"},G=I((function(){return s("span",{class:"text-red-500 text-sm"},"设置异常，点击查看",-1)})),J={class:"text-sm"},P={class:"mb-2"},Z={class:"text-red-500"},K={class:"flex justify-end"},O={class:"mt-2"},Q=I((function(){return s("span",{class:"text-red-500 text-sm"},"设置异常，点击查看",-1)})),R={class:"text-sm"},W={class:"mb-2"},X={class:"text-red-500"},Y={class:"flex justify-end"},ee={__name:"site-setting",setup:function(e){var n=p(),f=function(){var e=m(k,{formatResult:function(e){return e.data}}),n=e.data,t=e.loading,a=e.reload,o=m(z,{manual:!0,onSuccess:function(){C({message:"保存成功",type:"success"})}}),l=o.loading,i=o.run;return{data:n,dataLoading:t,reload:a,saveData:function(){i(n.value)},saveLoading:l}}(),H=f.data,U=f.dataLoading,M=f.saveData,N=f.saveLoading,I=g({siteName:[{required:!0,message:"请输入站点名称"}],faviconUrl:[{type:"url",message:"请输入正确的 favicon 地址，需以 http 或 https 开头"}],domain:[{required:!0,message:"请输入后端站点域名"}],frontDomain:[],avatar:[{type:"url",message:"请输入正确的头像地址，需以 http 或 https 开头"}]}),ee=g(),ne=function(){document.querySelector(".z-form").click(),ee.value.validate((function(e){e&&M()}))},te=g({flag:!1,except:"",action:function(){}}),ae=g({flag:!1,except:"",action:function(){}});return v((function(){return U.value}),(function(e,t){if(!0===t){var a=n.zfileConfig.baseUrl||window.location.origin,o=H.value.domain;a!==o&&(te.value.flag=!0,te.value.current=o,te.value.except=a,te.value.action=function(){H.value.domain=a,ne(),te.value.flag=!1});var l=H.value.frontDomain,i=window.location.origin;""!==n.zfileConfig.baseUrl&&l!==i?(ae.value.flag=!0,ae.value.current=l,ae.value.except=i,ae.value.action=function(){H.value.frontDomain=i,ne(),ae.value.flag=!1}):""===n.zfileConfig.baseUrl&&l&&(ae.value.flag=!0,ae.value.current=l,ae.value.except="空",ae.value.action=function(){H.value.frontDomain="",ne(),ae.value.flag=!1})}})),function(e,n){var f=B,m=i,p=l,g=E,v=c,U=r,k=u,z=A;return x(H)?V((d(),y(k,{key:0,model:x(H),rules:x(I),ref_key:"siteSettingForm",ref:ee},{"form-title":h((function(){return[w(" 站点信息 ")]})),"form-sub-title":h((function(){return[w(" 请填写您的站点信息 ")]})),footer:h((function(){return[L(p,{type:"primary",size:"default",icon:x(D),onClick:ne},{default:h((function(){return[w("保存设置")]})),_:1},8,["icon"])]})),default:h((function(){return[L(m,{prop:"siteName",label:"站点名称"},{default:h((function(){return[L(f,{id:"siteName","prefix-icon":x(t),modelValue:x(H).siteName,"onUpdate:modelValue":n[0]||(n[0]=function(e){return x(H).siteName=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),L(m,{prop:"faviconUrl",label:"站点 favicon"},{tips:h((function(){return[w("网站在浏览器标题栏的 favicon 图标，需确保输入的地址没有 referer 防盗链，如修改后不生效请清理浏览器缓存或再试。")]})),default:h((function(){return[L(f,{id:"faviconUrl","prefix-icon":x(t),modelValue:x(H).faviconUrl,"onUpdate:modelValue":n[1]||(n[1]=function(e){return x(H).faviconUrl=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),L(m,{prop:"domain",label:"后端站点域名"},{tips:h((function(){return[w("此地址用于生成直链及本次存储下载使用，请务必保持和服务端地址一样 (需写 http(s):// 协议头)")]})),default:h((function(){return[L(f,{id:"domain","prefix-icon":x(a),modelValue:x(H).domain,"onUpdate:modelValue":n[2]||(n[2]=function(e){return x(H).domain=e})},null,8,["prefix-icon","modelValue"]),L(g,{placement:"right",width:400,trigger:"click"},{reference:h((function(){return[V(s("div",$,[G,L(x(F),{class:"inline w-5 text-red-500"})],512),[[_,x(te).flag]])]})),default:h((function(){return[s("div",J,[s("div",P,[w(" 检测到设置异常，实际后端域名应为 "),s("span",Z,b(x(te).except),1),w("，是否需要修复？（不修正可能会影响下载、文件夹加密和文档预览功能） ")]),s("div",K,[L(p,{size:"small",type:"warning",icon:x(D),onClick:x(te).action},{default:h((function(){return[w("自动修正")]})),_:1},8,["icon","onClick"])])])]})),_:1})]})),_:1}),L(m,{prop:"frontDomain",label:"前端站点域名"},{tips:h((function(){return[w("前后端分离后，需配置此地址，会影响 401、403、404 页面的跳转 (需写 http(s):// 协议头，未前后端分离请保持为空)")]})),default:h((function(){return[L(f,{"prefix-icon":x(a),modelValue:x(H).frontDomain,"onUpdate:modelValue":n[3]||(n[3]=function(e){return x(H).frontDomain=e})},null,8,["prefix-icon","modelValue"]),L(g,{placement:"right",width:400,trigger:"click"},{reference:h((function(){return[V(s("div",O,[Q,L(x(F),{class:"inline w-5 text-red-500"})],512),[[_,x(ae).flag]])]})),default:h((function(){return[s("div",R,[s("div",W,[w(" 检测到设置异常，实际前端域名应为 "),s("span",X,b(x(ae).except),1),w("，是否需要修复？（不修正会影响 401、403、404 页面的跳转功能） ")]),s("div",Y,[L(p,{size:"small",type:"warning",icon:x(D),onClick:x(ae).action},{default:h((function(){return[w("自动修正")]})),_:1},8,["icon","onClick"])])])]})),_:1})]})),_:1}),L(m,{prop:"avatar",label:"头像地址"},{tips:h((function(){return[w("用于管理员页面右上角头像地址，推荐尺寸为 35 * 35.")]})),default:h((function(){return[L(f,{id:"avatar","prefix-icon":x(o),modelValue:x(H).avatar,"onUpdate:modelValue":n[4]||(n[4]=function(e){return x(H).avatar=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),L(m,{prop:"siteHomeName",label:"根路径名称"},{tips:h((function(){return[w("用于设置首页上方面包屑根目录的默认名称.")]})),default:h((function(){return[L(f,{id:"siteHomeName","prefix-icon":x(T),modelValue:x(H).siteHomeName,"onUpdate:modelValue":n[5]||(n[5]=function(e){return x(H).siteHomeName=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),L(m,{prop:"siteHomeLogo",label:"首页 Logo 图片地址"},{tips:h((function(){return[w("用于设置首页上面包屑左侧 Logo，留空为不显示，会自动居中显示，如有需要可通过自定义 css 来修改默认样式, logo 元素的 id 为 zfile-home-logo")]})),default:h((function(){return[L(f,{id:"siteHomeLogo","prefix-icon":x(q),modelValue:x(H).siteHomeLogo,"onUpdate:modelValue":n[6]||(n[6]=function(e){return x(H).siteHomeLogo=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),L(m,{prop:"siteHomeLogoLink",label:"首页 Logo 打开链接"},{tips:h((function(){return[w("点击 Logo 链接后打开的地址，为空则点击不进行任何跳转")]})),default:h((function(){return[L(f,{id:"siteHomeLogoLink","prefix-icon":x(a),modelValue:x(H).siteHomeLogoLink,"onUpdate:modelValue":n[7]||(n[7]=function(e){return x(H).siteHomeLogoLink=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),L(m,{prop:"siteHomeLogoTargetMode",label:"首页 Logo 链接打开方式"},{tips:h((function(){return[w("控制 Logo 链接的打开方式")]})),default:h((function(){return[L(v,{modelValue:x(H).siteHomeLogoTargetMode,"onUpdate:modelValue":n[8]||(n[8]=function(e){return x(H).siteHomeLogoTargetMode=e}),label:"_blank"},{default:h((function(){return[w("新标签打开")]})),_:1},8,["modelValue"]),L(v,{modelValue:x(H).siteHomeLogoTargetMode,"onUpdate:modelValue":n[9]||(n[9]=function(e){return x(H).siteHomeLogoTargetMode=e}),label:"_self"},{default:h((function(){return[w("当前页面打开")]})),_:1},8,["modelValue"])]})),_:1}),L(m,{label:"备案号"},{default:h((function(){return[L(f,{id:"icp","prefix-icon":x(S),modelValue:x(H).icp,"onUpdate:modelValue":n[10]||(n[10]=function(e){return x(H).icp=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),L(m,{label:"最大同时上传文件数"},{default:h((function(){return[L(U,{id:"maxFileUploads",modelValue:x(H).maxFileUploads,"onUpdate:modelValue":n[11]||(n[11]=function(e){return x(H).maxFileUploads=e}),min:1,max:99},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])),[[z,x(N)]]):j("",!0)}}};"function"==typeof M&&M(ee),e("default",N(ee,[["__scopeId","data-v-d5333aa8"]]))}}}));
