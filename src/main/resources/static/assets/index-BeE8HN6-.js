import{au as e,av as a,aw as s,G as i,H as l}from"./base-BBwbuMrY.js";import{E as t,a as r}from"./form-item-BRZ0j9EI.js";/* empty css               *//* empty css              */import{M as o,r as n,E as d,Y as m,H as u,a as p,e as f,k as c,i as g,w as x,u as _,N as v,g as b,ab as h,P as w,Q as j}from"./index-B6LbRxzB.js";import y from"./zfile-basic-BAkVRYzJ.js";import{i as V,a as U}from"./install-CWxdVj0R.js";import{_ as z}from"./plugin-vue_export-helper-BCo6x5W8.js";import{r as I}from"./CheckBadgeIcon-Cn-PgIwF.js";import{E as k}from"./request-B2kMKzxx.js";import{E as C}from"./index-KUFYR68Z.js";import"./castArray-Cx7RYULx.js";import"./_Uint8Array-FYYXr4ha.js";import"./_initCloneObject-CVPj0KFk.js";import"./event-BwRzfsZt.js";const N={class:"h-full min-h-screen bg-gray-100 text-gray-900 flex justify-center items-center"},q={class:"h-full lg:h-auto max-w-screen-lg bg-white shadow-xl sm:rounded-xl flex flex-1"},E=(e=>(w("data-v-77df74b1"),e=e(),j(),e))((()=>c("div",{class:"flex-1 bg-gray-50 text-center hidden lg:flex rounded-l-xl"},[c("div",{class:"m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat zfile-install-logo"})],-1))),M={class:"w-full lg:w-1/2 xl:w-1/2 mt-10 p-6 sm:p-12"},A={class:"mt-0 flex flex-col items-center"},B={class:"text-2xl mt-0 xl:text-3xl font-extrabold box animate__animated animate__fadeInDown"},G={class:"w-full flex-1"},H=h('<div class="my-12 relative" data-v-77df74b1><div class="absolute inset-0 flex items-center" aria-hidden="true" data-v-77df74b1><div class="w-full border-t text-gray-600" data-v-77df74b1></div></div><div class="relative flex justify-center text-sm" data-v-77df74b1><span class="px-2 bg-white text-sm leading-none text-gray-600 tracking-wide font-medium" data-v-77df74b1>系统初始化</span></div></div>',1),O=z({__name:"index",setup(h){let w=o(),j=n(!1),z=n(),O=d({siteName:"",username:"",password:"",domain:""}),P=n({siteName:[{required:!0,message:"请输入站点名称",trigger:["change","blur"]}],username:[{required:!0,message:"请输入管理员账号",trigger:["change","blur"]}],password:[{required:!0,message:"请输入管理员密码",trigger:["change","blur"]}],domain:[{required:!0,message:"请输入正确的域名，需以 http:// 或 https:// 开头",trigger:"change"}]});const S=async()=>{await z.value.validate((e=>{e?(j.value=!0,U(O).then((e=>{k({message:"初始化成功",type:0===e.code?"success":"error",duration:1500,onClose(){w.push("/")}})})).finally((()=>{j.value=!1}))):k.warning("请正确输入初始化值!")}))};return m((()=>{const e=u();O.domain=e.zfileConfig.baseUrl||window.location.origin,V().then((e=>{e.data&&w.push("/")}))})),(o,n)=>{const d=C,m=t,u=l,h=r;return p(),f("div",N,[c("div",q,[E,c("div",M,[c("div",A,[c("h1",B,[c("img",{class:"w-16 cursor-pointer",onClick:n[0]||(n[0]=e=>{return a="https://github.com/zhaojun1998/zfile",void window.open(a);var a}),src:y})]),c("div",G,[H,g(h,{onSubmit:n[5]||(n[5]=b((()=>{}),["prevent"])),ref_key:"installFormRef",ref:z,rules:_(P),model:_(O),class:"zfile-install-form",size:"large"},{default:x((()=>[g(m,{class:"box animate__animated animate__fadeInUp",prop:"siteName"},{default:x((()=>[g(d,{placeholder:"站点名称","prefix-icon":_(e),modelValue:_(O).siteName,"onUpdate:modelValue":n[1]||(n[1]=e=>_(O).siteName=e)},null,8,["prefix-icon","modelValue"])])),_:1}),g(m,{class:"box animate__animated animate__fadeInUp",prop:"username"},{default:x((()=>[g(d,{placeholder:"管理员账号","prefix-icon":_(a),modelValue:_(O).username,"onUpdate:modelValue":n[2]||(n[2]=e=>_(O).username=e),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])])),_:1}),g(m,{class:"box animate__animated animate__fadeInUp",prop:"password"},{default:x((()=>[g(d,{placeholder:"管理员密码",type:"password","show-password":"","prefix-icon":_(s),modelValue:_(O).password,"onUpdate:modelValue":n[3]||(n[3]=e=>_(O).password=e),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])])),_:1}),g(m,{class:"box animate__animated animate__fadeInUp",prop:"domain"},{default:x((()=>[g(d,{placeholder:"站点地址/域名","prefix-icon":_(i),modelValue:_(O).domain,"onUpdate:modelValue":n[4]||(n[4]=e=>_(O).domain=e),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])])),_:1}),g(m,null,{default:x((()=>[g(u,{"native-type":"submit",loading:_(j),class:"w-full",type:"primary",icon:_(I),onClick:S},{default:x((()=>[v(" 系统初始化 ")])),_:1},8,["loading","icon"])])),_:1})])),_:1},8,["rules","model"])])])])])])}}},[["__scopeId","data-v-77df74b1"]]);export{O as default};
