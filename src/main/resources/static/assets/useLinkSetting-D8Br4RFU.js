import{l as e,b as i}from"./admin-setting-DFIt9dmd.js";import{$ as a}from"./index-B6LbRxzB.js";import{b as s}from"./unit-DqtDPlxk.js";import{E as r}from"./request-B2kMKzxx.js";function n(){const{data:n,loading:t,reload:l}=a(e,{formatResult:e=>{let i=e.data;return i.linkExpireTimes=JSON.parse(i.linkExpireTimes),i}}),{loading:o,run:u}=a(i,{manual:!0,onSuccess(){r({message:"保存成功",type:"success"})}});return{data:n,dataLoading:t,reload:l,saveData:()=>{n.value.linkExpireTimes=n.value.linkExpireTimes.filter((e=>{if(e.value&&e.unit)return e.seconds=s(e),!0})),n.value.linkExpireTimes=JSON.stringify(n.value.linkExpireTimes),n.value.directLinkPrefix?u(n.value).then((()=>{l()})):r.warning("直链前缀不能为空")},saveLoading:o}}export{n as u};
