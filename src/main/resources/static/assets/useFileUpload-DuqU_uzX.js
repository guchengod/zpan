import{d as e,E as t}from"./request-B2kMKzxx.js";import{a as n,e as a,k as l,r,c as o,af as i,d as s,a2 as u,o as d,a9 as c,a3 as p,F as f,m as g,p as h,B as v,U as m,E as y,u as b,s as w,W as x,f as S,O as k,b as C,w as E,i as T,N as L,t as A,z as O,j as P,ag as F,L as M,G as B,a5 as D,J as z,K as R,n as j,g as _,T as I,ah as N,P as $,Q as V,ai as H,aj as U,H as K,ak as W,al as q}from"./index-B6LbRxzB.js";import{c as G}from"./common-B1W1rpUW.js";import{a as Y,u as Q,d as J,e as X,f as Z,g as ee}from"./useCommon-CGwVn2w-.js";import"./base-BBwbuMrY.js";import{E as te}from"./checkbox-C28m1aVK.js";/* empty css              */import{S as ne,E as ae}from"./index-KUFYR68Z.js";import{H as le,d as re,m as oe,S as ie,o as se,u as ue,P as de,b as ce,T as pe,t as fe,p as ge,l as he,y as ve,N as me,a as ye,C as be,e as we,c as xe,f as Se,r as ke,E as Ce}from"./use-outside-click-ez4SFYwU.js";import{a as Ee,r as Te}from"./XCircleIcon-C5fQ6vrv.js";import{E as Le}from"./index-XSoVjJxG.js";function Ae(e,t){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})])}function Oe(e,t){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})])}function Pe(e,t){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})])}const Fe=r([]);let Me=null;function Be(e){e&&(Me=e);const t=o((()=>Fe.value.length>0?Fe.value[Fe.value.length-1]:null)),n=o((()=>Fe.value.filter((e=>"FILE"===e.type)))),a=o((()=>Fe.value.filter((e=>"FOLDER"===e.type)))),l=o((()=>{let e=Fe.value.length;return{isSingleSelect:1===e,isMultiSelect:e>1,isAllFile:n.value.length===e,isAllFolder:a.value.length===e}}));return{checkSelectable:e=>"FILE"===e.type||"FOLDER"===e.type,tableRowClassName:({row:e,rowIndex:t})=>(e.index=t,-1!==Fe.value.indexOf(e)?"select-row":""),selectRowsChange:e=>{Fe.value=e},selectRow:t,selectRows:Fe,selectFiles:n,selectFolders:a,selectStatistics:l,clearSelection:()=>{Me.proxy.$refs.fileTableRef.clearSelection()},toggleRowSelection:(e,t)=>{"BACK"!==e?.type&&Me.proxy.$refs.fileTableRef.toggleRowSelection(e,t)},toggleAllSelection:()=>{Me.proxy.$refs.fileTableRef.toggleAllSelection()}}}let{selectStatistics:De}=Be();const ze=i("storageConfigStore",{state:()=>({globalConfig:{siteName:"",directLinkPrefix:"",infoEnable:!1,showLinkBtn:!1,recordDownloadLog:!1,showShortLink:!1,showPathLink:!1,tableSize:"small",rootShowStorage:!0,fileClickMode:"dbclick",showDocument:!1,debugMode:!1,domain:"",icp:"",avatar:"",announcement:"",layout:"full",showAnnouncement:!1,searchEnable:!1,showLogin:!1,siteHomeName:"首页",siteHomeLogo:"",siteHomeLogoLink:"",siteHomeLogoTargetMode:"",maxShowSize:1e3,loadMoreSize:50,defaultSortField:"name",defaultSortOrder:"asc",linkExpireTimes:""},folderConfig:{readmeText:null,readmeDisplayMode:null,defaultSwitchToImgMode:!1,enableFileOperator:!1}}),getters:{permission:e=>({open:De.value.isSingleSelect&&De.value.isAllFolder,preview:De.value.isAllFile&&De.value.isSingleSelect,download:De.value.isAllFile,link:De.value.isAllFile&&e.globalConfig.showLinkBtn&&(e.globalConfig.showShortLink||e.globalConfig.showPathLink),rename:e.folderConfig.enableFileOperator&&De.value.isSingleSelect,delete:e.folderConfig.enableFileOperator,newFolder:e.folderConfig.enableFileOperator,upload:e.folderConfig.enableFileOperator,pathLink:e.globalConfig.showPathLink,shortLink:e.globalConfig.showShortLink})},actions:{updateGlobalConfig(e){this.globalConfig=e},updateFolderConfig(e){this.folderConfig=e}}}),Re=i("fileDataStore",{state:()=>({currentClickRow:{},currentRightClickRow:{},currentStorageSource:{id:null,type:{description:"",key:""}},imgMode:!1,newImgMode:!1,oldStorageKey:null,searchParam:"",fileListSource:[],loadFileSize:-1,audioArray:[],audioIndex:0}),getters:{filterFileByType:e=>t=>e.fileListSource.filter((function(e){if("BACK"===e.type)return!1;let n=e.name,a=n.substr(n.lastIndexOf(".")+1).toLowerCase();return-1!==G.constant.fileTypeMap[t].indexOf(a)})),fileList:e=>{if(-1===e.loadFileSize)return[];let t="BACK"===e.fileListSource[0]?.type?e.loadFileSize+1:e.loadFileSize;t=t>e.fileListSource.length?e.fileListSource.length:t;let n=e.fileListSource.slice(0,t);return n.forEach((e=>{if(e.icon||(e.icon=G.getFileIconName(e)),null!==e.preview){let t=G.getFileType(e.name);t?(e.fileType=t,e.preview=-1!==G.constant.previewFileType.indexOf(t)):e.preview=!1}})),n},getFileUrlByName:e=>t=>{let n=e.fileListSource.find((e=>e.name===t));return n?n.url:""}},actions:{updateCurrentStorageSource(e){this.currentStorageSource=e},updateAudioIndex(e){this.audioIndex=e},updateAudioList(e){this.audioArray=e},updateCurrentClickRow(e){this.currentClickRow=e},updateCurrentRightClickRow(e){this.currentRightClickRow=e},updateFileList(e){this.fileListSource=e,this.loadFileSize=ze().globalConfig.maxShowSize},updateOldStorageKey(e){this.oldStorageKey=e},updateLoadFileSize(e){this.loadFileSize=e}}});var je,_e=((je=_e||{})[je.None=1]="None",je[je.Focusable=2]="Focusable",je[je.Hidden=4]="Hidden",je);let Ie=s({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup:(e,{slots:t,attrs:n})=>()=>{let{features:a,...l}=e,r={"aria-hidden":!(2&~a)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~a)&&!!(2&~a)&&{display:"none"}}};return le({ourProps:r,theirProps:l,slot:{},attrs:n,slots:t,name:"Hidden"})}});var Ne,$e=((Ne=$e||{})[Ne.Forwards=0]="Forwards",Ne[Ne.Backwards=1]="Backwards",Ne);function Ve(){let e=r(0);return function(e,t,n){re.isServer||u((a=>{window.addEventListener(e,t,n),a((()=>window.removeEventListener(e,t,n)))}))}("keydown",(t=>{"Tab"===t.key&&(e.value=t.shiftKey?1:0)})),e}function He(e,t,n,a){re.isServer||u((l=>{(e=null!=e?e:window).addEventListener(t,n,a),l((()=>e.removeEventListener(t,n,a)))}))}function Ue(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function Ke(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let n of e.value){let e=se(n);e instanceof HTMLElement&&t.add(e)}return t}var We,qe=((We=qe||{})[We.None=1]="None",We[We.InitialFocus=2]="InitialFocus",We[We.TabLock=4]="TabLock",We[We.FocusLock=8]="FocusLock",We[We.RestoreFocus=16]="RestoreFocus",We[We.All=30]="All",We);let Ge=Object.assign(s({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:r(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:a}){let l=r(null);a({el:l,$el:l});let i=o((()=>oe(l))),s=r(!1);d((()=>s.value=!0)),c((()=>s.value=!1)),function({ownerDocument:e},t){let n=function(e){let t=r(Ye.slice());return g([e],(([e],[n])=>{!0===n&&!1===e?Ue((()=>{t.value.splice(0)})):!1===n&&!0===e&&(t.value=Ye.slice())}),{flush:"post"}),()=>{var e;return null!=(e=t.value.find((e=>null!=e&&e.isConnected)))?e:null}}(t);d((()=>{u((()=>{var a,l;t.value||(null==(a=e.value)?void 0:a.activeElement)===(null==(l=e.value)?void 0:l.body)&&ie(n())}),{flush:"post"})})),c((()=>{ie(n())}))}({ownerDocument:i},o((()=>s.value&&Boolean(16&e.features))));let h=function({ownerDocument:e,container:t,initialFocus:n},a){let l=r(null),o=r(!1);return d((()=>o.value=!0)),c((()=>o.value=!1)),d((()=>{g([t,n,a],((r,i)=>{if(r.every(((e,t)=>(null==i?void 0:i[t])===e))||!a.value)return;let s=se(t);s&&Ue((()=>{var t,a;if(!o.value)return;let r=se(n),i=null==(t=e.value)?void 0:t.activeElement;if(r){if(r===i)return void(l.value=i)}else if(s.contains(i))return void(l.value=i);r?ie(r):(de(s,ce.First|ce.NoScroll),pe.Error),l.value=null==(a=e.value)?void 0:a.activeElement}))}),{immediate:!0,flush:"post"})})),l}({ownerDocument:i,container:l,initialFocus:o((()=>e.initialFocus))},o((()=>s.value&&Boolean(2&e.features))));!function({ownerDocument:e,container:t,containers:n,previousActiveElement:a},l){var r;He(null==(r=e.value)?void 0:r.defaultView,"focus",(e=>{if(!l.value)return;let r=Ke(n);se(t)instanceof HTMLElement&&r.add(se(t));let o=a.value;if(!o)return;let i=e.target;i&&i instanceof HTMLElement?Qe(r,i)?(a.value=i,ie(i)):(e.preventDefault(),e.stopPropagation(),ie(o)):ie(a.value)}),!0)}({ownerDocument:i,container:l,containers:e.containers,previousActiveElement:h},o((()=>s.value&&Boolean(8&e.features))));let v=Ve();function m(e){let t=se(l);t&&ue(v.value,{[$e.Forwards]:()=>{de(t,ce.First,{skipElements:[e.relatedTarget]})},[$e.Backwards]:()=>{de(t,ce.Last,{skipElements:[e.relatedTarget]})}})}let y=r(!1);function b(e){"Tab"===e.key&&(y.value=!0,requestAnimationFrame((()=>{y.value=!1})))}function w(t){if(!s.value)return;let n=Ke(e.containers);se(l)instanceof HTMLElement&&n.add(se(l));let a=t.relatedTarget;a instanceof HTMLElement&&"true"!==a.dataset.headlessuiFocusGuard&&(Qe(n,a)||(y.value?de(se(l),ue(v.value,{[$e.Forwards]:()=>ce.Next,[$e.Backwards]:()=>ce.Previous})|ce.WrapAround,{relativeTo:t.target}):t.target instanceof HTMLElement&&ie(t.target)))}return()=>{let a={ref:l,onKeydown:b,onFocusout:w},{features:r,initialFocus:o,containers:i,...s}=e;return p(f,[Boolean(4&r)&&p(Ie,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:_e.Focusable}),le({ourProps:a,theirProps:{...t,...s},slot:{},attrs:t,slots:n,name:"FocusTrap"}),Boolean(4&r)&&p(Ie,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:_e.Focusable})])}}}),{features:qe}),Ye=[];function Qe(e,t){for(let n of e)if(n.contains(t))return!0;return!1}!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}((()=>{function e(e){e.target instanceof HTMLElement&&e.target!==document.body&&Ye[0]!==e.target&&(Ye.unshift(e.target),Ye=Ye.filter((e=>null!=e&&e.isConnected)),Ye.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})}));let Je=new Map,Xe=new Map;function Ze(e,t=r(!0)){u((n=>{var a;if(!t.value)return;let l=se(e);if(!l)return;n((function(){var e;if(!l)return;let t=null!=(e=Xe.get(l))?e:1;if(1===t?Xe.delete(l):Xe.set(l,t-1),1!==t)return;let n=Je.get(l);n&&(null===n["aria-hidden"]?l.removeAttribute("aria-hidden"):l.setAttribute("aria-hidden",n["aria-hidden"]),l.inert=n.inert,Je.delete(l))}));let r=null!=(a=Xe.get(l))?a:0;Xe.set(l,r+1),0===r&&(Je.set(l,{"aria-hidden":l.getAttribute("aria-hidden"),inert:l.inert}),l.setAttribute("aria-hidden","true"),l.inert=!0)}))}let et=Symbol("ForcePortalRootContext");let tt=s({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup:(e,{slots:t,attrs:n})=>(h(et,e.force),()=>{let{force:a,...l}=e;return le({theirProps:l,ourProps:{},slot:{},slots:t,attrs:n,name:"ForcePortalRoot"})})});let nt=s({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let a=r(null),l=o((()=>oe(a))),i=v(et,!1),s=v(at,null),d=r(!0===i||null==s?function(e){let t=oe(e);if(!t){if(null===e)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let a=t.createElement("div");return a.setAttribute("id","headlessui-portal-root"),t.body.appendChild(a)}(a.value):s.resolveTarget());return u((()=>{i||null!=s&&(d.value=s.resolveTarget())})),c((()=>{var e,t;let n=null==(e=l.value)?void 0:e.getElementById("headlessui-portal-root");n&&d.value===n&&d.value.children.length<=0&&(null==(t=d.value.parentElement)||t.removeChild(d.value))})),()=>{if(null===d.value)return null;let l={ref:a,"data-headlessui-portal":""};return p(m,{to:d.value},le({ourProps:l,theirProps:e,slot:{},attrs:n,slots:t,name:"Portal"}))}}}),at=Symbol("PortalGroupContext"),lt=s({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:n}){let a=y({resolveTarget:()=>e.target});return h(at,a),()=>{let{target:a,...l}=e;return le({theirProps:l,ourProps:{},slot:{},attrs:t,slots:n,name:"PortalGroup"})}}}),rt=Symbol("StackContext");var ot=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(ot||{});function it({type:e,enabled:t,element:n,onUpdate:a}){let l=v(rt,(()=>{}));function r(...e){null==a||a(...e),l(...e)}d((()=>{g(t,((t,a)=>{t?r(0,e,n):!0===a&&r(1,e,n)}),{immediate:!0,flush:"sync"})})),c((()=>{t.value&&r(1,e,n)})),h(rt,r)}let st=Symbol("DescriptionContext");function ut(){let e=[],t={addEventListener:(e,n,a,l)=>(e.addEventListener(n,a,l),t.add((()=>e.removeEventListener(n,a,l)))),requestAnimationFrame(...e){let n=requestAnimationFrame(...e);t.add((()=>cancelAnimationFrame(n)))},nextFrame(...e){t.requestAnimationFrame((()=>{t.requestAnimationFrame(...e)}))},setTimeout(...e){let n=setTimeout(...e);t.add((()=>clearTimeout(n)))},style(e,t,n){let a=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:a})}))},group(e){let t=ut();return e(t),this.add((()=>t.dispose()))},add:t=>(e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function dt(){let e;return{before({doc:t}){var n;let a=t.documentElement;e=(null!=(n=t.defaultView)?n:window).innerWidth-a.clientWidth},after({doc:t,d:n}){let a=t.documentElement,l=a.clientWidth-a.offsetWidth,r=e-l;n.style(a,"paddingRight",`${r}px`)}}}function ct(){if(!(/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0))return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:n,meta:a}){function l(e){return a.containers.flatMap((e=>e())).some((t=>t.contains(e)))}n.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let r=null;n.addEventListener(t,"click",(e=>{if(e.target instanceof HTMLElement)try{let n=e.target.closest("a");if(!n)return;let{hash:a}=new URL(n.href),o=t.querySelector(a);o&&!l(o)&&(r=o)}catch{}}),!0),n.addEventListener(t,"touchmove",(e=>{e.target instanceof HTMLElement&&!l(e.target)&&e.preventDefault()}),{passive:!1}),n.add((()=>{window.scrollTo(0,window.pageYOffset+e),r&&r.isConnected&&(r.scrollIntoView({block:"nearest"}),r=null)}))}}}function pt(e){let t={};for(let n of e)Object.assign(t,n(t));return t}s({name:"Description",props:{as:{type:[Object,String],default:"p"},id:{type:String,default:()=>`headlessui-description-${fe()}`}},setup(e,{attrs:t,slots:n}){let a=function(){let e=v(st,null);if(null===e)throw new Error("Missing parent");return e}();return d((()=>c(a.register(e.id)))),()=>{let{name:l="Description",slot:o=r({}),props:i={}}=a,{id:s,...u}=e,d={...Object.entries(i).reduce(((e,[t,n])=>Object.assign(e,{[t]:b(n)})),{}),id:s};return le({ourProps:d,theirProps:u,slot:o.value,attrs:t,slots:n,name:l})}}});let ft=function(e,t){let n=e(),a=new Set;return{getSnapshot:()=>n,subscribe:e=>(a.add(e),()=>a.delete(e)),dispatch(e,...l){let r=t[e].call(n,...l);r&&(n=r,a.forEach((e=>e())))}}}((()=>new Map),{PUSH(e,t){var n;let a=null!=(n=this.get(e))?n:{doc:e,count:0,d:ut(),meta:new Set};return a.count++,a.meta.add(t),this.set(e,a),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let a={doc:e,d:t,meta:pt(n)},l=[ct(),dt(),{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];l.forEach((({before:e})=>null==e?void 0:e(a))),l.forEach((({after:e})=>null==e?void 0:e(a)))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function gt(e,t,n){let a=function(e){let t=w(e.getSnapshot());return c(e.subscribe((()=>{t.value=e.getSnapshot()}))),t}(ft),l=o((()=>{let t=e.value?a.value.get(e.value):void 0;return!!t&&t.count>0}));return g([e,t],(([e,t],[a],l)=>{if(!e||!t)return;ft.dispatch("PUSH",e,n);let r=!1;l((()=>{r||(ft.dispatch("POP",null!=a?a:e,n),r=!0)}))}),{immediate:!0}),l}ft.subscribe((()=>{let e=ft.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),a=0!==n.count;(a&&!e||!a&&e)&&ft.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&ft.dispatch("TEARDOWN",n)}}));var ht,vt=((ht=vt||{})[ht.Open=0]="Open",ht[ht.Closed=1]="Closed",ht);let mt=Symbol("DialogContext");function yt(e){let t=v(mt,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,yt),t}return t}let bt="DC8F892D-2EBD-447C-A4C8-A03058436FF4",wt=s({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:bt},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${fe()}`}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:a,expose:l}){var i;let s=r(!1);d((()=>{s.value=!0}));let c=r(0),f=ge(),g=o((()=>e.open===bt&&null!==f?(f.value&he.Open)===he.Open:e.open)),m=r(null),y=r(null),b=o((()=>oe(m)));if(l({el:m,$el:m}),e.open===bt&&null===f)throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if("boolean"!=typeof g.value)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${g.value===bt?void 0:e.open}`);let w=o((()=>s.value&&g.value?0:1)),S=o((()=>0===w.value)),k=o((()=>c.value>1)),C=null!==v(mt,null),E=o((()=>k.value?"parent":"leaf")),T=o((()=>null!==f&&(f.value&he.Closing)===he.Closing)),L=o((()=>!C&&!T.value&&S.value)),A=o((()=>{var e,t,n;return null!=(n=Array.from(null!=(t=null==(e=b.value)?void 0:e.querySelectorAll("body > *"))?t:[]).find((e=>"headlessui-portal-root"!==e.id&&(e.contains(se(y))&&e instanceof HTMLElement))))?n:null}));Ze(A,L);let O=o((()=>!!k.value||S.value)),P=o((()=>{var e,t,n;return null!=(n=Array.from(null!=(t=null==(e=b.value)?void 0:e.querySelectorAll("[data-headlessui-portal]"))?t:[]).find((e=>e.contains(se(y))&&e instanceof HTMLElement)))?n:null}));Ze(P,O),it({type:"Dialog",enabled:o((()=>0===w.value)),element:m,onUpdate:(e,t)=>{if("Dialog"===t)return ue(e,{[ot.Add]:()=>c.value+=1,[ot.Remove]:()=>c.value-=1})}});let F=function({slot:e=r({}),name:t="Description",props:n={}}={}){let a=r([]);return h(st,{register:function(e){return a.value.push(e),()=>{let t=a.value.indexOf(e);-1!==t&&a.value.splice(t,1)}},slot:e,name:t,props:n}),o((()=>a.value.length>0?a.value.join(" "):void 0))}({name:"DialogDescription",slot:o((()=>({open:g.value})))}),M=r(null),B={titleId:M,panelRef:r(null),dialogState:w,setTitleId(e){M.value!==e&&(M.value=e)},close(){t("close",!1)}};function D(){var e,t,n;return[...Array.from(null!=(t=null==(e=b.value)?void 0:e.querySelectorAll("html > *, body > *, [data-headlessui-portal]"))?t:[]).filter((e=>!(e===document.body||e===document.head||!(e instanceof HTMLElement)||e.contains(se(y))||B.panelRef.value&&e.contains(B.panelRef.value)))),null!=(n=B.panelRef.value)?n:m.value]}h(mt,B);let z=o((()=>!(!S.value||k.value)));ve((()=>D()),((e,t)=>{B.close(),x((()=>null==t?void 0:t.focus()))}),z);let R=o((()=>!(k.value||0!==w.value)));He(null==(i=b.value)?void 0:i.defaultView,"keydown",(e=>{R.value&&(e.defaultPrevented||e.key===ye.Escape&&(e.preventDefault(),e.stopPropagation(),B.close()))}));let j=o((()=>!(T.value||0!==w.value||C)));return gt(b,j,(e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],D]}})),u((e=>{if(0!==w.value)return;let t=se(m);if(!t)return;let n=new ResizeObserver((e=>{for(let t of e){let e=t.target.getBoundingClientRect();0===e.x&&0===e.y&&0===e.width&&0===e.height&&B.close()}}));n.observe(t),e((()=>n.disconnect()))})),()=>{let{id:t,open:l,initialFocus:r,...o}=e,i={...n,ref:m,id:t,role:"dialog","aria-modal":0===w.value||void 0,"aria-labelledby":M.value,"aria-describedby":F.value},s={open:0===w.value};return p(tt,{force:!0},(()=>[p(nt,(()=>p(lt,{target:m.value},(()=>p(tt,{force:!1},(()=>p(Ge,{initialFocus:r,containers:D,features:S.value?ue(E.value,{parent:Ge.features.RestoreFocus,leaf:Ge.features.All&~Ge.features.FocusLock}):Ge.features.None},(()=>le({ourProps:i,theirProps:o,slot:s,attrs:n,slots:a,visible:0===w.value,features:me.RenderStrategy|me.Static,name:"Dialog"}))))))))),p(Ie,{features:_e.Hidden,ref:y})]))}}});s({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-overlay-${fe()}`}},setup(e,{attrs:t,slots:n}){let a=yt("DialogOverlay");function l(e){e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),a.close())}return()=>{let{id:r,...o}=e;return le({ourProps:{id:r,"aria-hidden":!0,onClick:l},theirProps:o,slot:{open:0===a.dialogState.value},attrs:t,slots:n,name:"DialogOverlay"})}}}),s({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-backdrop-${fe()}`}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:a}){let l=yt("DialogBackdrop"),o=r(null);return a({el:o,$el:o}),d((()=>{if(null===l.panelRef.value)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")})),()=>{let{id:a,...r}=e,i={id:a,ref:o,"aria-hidden":!0};return p(tt,{force:!0},(()=>p(nt,(()=>le({ourProps:i,theirProps:{...t,...r},slot:{open:0===l.dialogState.value},attrs:t,slots:n,name:"DialogBackdrop"})))))}}});let xt=s({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${fe()}`}},setup(e,{attrs:t,slots:n,expose:a}){let l=yt("DialogPanel");function r(e){e.stopPropagation()}return a({el:l.panelRef,$el:l.panelRef}),()=>{let{id:a,...o}=e,i={id:a,ref:l.panelRef,onClick:r};return le({ourProps:i,theirProps:o,slot:{open:0===l.dialogState.value},attrs:t,slots:n,name:"DialogPanel"})}}}),St=s({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:()=>`headlessui-dialog-title-${fe()}`}},setup(e,{attrs:t,slots:n}){let a=yt("DialogTitle");return d((()=>{a.setTitleId(e.id),c((()=>a.setTitleId(null)))})),()=>{let{id:l,...r}=e;return le({ourProps:{id:l},theirProps:r,slot:{open:0===a.dialogState.value},attrs:t,slots:n,name:"DialogTitle"})}}});function kt(e,...t){e&&t.length>0&&e.classList.add(...t)}function Ct(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Et,Tt=((Et=Tt||{}).Finished="finished",Et.Cancelled="cancelled",Et);function Lt(e,t,n,a,l,r){let o=ut(),i=void 0!==r?function(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}(r):()=>{};return Ct(e,...l),kt(e,...t,...n),o.nextFrame((()=>{Ct(e,...n),kt(e,...a),o.add(function(e,t){let n=ut();if(!e)return n.dispose;let{transitionDuration:a,transitionDelay:l}=getComputedStyle(e),[r,o]=[a,l].map((e=>{let[t=0]=e.split(",").filter(Boolean).map((e=>e.includes("ms")?parseFloat(e):1e3*parseFloat(e))).sort(((e,t)=>t-e));return t}));return 0!==r?n.setTimeout((()=>t("finished")),r+o):t("finished"),n.add((()=>t("cancelled"))),n.dispose}(e,(n=>(Ct(e,...a,...t),kt(e,...l),i(n)))))})),o.add((()=>Ct(e,...t,...n,...a,...l))),o.add((()=>i("cancelled"))),o.dispose}function At(e=""){return e.split(" ").filter((e=>e.trim().length>1))}let Ot=Symbol("TransitionContext");var Pt,Ft=((Pt=Ft||{}).Visible="visible",Pt.Hidden="hidden",Pt);let Mt=Symbol("NestingContext");function Bt(e){return"children"in e?Bt(e.children):e.value.filter((({state:e})=>"visible"===e)).length>0}function Dt(e){let t=r([]),n=r(!1);function a(a,l=we.Hidden){let r=t.value.findIndex((({id:e})=>e===a));-1!==r&&(ue(l,{[we.Unmount](){t.value.splice(r,1)},[we.Hidden](){t.value[r].state="hidden"}}),!Bt(t)&&n.value&&(null==e||e()))}return d((()=>n.value=!0)),c((()=>n.value=!1)),{children:t,register:function(e){let n=t.value.find((({id:t})=>t===e));return n?"visible"!==n.state&&(n.state="visible"):t.value.push({id:e,state:"visible"}),()=>a(e,we.Unmount)},unregister:a}}let zt=me.RenderStrategy,Rt=s({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:a,expose:l}){let i=r(0);function s(){i.value|=he.Opening,t("beforeEnter")}function f(){i.value&=~he.Opening,t("afterEnter")}function m(){i.value|=he.Closing,t("beforeLeave")}function y(){i.value&=~he.Closing,t("afterLeave")}if(null===v(Ot,null)&&be())return()=>p(_t,{...e,onBeforeEnter:s,onAfterEnter:f,onBeforeLeave:m,onAfterLeave:y},a);let b=r(null),w=o((()=>e.unmount?we.Unmount:we.Hidden));l({el:b,$el:b});let{show:x,appear:k}=function(){let e=v(Ot,null);if(null===e)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}(),{register:C,unregister:E}=function(){let e=v(Mt,null);if(null===e)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}(),T=r(x.value?"visible":"hidden"),L={value:!0},A=fe(),O={value:!1},P=Dt((()=>{!O.value&&"hidden"!==T.value&&(T.value="hidden",E(A),y())}));d((()=>{let e=C(A);c(e)})),u((()=>{if(w.value===we.Hidden&&A){if(x.value&&"visible"!==T.value)return void(T.value="visible");ue(T.value,{hidden:()=>E(A),visible:()=>C(A)})}}));let F=At(e.enter),M=At(e.enterFrom),B=At(e.enterTo),D=At(e.entered),z=At(e.leave),R=At(e.leaveFrom),j=At(e.leaveTo);return d((()=>{u((()=>{if("visible"===T.value){let e=se(b);if(e instanceof Comment&&""===e.data)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}}))})),d((()=>{g([x],((e,t,n)=>{(function(e){let t=L.value&&!k.value,n=se(b);!n||!(n instanceof HTMLElement)||t||(O.value=!0,x.value&&s(),x.value||m(),e(x.value?Lt(n,F,M,B,D,(e=>{O.value=!1,e===Tt.Finished&&f()})):Lt(n,z,R,j,D,(e=>{O.value=!1,e===Tt.Finished&&(Bt(P)||(T.value="hidden",E(A),y()))}))))})(n),L.value=!1}),{immediate:!0})})),h(Mt,P),xe(o((()=>ue(T.value,{visible:he.Open,hidden:he.Closed})|i.value))),()=>{let{appear:t,show:l,enter:r,enterFrom:o,enterTo:i,entered:s,leave:u,leaveFrom:d,leaveTo:c,...p}=e,f={ref:b},g={...p,...k.value&&x.value&&re.isServer?{class:S([n.class,p.class,...F,...M])}:{}};return le({theirProps:g,ourProps:f,slot:{},slots:a,attrs:n,features:zt,visible:"visible"===T.value,name:"TransitionChild"})}}}),jt=Rt,_t=s({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:a}){let l=ge(),i=o((()=>null===e.show&&null!==l?(l.value&he.Open)===he.Open:e.show));u((()=>{if(![!0,!1].includes(i.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')}));let s=r(i.value?"visible":"hidden"),c=Dt((()=>{s.value="hidden"})),f=r(!0),g={show:i,appear:o((()=>e.appear||!f.value))};return d((()=>{u((()=>{f.value=!1,i.value?s.value="visible":Bt(c)||(s.value="hidden")}))})),h(Mt,c),h(Ot,g),()=>{let l=Se(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),r={unmount:e.unmount};return le({ourProps:{...r,as:"template"},theirProps:{},slot:{},slots:{...a,default:()=>[p(jt,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...r,...l},a.default)]},attrs:{},features:zt,visible:"visible"===s.value,name:"Transition"})}}});var It;function Nt(e){return"function"==typeof e?e():b(e)}function $t(e,t=!1,n="Timeout"){return new Promise(((a,l)=>{t?setTimeout((()=>l(n)),e):setTimeout(a,e)}))}function Vt(e,t=!1){function n(n,{flush:a="sync",deep:l=!1,timeout:r,throwOnTimeout:o}={}){let i=null;const s=[new Promise((r=>{i=g(e,(e=>{n(e)!==t&&(null==i||i(),r(e))}),{flush:a,deep:l,immediate:!0})}))];return null!=r&&s.push($t(r,o).then((()=>Nt(e))).finally((()=>null==i?void 0:i()))),Promise.race(s)}function a(a,l){if(!k(a))return n((e=>e===a),l);const{flush:r="sync",deep:o=!1,timeout:i,throwOnTimeout:s}=null!=l?l:{};let u=null;const d=[new Promise((n=>{u=g([e,a],(([e,a])=>{t!==(e===a)&&(null==u||u(),n(e))}),{flush:r,deep:o,immediate:!0})}))];return null!=i&&d.push($t(i,s).then((()=>Nt(e))).finally((()=>(null==u||u(),Nt(e))))),Promise.race(d)}function l(e){return r(1,e)}function r(e=1,t){let a=-1;return n((()=>(a+=1,a>=e)),t)}if(Array.isArray(Nt(e))){return{toMatch:n,toContains:function(e,t){return n((t=>{const n=Array.from(t);return n.includes(e)||n.includes(Nt(e))}),t)},changed:l,changedTimes:r,get not(){return Vt(e,!t)}}}return{toMatch:n,toBe:a,toBeTruthy:function(e){return n((e=>Boolean(e)),e)},toBeNull:function(e){return a(null,e)},toBeNaN:function(e){return n(Number.isNaN,e)},toBeUndefined:function(e){return a(void 0,e)},changed:l,changedTimes:r,get not(){return Vt(e,!t)}}}function Ht(e){return Vt(e)}"undefined"!=typeof window&&(null==(It=null==window?void 0:window.navigator)?void 0:It.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);var Ut=Object.defineProperty,Kt=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,qt=Object.getOwnPropertySymbols,Gt=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable,Qt=(e,t,n)=>t in e?Ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Jt=ne;function Xt(e,t,n={}){const a=r(),l=r(!1),i=r(!1),s=o((()=>{var e;return(null==(e=a.value)?void 0:e.errors)||[]})),d=o((()=>{var e;return(null==(e=a.value)?void 0:e.fields)||{}})),{validateOption:c={}}=n;u((async()=>{l.value=!1,i.value=!1;const n=new Jt(Nt(t));try{await n.validate(Nt(e),c),i.value=!0,a.value=null}catch(r){a.value=r}finally{l.value=!0}}));const p={pass:i,isFinished:l,errorInfo:a,errors:s,errorFields:d};return((e,t)=>Kt(e,Wt(t)))(((e,t)=>{for(var n in t)Gt.call(t,n)&&Qt(e,n,t[n]);if(qt)for(var n of qt(t))Yt.call(t,n)&&Qt(e,n,t[n]);return e})({},p),{then:(e,t)=>new Promise(((e,t)=>{Ht(l).toBe(!0).then((()=>e(p))).catch((e=>t(e)))})).then(e,t)})}const Zt=l("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),en={class:"fixed inset-0 z-10 overflow-y-auto"},tn={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},nn={class:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block"},an=l("span",{class:"sr-only"},"Close",-1),ln={class:"sm:flex sm:items-start"},rn={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},on={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full space-y-1"},sn=["innerHTML"],un={key:1,class:"text-gray-500 text-sm"},dn={key:0,class:"text-red-500 text-sm text-left"},cn={key:0,class:"sm:ml-14"},pn={class:"space-y-4 sm:space-y-0 sm:space-x-2"},fn=["disabled"],gn=s({__name:"prompt",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},message:{type:String,required:!0},confirmButtonText:{type:String,default:"Confirm"},cancelButtonText:{type:String,default:"Cancel"},checkbox:{type:Boolean,default:!1},checkboxLabel:{type:String,default:"Remember me"},defaultChecked:{type:Boolean,default:!1},inputType:{type:String,default:"text"},inputDefault:{type:String,default:""},inputPlaceholder:{type:String,default:"请输入"},showPassword:{type:Boolean,default:!0},inputValidator:{type:Function,default:()=>!0},inputErrorMessage:{type:String,default:"input error"},onClose:{type:Function,default:()=>{}},dangerouslyUseHTMLString:{type:Boolean,default:!1}},emits:["update:show"],setup(e,{emit:t}){const o=e,i=r({inputModel:o.inputDefault,checkboxModel:o.defaultChecked}),s={inputModel:{type:"string",required:!0,message:o.inputErrorMessage}},{pass:u,errorFields:d}=Xt(i,s),c=e=>{const n={checkbox:i.value.checkboxModel,value:i.value.inputModel,type:e};t("update:show",!1),o.onClose(n)};return(t,r)=>{const s=ae,p=te;return n(),C(b(_t),{as:"template",show:e.show},{default:E((()=>[T(b(wt),{as:"div",class:"relative z-10",onClose:r[6]||(r[6]=e=>c("close"))},{default:E((()=>[T(b(Rt),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:E((()=>[Zt])),_:1}),l("div",en,[l("div",tn,[T(b(Rt),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:E((()=>[T(b(xt),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 w-11/12 max-w-sm sm:w-full sm:max-w-md sm:p-6"},{default:E((()=>[l("div",nn,[l("div",{type:"button",class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:r[0]||(r[0]=e=>c("close"))},[an,T(b(ke),{class:"h-6 w-6","aria-hidden":"true"})])]),l("div",ln,[l("div",rn,[T(b(Pe),{class:"h-6 w-6 text-blue-600","aria-hidden":"true"})]),l("div",on,[T(b(St),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:E((()=>[L(A(e.title),1)])),_:1}),l("div",null,[e.dangerouslyUseHTMLString?(n(),a("p",{key:0,class:"text-gray-500 text-sm",innerHTML:e.message},null,8,sn)):(n(),a("p",un,A(e.message),1))]),T(s,{placeholder:e.inputPlaceholder,modelValue:i.value.inputModel,"onUpdate:modelValue":r[1]||(r[1]=e=>i.value.inputModel=e),type:e.inputType,onKeyup:r[2]||(r[2]=O((e=>c("confirm")),["enter"])),autofocus:!0,"show-password":"password"===e.inputType&&e.showPassword,class:"h-10"},null,8,["placeholder","modelValue","type","show-password"]),b(d)?.inputModel?.length?(n(),a("div",dn,A(b(d).inputModel[0].message),1)):P("",!0)])]),l("div",{class:S([e.checkbox?"sm:justify-between":"sm:justify-end","mt-5 sm:mt-4 sm:flex"])},[e.checkbox?(n(),a("div",cn,[T(p,{modelValue:i.value.checkboxModel,"onUpdate:modelValue":r[3]||(r[3]=e=>i.value.checkboxModel=e)},{default:E((()=>[L(A(e.checkboxLabel),1)])),_:1},8,["modelValue"])])):P("",!0),l("div",pn,[l("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:r[4]||(r[4]=e=>c("cancel"))},A(o.cancelButtonText),1),l("button",{disabled:!b(u),type:"button",class:S([b(u)?"":"cursor-not-allowed opacity-50","inline-flex w-full justify-center rounded-md bg-blue-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-400 sm:ml-3 sm:w-auto"]),onClick:r[5]||(r[5]=e=>c("confirm"))},A(e.confirmButtonText),11,fn)])],2)])),_:1})])),_:1})])])])),_:1})])),_:1},8,["show"])}}}),hn=l("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),vn={class:"fixed inset-0 z-10 overflow-y-auto"},mn={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},yn={class:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block"},bn=l("span",{class:"sr-only"},"Close",-1),wn={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full space-y-3"},xn={class:"flex flex-row items-center space-x-2"},Sn=["innerHTML"],kn={key:1,class:"text-gray-500 text-sm"},Cn={class:"space-y-4 sm:space-y-0 sm:space-x-2"},En=(Boolean,Boolean,(e,t,n={})=>new Promise(((a,l)=>{const r=document.createElement("div"),o=F(gn,{show:!0,message:e,title:t,...n,onClose:e=>{"confirm"===e.type?a(e):l(e),o.unmount(),document.body.removeChild(r)}});document.body.appendChild(r),o.mount(r)})));var Tn,Ln;var An=function(){if(Ln)return Tn;function e(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function t(e,t){for(var n,a="",l=0,r=-1,o=0,i=0;i<=e.length;++i){if(i<e.length)n=e.charCodeAt(i);else{if(47===n)break;n=47}if(47===n){if(r===i-1||1===o);else if(r!==i-1&&2===o){if(a.length<2||2!==l||46!==a.charCodeAt(a.length-1)||46!==a.charCodeAt(a.length-2))if(a.length>2){var s=a.lastIndexOf("/");if(s!==a.length-1){-1===s?(a="",l=0):l=(a=a.slice(0,s)).length-1-a.lastIndexOf("/"),r=i,o=0;continue}}else if(2===a.length||1===a.length){a="",l=0,r=i,o=0;continue}t&&(a.length>0?a+="/..":a="..",l=2)}else a.length>0?a+="/"+e.slice(r+1,i):a=e.slice(r+1,i),l=i-r-1;r=i,o=0}else 46===n&&-1!==o?++o:o=-1}return a}Ln=1;var n={resolve:function(){for(var n,a="",l=!1,r=arguments.length-1;r>=-1&&!l;r--){var o;r>=0?o=arguments[r]:(void 0===n&&(n=process.cwd()),o=n),e(o),0!==o.length&&(a=o+"/"+a,l=47===o.charCodeAt(0))}return a=t(a,!l),l?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(n){if(e(n),0===n.length)return".";var a=47===n.charCodeAt(0),l=47===n.charCodeAt(n.length-1);return 0!==(n=t(n,!a)).length||a||(n="."),n.length>0&&l&&(n+="/"),a?"/"+n:n},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,a=0;a<arguments.length;++a){var l=arguments[a];e(l),l.length>0&&(void 0===t?t=l:t+="/"+l)}return void 0===t?".":n.normalize(t)},relative:function(t,a){if(e(t),e(a),t===a)return"";if((t=n.resolve(t))===(a=n.resolve(a)))return"";for(var l=1;l<t.length&&47===t.charCodeAt(l);++l);for(var r=t.length,o=r-l,i=1;i<a.length&&47===a.charCodeAt(i);++i);for(var s=a.length-i,u=o<s?o:s,d=-1,c=0;c<=u;++c){if(c===u){if(s>u){if(47===a.charCodeAt(i+c))return a.slice(i+c+1);if(0===c)return a.slice(i+c)}else o>u&&(47===t.charCodeAt(l+c)?d=c:0===c&&(d=0));break}var p=t.charCodeAt(l+c);if(p!==a.charCodeAt(i+c))break;47===p&&(d=c)}var f="";for(c=l+d+1;c<=r;++c)c!==r&&47!==t.charCodeAt(c)||(0===f.length?f+="..":f+="/..");return f.length>0?f+a.slice(i+d):(i+=d,47===a.charCodeAt(i)&&++i,a.slice(i))},_makeLong:function(e){return e},dirname:function(t){if(e(t),0===t.length)return".";for(var n=t.charCodeAt(0),a=47===n,l=-1,r=!0,o=t.length-1;o>=1;--o)if(47===(n=t.charCodeAt(o))){if(!r){l=o;break}}else r=!1;return-1===l?a?"/":".":a&&1===l?"//":t.slice(0,l)},basename:function(t,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');e(t);var a,l=0,r=-1,o=!0;if(void 0!==n&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var i=n.length-1,s=-1;for(a=t.length-1;a>=0;--a){var u=t.charCodeAt(a);if(47===u){if(!o){l=a+1;break}}else-1===s&&(o=!1,s=a+1),i>=0&&(u===n.charCodeAt(i)?-1==--i&&(r=a):(i=-1,r=s))}return l===r?r=s:-1===r&&(r=t.length),t.slice(l,r)}for(a=t.length-1;a>=0;--a)if(47===t.charCodeAt(a)){if(!o){l=a+1;break}}else-1===r&&(o=!1,r=a+1);return-1===r?"":t.slice(l,r)},extname:function(t){e(t);for(var n=-1,a=0,l=-1,r=!0,o=0,i=t.length-1;i>=0;--i){var s=t.charCodeAt(i);if(47!==s)-1===l&&(r=!1,l=i+1),46===s?-1===n?n=i:1!==o&&(o=1):-1!==n&&(o=-1);else if(!r){a=i+1;break}}return-1===n||-1===l||0===o||1===o&&n===l-1&&n===a+1?"":t.slice(n,l)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,a=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+a:n+e+a:a}("/",e)},parse:function(t){e(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return n;var a,l=t.charCodeAt(0),r=47===l;r?(n.root="/",a=1):a=0;for(var o=-1,i=0,s=-1,u=!0,d=t.length-1,c=0;d>=a;--d)if(47!==(l=t.charCodeAt(d)))-1===s&&(u=!1,s=d+1),46===l?-1===o?o=d:1!==c&&(c=1):-1!==o&&(c=-1);else if(!u){i=d+1;break}return-1===o||-1===s||0===c||1===c&&o===s-1&&o===i+1?-1!==s&&(n.base=n.name=0===i&&r?t.slice(1,s):t.slice(i,s)):(0===i&&r?(n.name=t.slice(1,o),n.base=t.slice(1,s)):(n.name=t.slice(i,o),n.base=t.slice(i,s)),n.ext=t.slice(o,s)),i>0?n.dir=t.slice(0,i-1):r&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};return n.posix=n,Tn=n}();const On=M(An);var Pn,Fn={};var Mn=function(){if(Pn)return Fn;Pn=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.removeDuplicateSlashes=Fn.transform=void 0;const e=/(?!^)\/{2,}/g;function t(t){return t.replace(e,"/")}return Fn.transform=function(e){return e.map((e=>t(e)))},Fn.removeDuplicateSlashes=t,Fn}();const Bn=t=>e({url:"/api/storage/file/item",method:"post",data:t,config:{responseIntercept:!1,showDefaultMsg:!1}}),Dn=()=>e({url:"/api/site/config/global",method:"get"}),zn=t=>e({url:"/api/short-link/batch/generate",method:"post",data:t});var Rn,jn,_n,In,Nn,$n,Vn,Hn;function Un(){if($n)return Nn;$n=1;var e=function(){if(In)return _n;function e(e,a,l){e instanceof RegExp&&(e=t(e,l)),a instanceof RegExp&&(a=t(a,l));var r=n(e,a,l);return r&&{start:r[0],end:r[1],pre:l.slice(0,r[0]),body:l.slice(r[0]+e.length,r[1]),post:l.slice(r[1]+a.length)}}function t(e,t){var n=t.match(e);return n?n[0]:null}function n(e,t,n){var a,l,r,o,i,s=n.indexOf(e),u=n.indexOf(t,s+1),d=s;if(s>=0&&u>0){if(e===t)return[s,u];for(a=[],r=n.length;d>=0&&!i;)d==s?(a.push(d),s=n.indexOf(e,d+1)):1==a.length?i=[a.pop(),u]:((l=a.pop())<r&&(r=l,o=u),u=n.indexOf(t,d+1)),d=s<u&&s>=0?s:u;a.length&&(i=[r,o])}return i}return In=1,_n=e,e.range=n,_n}();Nn=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return f(function(e){return e.split("\\\\").join(t).split("\\{").join(n).split("\\}").join(a).split("\\,").join(l).split("\\.").join(r)}(e),!0).map(i)};var t="\0SLASH"+Math.random()+"\0",n="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",l="\0COMMA"+Math.random()+"\0",r="\0PERIOD"+Math.random()+"\0";function o(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function i(e){return e.split(t).join("\\").split(n).join("{").split(a).join("}").split(l).join(",").split(r).join(".")}function s(t){if(!t)return[""];var n=[],a=e("{","}",t);if(!a)return t.split(",");var l=a.pre,r=a.body,o=a.post,i=l.split(",");i[i.length-1]+="{"+r+"}";var u=s(o);return o.length&&(i[i.length-1]+=u.shift(),i.push.apply(i,u)),n.push.apply(n,i),n}function u(e){return"{"+e+"}"}function d(e){return/^-?0\d/.test(e)}function c(e,t){return e<=t}function p(e,t){return e>=t}function f(t,n){var l=[],r=e("{","}",t);if(!r)return[t];var i=r.pre,g=r.post.length?f(r.post,!1):[""];if(/\$$/.test(r.pre))for(var h=0;h<g.length;h++){var v=i+"{"+r.body+"}"+g[h];l.push(v)}else{var m,y,b=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),w=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),x=b||w,S=r.body.indexOf(",")>=0;if(!x&&!S)return r.post.match(/,.*\}/)?f(t=r.pre+"{"+r.body+a+r.post):[t];if(x)m=r.body.split(/\.\./);else if(1===(m=s(r.body)).length&&1===(m=f(m[0],!1).map(u)).length)return g.map((function(e){return r.pre+m[0]+e}));if(x){var k=o(m[0]),C=o(m[1]),E=Math.max(m[0].length,m[1].length),T=3==m.length?Math.abs(o(m[2])):1,L=c;C<k&&(T*=-1,L=p);var A=m.some(d);y=[];for(var O=k;L(O,C);O+=T){var P;if(w)"\\"===(P=String.fromCharCode(O))&&(P="");else if(P=String(O),A){var F=E-P.length;if(F>0){var M=new Array(F+1).join("0");P=O<0?"-"+M+P.slice(1):M+P}}y.push(P)}}else{y=[];for(var B=0;B<m.length;B++)y.push.apply(y,f(m[B],!1))}for(B=0;B<y.length;B++)for(h=0;h<g.length;h++){v=i+y[B]+g[h];(!n||x||v)&&l.push(v)}}return l}return Nn}var Kn=function(){if(Hn)return Vn;Hn=1;const e=Vn=(e,t,n={})=>(f(t),!(!n.nocomment&&"#"===t.charAt(0))&&new h(t,n).match(e));Vn=e;const t=function(){if(jn)return Rn;jn=1;const e="object"==typeof process&&process&&"win32"===process.platform;return Rn=e?{sep:"\\"}:{sep:"/"}}();e.sep=t.sep;const n=Symbol("globstar **");e.GLOBSTAR=n;const a=Un(),l={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},r="[^/]",o=r+"*?",i=e=>e.split("").reduce(((e,t)=>(e[t]=!0,e)),{}),s=i("().*{}+?[]^$\\!"),u=i("[.("),d=/\/+/;e.filter=(t,n={})=>(a,l,r)=>e(a,t,n);const c=(e,t={})=>{const n={};return Object.keys(e).forEach((t=>n[t]=e[t])),Object.keys(t).forEach((e=>n[e]=t[e])),n};e.defaults=t=>{if(!t||"object"!=typeof t||!Object.keys(t).length)return e;const n=e,a=(e,a,l)=>n(e,a,c(t,l));return(a.Minimatch=class extends n.Minimatch{constructor(e,n){super(e,c(t,n))}}).defaults=e=>n.defaults(c(t,e)).Minimatch,a.filter=(e,a)=>n.filter(e,c(t,a)),a.defaults=e=>n.defaults(c(t,e)),a.makeRe=(e,a)=>n.makeRe(e,c(t,a)),a.braceExpand=(e,a)=>n.braceExpand(e,c(t,a)),a.match=(e,a,l)=>n.match(e,a,c(t,l)),a},e.braceExpand=(e,t)=>p(e,t);const p=(e,t={})=>(f(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:a(e)),f=e=>{if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")},g=Symbol("subparse");e.makeRe=(e,t)=>new h(e,t||{}).makeRe(),e.match=(e,t,n={})=>{const a=new h(t,n);return e=e.filter((e=>a.match(e))),a.options.nonull&&!e.length&&e.push(t),e};class h{constructor(e,t){f(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||!1===t.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();let n=this.globSet=this.braceExpand();t.debug&&(this.debug=(...e)=>{}),this.debug(this.pattern,n),n=this.globParts=n.map((e=>e.split(d))),this.debug(this.pattern,n),n=n.map(((e,t,n)=>e.map(this.parse,this))),this.debug(this.pattern,n),n=n.filter((e=>-1===e.indexOf(!1))),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;const e=this.pattern;let t=!1,n=0;for(let a=0;a<e.length&&"!"===e.charAt(a);a++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}matchOne(e,t,a){var l=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var r=0,o=0,i=e.length,s=t.length;r<i&&o<s;r++,o++){this.debug("matchOne loop");var u,d=t[o],c=e[r];if(this.debug(t,d,c),!1===d)return!1;if(d===n){this.debug("GLOBSTAR",[t,d,c]);var p=r,f=o+1;if(f===s){for(this.debug("** at the end");r<i;r++)if("."===e[r]||".."===e[r]||!l.dot&&"."===e[r].charAt(0))return!1;return!0}for(;p<i;){var g=e[p];if(this.debug("\nglobstar while",e,p,t,f,g),this.matchOne(e.slice(p),t.slice(f),a))return this.debug("globstar found match!",p,i,g),!0;if("."===g||".."===g||!l.dot&&"."===g.charAt(0)){this.debug("dot detected!",e,p,t,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!(!a||(this.debug("\n>>> no match, partial?",e,p,t,f),p!==i))}if("string"==typeof d?(u=c===d,this.debug("string match",d,c,u)):(u=c.match(d),this.debug("pattern match",d,c,u)),!u)return!1}if(r===i&&o===s)return!0;if(r===i)return a;if(o===s)return r===i-1&&""===e[r];throw new Error("wtf?")}braceExpand(){return p(this.pattern,this.options)}parse(e,t){f(e);const a=this.options;if("**"===e){if(!a.noglobstar)return n;e="*"}if(""===e)return"";let i="",d=!!a.nocase,c=!1;const p=[],h=[];let v,m,y,b,w=!1,x=-1,S=-1;const k="."===e.charAt(0)?"":a.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",C=()=>{if(v){switch(v){case"*":i+=o,d=!0;break;case"?":i+=r,d=!0;break;default:i+="\\"+v}this.debug("clearStateChar %j %j",v,i),v=!1}};for(let n,r=0;r<e.length&&(n=e.charAt(r));r++)if(this.debug("%s\t%s %s %j",e,r,i,n),c){if("/"===n)return!1;s[n]&&(i+="\\"),i+=n,c=!1}else switch(n){case"/":return!1;case"\\":C(),c=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,r,i,n),w){this.debug("  in class"),"!"===n&&r===S+1&&(n="^"),i+=n;continue}this.debug("call clearStateChar %j",v),C(),v=n,a.noext&&C();continue;case"(":if(w){i+="(";continue}if(!v){i+="\\(";continue}p.push({type:v,start:r-1,reStart:i.length,open:l[v].open,close:l[v].close}),i+="!"===v?"(?:(?!(?:":"(?:",this.debug("plType %j %j",v,i),v=!1;continue;case")":if(w||!p.length){i+="\\)";continue}C(),d=!0,y=p.pop(),i+=y.close,"!"===y.type&&h.push(y),y.reEnd=i.length;continue;case"|":if(w||!p.length){i+="\\|";continue}C(),i+="|";continue;case"[":if(C(),w){i+="\\"+n;continue}w=!0,S=r,x=i.length,i+=n;continue;case"]":if(r===S+1||!w){i+="\\"+n;continue}m=e.substring(S+1,r);try{RegExp("["+m+"]")}catch(L){b=this.parse(m,g),i=i.substr(0,x)+"\\["+b[0]+"\\]",d=d||b[1],w=!1;continue}d=!0,w=!1,i+=n;continue;default:C(),!s[n]||"^"===n&&w||(i+="\\"),i+=n}for(w&&(m=e.substr(S+1),b=this.parse(m,g),i=i.substr(0,x)+"\\["+b[0],d=d||b[1]),y=p.pop();y;y=p.pop()){let e;e=i.slice(y.reStart+y.open.length),this.debug("setting tail",i,y),e=e.replace(/((?:\\{2}){0,64})(\\?)\|/g,((e,t,n)=>(n||(n="\\"),t+t+n+"|"))),this.debug("tail=%j\n   %s",e,e,y,i);const t="*"===y.type?o:"?"===y.type?r:"\\"+y.type;d=!0,i=i.slice(0,y.reStart)+t+"\\("+e}C(),c&&(i+="\\\\");const E=u[i.charAt(0)];for(let n=h.length-1;n>-1;n--){const e=h[n],a=i.slice(0,e.reStart),l=i.slice(e.reStart,e.reEnd-8);let r=i.slice(e.reEnd);const o=i.slice(e.reEnd-8,e.reEnd)+r,s=a.split("(").length-1;let u=r;for(let t=0;t<s;t++)u=u.replace(/\)[+*?]?/,"");r=u;i=a+l+r+(""===r&&t!==g?"$":"")+o}if(""!==i&&d&&(i="(?=.)"+i),E&&(i=k+i),t===g)return[i,d];if(!d)return e.replace(/\\(.)/g,"$1");const T=a.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",T),{_glob:e,_src:i})}catch(L){return new RegExp("$.")}}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const t=this.options,a=t.noglobstar?o:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",l=t.nocase?"i":"";let r=e.map((e=>((e=e.map((e=>"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e===n?n:e._src)).reduce(((e,t)=>(e[e.length-1]===n&&t===n||e.push(t),e)),[])).forEach(((t,l)=>{t===n&&e[l-1]!==n&&(0===l?e.length>1?e[l+1]="(?:\\/|"+a+"\\/)?"+e[l+1]:e[l]=a:l===e.length-1?e[l-1]+="(?:\\/|"+a+")?":(e[l-1]+="(?:\\/|\\/"+a+"\\/)"+e[l+1],e[l+1]=n))})),e.filter((e=>e!==n)).join("/")))).join("|");r="^(?:"+r+")$",this.negate&&(r="^(?!"+r+").*$");try{this.regexp=new RegExp(r,l)}catch(i){this.regexp=!1}return this.regexp}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&n)return!0;const a=this.options;"/"!==t.sep&&(e=e.split(t.sep).join("/")),e=e.split(d),this.debug(this.pattern,"split",e);const l=this.set;let r;this.debug(this.pattern,"set",l);for(let t=e.length-1;t>=0&&(r=e[t],!r);t--);for(let t=0;t<l.length;t++){const o=l[t];let i=e;a.matchBase&&1===o.length&&(i=[r]);if(this.matchOne(i,o,n))return!!a.flipNegate||!this.negate}return!a.flipNegate&&this.negate}static defaults(t){return e.defaults(t).Minimatch}}return e.Minimatch=h,Vn}();const Wn=M(Kn);let{storageKey:qn,currentPath:Gn}=B();const Yn=Y("zfile-pwd-cache",{});function Qn(){return{putPathPwd:(e,t)=>{e&&(e=e.startsWith("/")?e:"/"+e,Yn.value[qn.value]||(Yn.value[qn.value]={}),e.endsWith("**")&&!e.endsWith("/**")&&(e=Mn.removeDuplicateSlashes(e.substring(0,e.length-2)+"/**")),Yn.value[qn.value][e]=t)},getPathPwd:e=>{let t=e||Gn.value;t=G.removeDuplicateSeparator("/"+t+"/");for(let n of Object.keys(Yn.value))if(n===qn.value)for(let e of Object.keys(Yn.value[n]))if(Wn(t,e))return Yn.value[n][e];return""}}}const Jn=t=>e({url:"/api/site/reset-password",method:"get",data:t});let Xn=Re(),Zn=ze(),{routerRef:ea,fullpath:ta,storageKey:na}=B(),aa=r([]),la=r(),ra=!1;function oa(){let t=Zn.globalConfig.rootShowStorage;const n=e=>{if(na.value){i(na.value)?la.value=na.value:r()}else e?(Xn.updateFileList(a.value),document.title=Zn.globalConfig.siteName+" | 首页"):r();l()},a=o((()=>{let e=[];return aa.value.forEach((t=>{e.push({name:t.name,path:t.key,size:0,time:"-",type:"ROOT"})})),e})),l=()=>{aa.value.some((e=>{e.key===la.value&&Xn.updateCurrentStorageSource(e)}))};ra||(g((()=>la.value),((e,t)=>{(e&&!ta.value||void 0!==t)&&(ea.value.push("/"+e),l())})),g((()=>na.value),(e=>{n(!0)})),ra=!0);const r=()=>{if(aa.value.length>0){let e=aa.value[0].key;la.value=e,ea.value.push("/"+e)}},i=e=>aa.value.find((t=>{if(t.key==e)return t}));return{loadStorageSourceList:()=>new Promise((a=>{var l;e({url:"/api/storage/list",method:"get",data:l}).then((e=>{aa.value=e.data,0!==aa.value.length?(n(t),a(e)):Le.confirm("当前无可用存储源，是否跳转至管理员页面添加存储源？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",callback:e=>{"confirm"===e&&ea.value.push("/login")}})}))})),storageList:aa,findStorageByKey:i,currentStorageKey:la,storageListAsFileList:a}}var ia;const sa="undefined"!=typeof window,ua=()=>{};sa&&(null==(ia=null==window?void 0:window.navigator)?void 0:ia.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);var da=Object.defineProperty,ca=Object.defineProperties,pa=Object.getOwnPropertyDescriptors,fa=Object.getOwnPropertySymbols,ga=Object.prototype.hasOwnProperty,ha=Object.prototype.propertyIsEnumerable,va=(e,t,n)=>t in e?da(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ma=(e,t)=>{for(var n in t||(t={}))ga.call(t,n)&&va(e,n,t[n]);if(fa)for(var n of fa(t))ha.call(t,n)&&va(e,n,t[n]);return e};const ya=sa?window:void 0;function ba(...e){let t,n,a,l;if("string"==typeof e[0]?([n,a,l]=e,t=ya):[t,n,a,l]=e,!t)return ua;let r=ua;const o=g((()=>function(e){var t;const n=b(e);return null!=(t=null==n?void 0:n.$el)?t:n}(t)),(e=>{r(),e&&(e.addEventListener(n,a,l),r=()=>{e.removeEventListener(n,a,l),r=ua})}),{immediate:!0,flush:"post"}),i=()=>{o(),r()};var s;return s=i,H()&&U(s),i}const wa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xa="__vueuse_ssr_handlers__";wa[xa]=wa[xa]||{};var Sa,ka,Ca=Object.defineProperty,Ea=Object.defineProperties,Ta=Object.getOwnPropertyDescriptors,La=Object.getOwnPropertySymbols,Aa=Object.prototype.hasOwnProperty,Oa=Object.prototype.propertyIsEnumerable,Pa=(e,t,n)=>t in e?Ca(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;(ka=Sa||(Sa={})).UP="UP",ka.RIGHT="RIGHT",ka.DOWN="DOWN",ka.LEFT="LEFT",ka.NONE="NONE";const Fa=["a","s","d","w","q","e","A","S","D","W","Q","E","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Escape"," "];var Ma=s({name:"V3ImgPreview",props:{showToolbar:{type:Boolean,default:!0},showArrowBtn:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},url:{type:String,default:void 0},escClose:{type:Boolean,default:!0},images:{type:Array,default:()=>[]},showCloseBtn:{type:Boolean,default:!0},index:{type:Number,default:0},on_unmount_v3_ima_preview_app:{type:Function}},setup(e,t){let{emit:n}=t;const a=r(null),l=r(null),{style:i}=function(e,t={}){var n,a;const l=null!=(n=t.draggingElement)?n:ya,i=r(null!=(a=t.initialValue)?a:{x:0,y:0}),s=r(),u=e=>!t.pointerTypes||t.pointerTypes.includes(e.pointerType),d=e=>{b(t.preventDefault)&&e.preventDefault(),b(t.stopPropagation)&&e.stopPropagation()};return sa&&(ba(e,"pointerdown",(n=>{var a;if(!u(n))return;if(b(t.exact)&&n.target!==b(e))return;const l=b(e).getBoundingClientRect(),r={x:n.pageX-l.left,y:n.pageY-l.top};!1!==(null==(a=t.onStart)?void 0:a.call(t,r,n))&&(s.value=r,d(n))}),!0),ba(l,"pointermove",(e=>{var n;u(e)&&s.value&&(i.value={x:e.pageX-s.value.x,y:e.pageY-s.value.y},null==(n=t.onMove)||n.call(t,i.value,e),d(e))}),!0),ba(l,"pointerup",(e=>{var n;u(e)&&s.value&&(s.value=void 0,null==(n=t.onEnd)||n.call(t,i.value,e),d(e))}),!0)),c=((e,t)=>{for(var n in t||(t={}))Aa.call(t,n)&&Pa(e,n,t[n]);if(La)for(var n of La(t))Oa.call(t,n)&&Pa(e,n,t[n]);return e})({},function(e){if(!k(e))return D(e);const t=Array.isArray(e.value)?new Array(e.value.length):{};for(const n in e.value)t[n]=N((()=>({get:()=>e.value[n],set(t){if(Array.isArray(e.value)){const a=[...e.value];a[n]=t,e.value=a}else{const l=(a=ma({},e.value),ca(a,pa({[n]:t})));Object.setPrototypeOf(l,e.value),e.value=l}var a}})));return t}(i)),p={position:i,isDragging:o((()=>!!s.value)),style:o((()=>`left:${i.value.x}px;top:${i.value.y}px;`))},Ea(c,Ta(p));var c,p}(l),s=y({visible:!0,imgState:"loading",src:"",imgIndex:e.index}),u=o((()=>{var t;return(null===(t=e.images)||void 0===t?void 0:t.length)>1&&e.showArrowBtn})),c=y({imgScale:1,imgRotate:0}),p=o((()=>{var t;return(null===(t=e.images)||void 0===t?void 0:t.length)>1})),f=function(e,t=200,n={}){return function(e,t){return function(...n){e((()=>t.apply(this,n)),{fn:t,thisArg:this,args:n})}}(function(e,t={}){let n,a;return l=>{const r=b(e),o=b(t.maxWait);if(n&&clearTimeout(n),r<=0||void 0!==o&&o<=0)return a&&(clearTimeout(a),a=null),l();o&&!a&&(a=setTimeout((()=>{n&&clearTimeout(n),a=null,l()}),o)),n=setTimeout((()=>{a&&clearTimeout(a),a=null,l()}),r)}}(t,n),e)}((t=>{if(!e.keyboard)return!1;t.preventDefault();const{key:n}=t;return["s","S","ArrowDown"].includes(n)?v(-.1,!1):["w","W","ArrowUp"].includes(n)?v(.1,!1):" "===n?g():"Escape"===n&&e.escClose?S():["E","e"].includes(n)?h(!0):["Q","q"].includes(n)?h(!1):["a","A","ArrowLeft"].includes(n)?C(!1):["d","D","ArrowRight"].includes(n)?C(!0):void 0}),200);!function(e,t,n={}){const{target:a=ya,eventName:l="keydown",passive:r=!1}=n,o="function"==typeof(i=e)?i:"string"==typeof i?e=>e.key===i:Array.isArray(i)?e=>i.includes(e.key):i?()=>!0:()=>!1;var i;ba(a,l,(e=>{o(e)&&t(e)}),r)}(Fa,f);const g=()=>{c.imgScale=1,c.imgRotate=0,l.value.style.top="0",l.value.style.left="0"};function h(e){c.imgRotate+=90*(e?1:-1)}function v(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.imgScale<=.2&&e<0||(t?c.imgScale=e:c.imgScale+=e)}function m(e){e.preventDefault(),v(e.deltaY<0?.05:-.05)}function w(e){s.imgState="loading",(e=>{const t=new Image;return t.src=e,new Promise(((n,a)=>{t.onload=()=>{n(e)},t.onerror=()=>{a(e)}}))})(e).then((()=>{s.imgState="success",s.src=e,g()})).catch((()=>{s.imgState="error"}))}function S(){var t;s.visible=!1,n("close"),null===(t=e.on_unmount_v3_ima_preview_app)||void 0===t||t.call(e)}function C(t){p.value&&(t?(s.imgIndex++,s.imgIndex>e.images.length-1&&(s.imgIndex=0)):(s.imgIndex--,s.imgIndex<0&&(s.imgIndex=e.images.length-1)),w(e.images[s.imgIndex]))}return d((()=>{window.__V3__IMG__PREVIEW__LOAD__ICON__SVG__||function(e){e.__V3__IMG__PREVIEW__LOAD__ICON__SVG__=!0;var t,n,a,l,r,o='<svg><symbol id="v3-img-close" viewBox="0 0 1045 1024"><path d="M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z"  ></path></symbol><symbol id="v3-img-img-error" viewBox="0 0 1024 1024"><path d="M704 328a72 72 0 1 0 144 0 72 72 0 1 0-144 0z"  ></path><path d="M999.904 116.608a32 32 0 0 0-21.952-10.912L521.76 73.792a31.552 31.552 0 0 0-27.2 11.904l-92.192 114.848a32 32 0 0 0 0.672 40.896l146.144 169.952-147.456 194.656 36.48-173.376a32 32 0 0 0-11.136-31.424L235.616 245.504l79.616-125.696a32 32 0 0 0-29.28-49.024L45.76 87.552a32 32 0 0 0-29.696 34.176l55.808 798.016a32.064 32.064 0 0 0 34.304 29.696l176.512-13.184c17.632-1.312 30.848-16.672 29.504-34.272s-16.576-31.04-34.304-29.536L133.44 883.232l-6.432-92.512 125.312-12.576a32 32 0 0 0 28.672-35.04 32.16 32.16 0 0 0-35.04-28.672L122.56 726.848 82.144 149.184l145.152-10.144-60.96 96.224a32 32 0 0 0 6.848 41.952l198.4 161.344-58.752 279.296a30.912 30.912 0 0 0 0.736 14.752 31.68 31.68 0 0 0 1.408 11.04l51.52 154.56a31.968 31.968 0 0 0 27.456 21.76l523.104 47.552a32.064 32.064 0 0 0 34.848-29.632l55.776-798.048a32.064 32.064 0 0 0-7.776-23.232z m-98.912 630.848l-412.576-39.648a31.52 31.52 0 0 0-34.912 28.768 32 32 0 0 0 28.8 34.912l414.24 39.808-6.272 89.536-469.728-42.72-39.584-118.72 234.816-310.016a31.936 31.936 0 0 0-1.248-40.192L468.896 219.84l65.088-81.056 407.584 28.48-40.576 580.192z"  ></path></symbol><symbol id="v3-img-loading" viewBox="0 0 1024 1024"><path d="M834.7648 736.3584a5.632 5.632 0 1 0 11.264 0 5.632 5.632 0 0 0-11.264 0z m-124.16 128.1024a11.1616 11.1616 0 1 0 22.3744 0 11.1616 11.1616 0 0 0-22.3744 0z m-167.3216 65.8944a16.7936 16.7936 0 1 0 33.6384 0 16.7936 16.7936 0 0 0-33.6384 0zM363.1616 921.6a22.3744 22.3744 0 1 0 44.7488 0 22.3744 22.3744 0 0 0-44.7488 0z m-159.744-82.0224a28.0064 28.0064 0 1 0 55.9616 0 28.0064 28.0064 0 0 0-56.0128 0zM92.672 700.16a33.6384 33.6384 0 1 0 67.2256 0 33.6384 33.6384 0 0 0-67.2256 0zM51.2 528.9984a39.168 39.168 0 1 0 78.336 0 39.168 39.168 0 0 0-78.336 0z m34.1504-170.0864a44.8 44.8 0 1 0 89.6 0 44.8 44.8 0 0 0-89.6 0zM187.904 221.7984a50.432 50.432 0 1 0 100.864 0 50.432 50.432 0 0 0-100.864 0zM338.432 143.36a55.9616 55.9616 0 1 0 111.9232 0 55.9616 55.9616 0 0 0-111.9744 0z m169.0112-4.9152a61.5936 61.5936 0 1 0 123.2384 0 61.5936 61.5936 0 0 0-123.2384 0z m154.7776 69.632a67.1744 67.1744 0 1 0 134.3488 0 67.1744 67.1744 0 0 0-134.3488 0z m110.0288 130.816a72.8064 72.8064 0 1 0 145.5616 0 72.8064 72.8064 0 0 0-145.5616 0z m43.7248 169.472a78.3872 78.3872 0 1 0 156.8256 0 78.3872 78.3872 0 0 0-156.8256 0z" fill="" ></path></symbol><symbol id="v3-img-right" viewBox="0 0 1024 1024"><path d="M884.808356 96.170317c0-17.780969-16.723893-32.209586-37.309744-32.209586-20.586874 0-37.310767 14.428617-37.310767 32.209586V927.20035c0 17.780969 16.723893 32.209586 37.310767 32.209586 20.585851 0 37.309744-14.428617 37.309744-32.209586V96.170317zM263.249101 159.859871c-27.619034-21.278629-50.027393-11.659551-50.027393 22.116717v659.490146c0 33.44881 22.481014 43.322691 50.027393 22.116716l407.352615-313.385476c27.65485-21.242813 27.618011-55.784514 0-76.989465L263.249101 159.859871z m449.327612 260.298398c60.265572 48.751331 60.301388 134.302799 0 183.090968L297.061185 939.297876c-70.976518 57.422827-158.459988-25.322735-158.459989-116.158556V200.267163c0-91.12644 87.445608-173.6172 158.459989-116.158557l415.515528 336.049663zM297.061185 84.10963"  ></path></symbol><symbol id="v3-img-left" viewBox="0 0 1024 1024"><path d="M138.60222 96.170317V927.20035c0 17.780969 16.723893 32.209586 37.309744 32.209586 20.586874 0 37.310767-14.428617 37.310767-32.209586V96.170317c0-17.780969-16.723893-32.209586-37.310767-32.209586-20.585851 0-37.309744 14.428617-37.309744 32.209586z m621.560278 63.689554L352.80886 473.208509c-27.618011 21.205974-27.65485 55.747675 0 76.989465l407.353638 313.385476c27.54638 21.205974 50.027393 11.33107 50.027393-22.116716v-659.490146c-0.001023-33.776268-22.408359-43.395346-50.027393-22.116717z m-33.812084-75.750241c71.013357-57.459666 158.458965 25.032116 158.458965 116.157533v622.872157c0 90.835821-87.482447 173.581384-158.459988 116.158556L310.834886 603.249237c-60.301388-48.78817-60.265572-134.339638 0-183.090968L726.350414 84.10963z m0 0"  ></path></symbol><symbol id="v3-img-zoom-out" viewBox="0 0 1024 1024"><path d="M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z"  ></path><path d="M625.792 448H336a32 32 0 0 0 0 64h289.792a32 32 0 1 0 0-64z"  ></path></symbol><symbol id="v3-img-zoom-big" viewBox="0 0 1024 1024"><path d="M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z"  ></path><path d="M625.792 448H512v-112a32 32 0 0 0-64 0V448h-112a32 32 0 0 0 0 64H448v112a32 32 0 1 0 64 0V512h113.792a32 32 0 1 0 0-64z"  ></path></symbol><symbol id="v3-img-rotate-left" viewBox="0 0 1024 1024"><path d="M884.565333 431.914667c-3.114667 36.266667-22.784 55.893333-59.008 59.008-35.2-3.114667-54.357333-22.741333-57.472-59.008 3.114667-35.157333 22.272-54.314667 57.472-57.429334 36.224 3.114667 55.893333 22.272 59.008 57.429334z m-97.834666 0c3.114667 24.874667 16.042667 38.826667 38.826666 41.941333 22.741333-2.048 35.712-16.042667 38.826667-41.941333-3.114667-24.832-16.085333-38.272-38.826667-40.362667-22.784 3.114667-35.712 16.597333-38.826666 40.362667z m-59.008 82.346666c-1.024 103.466667-34.688 156.245333-100.906667 158.293334-69.376-1.024-104.021333-53.76-104.021333-158.293334 0.981333-104.576 35.157333-158.421333 102.442666-161.536 67.285333 2.133333 101.461333 55.893333 102.485334 161.493334z m-169.216 0c0 89.002667 22.229333 132.992 66.730666 131.925334 44.501333 1.066667 66.773333-42.922667 66.773334-131.968 0-90.026667-22.784-134.528-68.309334-133.546667-42.453333 3.114667-64.213333 47.658667-65.194666 133.546667z m-184.746667 49.664c-58.026667-5.205333-89.6-39.338667-94.72-102.485333 4.096-67.285333 37.76-103.509333 100.906667-108.714667 72.448-0.981333 108.16 50.218667 107.093333 153.728 0 109.738667-37.76 165.12-113.322667 166.144-45.568-2.090667-74.538667-24.32-86.954666-66.773333l32.597333-10.88c7.253333 36.266667 26.453333 53.845333 57.472 52.821333 48.64-2.090667 73.472-45.056 74.538667-128.853333-15.530667 29.994667-41.429333 45.013333-77.653334 45.013333z m3.072-181.674666c-39.338667 3.114667-60.586667 28.458667-63.658667 76.074666 2.048 47.616 23.296 72.96 63.658667 76.074667 40.362667 0 65.194667-18.645333 74.538667-55.893333 0-65.194667-24.874667-97.28-74.538667-96.256z m135.594667 641.578666C230.186667 1023.829333 0.597333 794.24 0.597333 512v-0.981333h53.973334v0.981333c0 252.501333 205.354667 457.898667 457.813333 457.898667 252.501333 0 457.898667-205.397333 457.898667-457.898667 0-252.458667-205.397333-457.813333-457.856-457.813333A457.088 457.088 0 0 0 159.530667 220.586667l120.533333-0.938667h8.106667l-47.061334 47.786667-167.936 1.365333-1.109333-167.936 47.189333-47.872v131.626667A510.933333 510.933333 0 0 1 512.426667 0.128C794.624 0.128 1024.256 229.76 1024.256 512c0 282.282667-229.632 511.872-511.829333 511.872z"  ></path></symbol><symbol id="v3-img-antetype" viewBox="0 0 1024 1024"><path d="M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zM512 622c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zM512 482c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"  ></path><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"  ></path><path d="M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"  ></path></symbol><symbol id="v3-img-rotate-right" viewBox="0 0 1024 1024"><path d="M375.381 562.517c-57.898-5.162-89.472-39.296-94.634-102.4 4.138-67.2 37.76-103.381 100.864-108.586 72.362-1.024 108.032 50.176 107.008 153.6 0 109.61-37.76 164.906-113.238 165.973-45.525-2.133-74.453-24.32-86.869-66.73l32.597-10.838c7.211 36.181 26.368 53.76 57.387 52.736 48.597-2.048 73.387-44.97 74.453-128.768-15.488 29.995-41.386 45.013-77.568 45.013z m3.115-181.504c-39.296 3.072-60.501 28.459-63.573 75.99 2.048 47.573 23.253 72.96 63.573 76.032 40.32 0 65.152-18.603 74.453-55.851 0-65.152-24.832-97.195-74.453-96.17z m145.835 131.84c0.981-104.448 35.114-158.208 102.4-161.322 67.157 2.09 101.29 55.85 102.357 161.322-1.067 103.424-34.688 156.16-100.821 158.251-69.334-1.067-103.936-53.76-103.936-158.25z m169.088 0c0-89.984-22.784-134.4-68.267-133.418-42.41 3.114-64.128 47.616-65.152 133.418 0 88.96 22.187 132.907 66.688 131.84 44.459 1.067 66.73-42.88 66.73-131.84z m75.989-82.218c3.115-35.158 22.23-54.272 57.387-57.387 36.181 3.115 55.893 22.23 58.965 57.387-3.115 36.224-22.784 55.893-58.965 58.965-35.158-3.115-54.272-22.741-57.387-58.965z m96.17 0c-3.071-24.832-16.042-38.23-38.783-40.32-22.742 3.114-35.67 16.554-38.784 40.32 3.114 24.832 16.042 38.826 38.826 41.898 22.699-2.048 35.67-16.042 38.742-41.898z m-354.175 592.64c-281.984 0-511.36-229.376-511.36-511.403C0 229.973 229.419 0.512 511.403 0.512c157.696 0 298.922 71.765 392.789 184.32V54.613l47.147 47.872-1.11 167.766-167.765-1.366-47.061-47.744h8.106l121.558 0.982a456.704 456.704 0 0 0-353.664-167.68c-252.246 0-457.43 205.226-457.43 457.429 0 252.288 205.184 457.515 457.43 457.515S968.875 764.16 968.875 511.872v-0.981h53.888v0.981c0 282.027-229.376 511.403-511.36 511.403z"  ></path></symbol></svg>',i=(i=document.getElementsByTagName("script"))[i.length-1].getAttribute("data-injectcss");if(i&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(u){console}}function s(){r||(r=!0,a())}t=function(){var e,t,n,a=document.createElement("div");a.innerHTML=o,o=null,(a=a.getElementsByTagName("svg")[0])&&(a.setAttribute("aria-hidden","true"),a.style.position="absolute",a.style.width=0,a.style.height=0,a.style.overflow="hidden",(e=document.body).firstChild?(t=a,(n=e.firstChild).parentNode.insertBefore(t,n)):e.appendChild(a))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(a=t,l=e.document,r=!1,function e(){try{l.documentElement.doScroll("left")}catch(t){return void setTimeout(e,50)}s()}(),l.onreadystatechange=function(){"complete"==l.readyState&&(l.onreadystatechange=null,s())})}("undefined"!=typeof window?window:global),x((()=>{ba(a.value,"mousewheel",m,!1),g(),x((()=>void 0!==e.url?w(e.url):Array.isArray(e.images)&&e.images.length>0?w(e.images[s.imgIndex]):void 0))}))})),Object.assign(Object.assign(Object.assign({vImagesWrap:a,imgContainer:l},D(s)),D(c)),{handleClose:S,toggleImg:C,initImgSize:g,dragStyle:i,handleScale:v,handleRotate:h,visibleArrowBtn:u,isMultiple:p,handleClickMaskClose:function(e){e.target.classList.contains("img-container")&&S()}})}});const Ba=e=>($("data-v-50804152"),e=e(),V(),e),Da={class:"icon img-loading rotate-animation","aria-hidden":"true"},za=[Ba((()=>l("use",{"xlink:href":"#v3-img-loading"},null,-1)))],Ra=["src"],ja=[Ba((()=>l("use",{"xlink:href":"#v3-img-img-error"},null,-1)))],_a=[Ba((()=>l("use",{"xlink:href":"#v3-img-close"},null,-1)))],Ia=[Ba((()=>l("svg",{class:"icon","aria-hidden":"true"},[l("use",{"xlink:href":"#v3-img-left"})],-1)))],Na=[Ba((()=>l("svg",{class:"icon","aria-hidden":"true"},[l("use",{"xlink:href":"#v3-img-right"})],-1)))],$a={key:3,class:"v3-img-preview-toolbar"},Va=[Ba((()=>l("use",{"xlink:href":"#v3-img-zoom-out"},null,-1)))],Ha=[Ba((()=>l("use",{"xlink:href":"#v3-img-zoom-big"},null,-1)))],Ua=[Ba((()=>l("use",{"xlink:href":"#v3-img-antetype"},null,-1)))],Ka=[Ba((()=>l("use",{"xlink:href":"#v3-img-rotate-left"},null,-1)))],Wa=[Ba((()=>l("use",{"xlink:href":"#v3-img-rotate-right"},null,-1)))];!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===n&&a.firstChild?a.insertBefore(l,a.firstChild):a.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}(".icon[data-v-50804152] {\n  width: 1em;\n  height: 1em;\n  vertical-align: -0.15em;\n  fill: currentColor;\n  overflow: hidden;\n}\n.v-images-wrap[data-v-50804152] {\n  z-index: 200;\n  user-select: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n  background: rgba(0, 0, 0, 0.3);\n  backdrop-filter: blur(3px);\n  color: #fff;\n}\n.v-images-wrap[data-v-50804152] .img-loading[data-v-50804152],\n.v-images-wrap[data-v-50804152] .img-content[data-v-50804152] {\n  font-size: 50px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  transition: all 0.2s;\n  cursor: move;\n}\n.v-images-wrap[data-v-50804152] .img-container[data-v-50804152] {\n  z-index: 201;\n  position: absolute;\n  height: 100vh;\n  width: 100vw;\n  top: 0;\n  left: 0;\n  text-align: center;\n}\n.v-images-wrap[data-v-50804152] .img-container[data-v-50804152] .img-content[data-v-50804152] {\n  max-width: 100%;\n  max-height: 100%;\n}\n.v-images-wrap[data-v-50804152] .img-container[data-v-50804152] .img-error[data-v-50804152] {\n  font-size: 300px;\n  color: #d8d8d8;\n}\n.v-images-wrap[data-v-50804152] .rotate-animation[data-v-50804152] {\n  animation: rotate-50804152 1.5s linear infinite;\n}\n.v-images-wrap[data-v-50804152] .arrow[data-v-50804152] {\n  width: 42px;\n  height: 42px;\n  text-align: center;\n  line-height: 42px;\n  position: absolute;\n  top: 50%;\n  border-radius: 50%;\n  transform: translateY(-50%);\n  -ms-transform: translateY(-50%);\n  font-size: 24px;\n  cursor: pointer;\n  transition: all 0.2s;\n  z-index: 280;\n  background: rgba(0, 0, 0, 0.3);\n}\n.v-images-wrap[data-v-50804152] .arrow[data-v-50804152][data-v-50804152]:hover {\n  opacity: 0.8;\n  transform: translateY(-50%) scale(1.2);\n}\n.v-images-wrap[data-v-50804152] .arrow-left[data-v-50804152] {\n  left: 50px;\n}\n.v-images-wrap[data-v-50804152] .arrow-right[data-v-50804152] {\n  right: 50px;\n}\n.v-images-wrap[data-v-50804152] .close-btn[data-v-50804152] {\n  z-index: 205;\n  position: absolute;\n  right: 50px;\n  top: 50px;\n  width: 36px;\n  height: 36px;\n  font-size: 22px;\n  line-height: 36px;\n  text-align: center;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s;\n  color: #e7e5e5;\n  background: rgba(0, 0, 0, 0.3);\n}\n.v-images-wrap[data-v-50804152] .close-btn[data-v-50804152][data-v-50804152]:hover {\n  opacity: 0.8;\n  transform: scale(1.2);\n}\n.v-images-wrap[data-v-50804152] .v3-img-preview-toolbar[data-v-50804152] {\n  z-index: 205;\n  position: absolute;\n  bottom: 10%;\n  font-size: 26px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  cursor: pointer;\n}\n.v-images-wrap[data-v-50804152] .v3-img-preview-toolbar[data-v-50804152] section[data-v-50804152] {\n  height: 44px;\n  bottom: 10%;\n  padding: 0 22px;\n  display: flex;\n  align-items: center;\n  border-radius: 22px;\n  background: rgba(0, 0, 0, 0.3);\n  color: #c3c3c3;\n}\n.v-images-wrap[data-v-50804152] .v3-img-preview-toolbar[data-v-50804152] section[data-v-50804152] svg[data-v-50804152] {\n  box-sizing: content-box;\n  padding: 0 10px;\n  transition: all 0.2s;\n}\n.v-images-wrap[data-v-50804152] .v3-img-preview-toolbar[data-v-50804152] section[data-v-50804152] svg[data-v-50804152][data-v-50804152]:hover {\n  transform: scale(1.2);\n}\n@keyframes rotate-50804152 {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n"),Ma.render=function(e,t,r,o,i,s){return n(),C(I,{name:"fade"},{default:E((()=>[e.visible?(n(),a("div",{key:0,class:"v-images-wrap",onClick:t[10]||(t[10]=function(){return e.handleClickMaskClose&&e.handleClickMaskClose(...arguments)}),ref:"vImagesWrap"},[z((n(),a("svg",Da,za,512)),[[R,"loading"===e.imgState]]),l("div",{ref:"imgContainer",style:j(e.dragStyle),class:"img-container"},[z(l("img",{class:"img-content",onDragstart:t[0]||(t[0]=_((()=>{}),["prevent"])),src:e.src,style:j(`transform: scale(${e.imgScale}) rotate(${e.imgRotate}deg);`),alt:""},null,44,Ra),[[R,"success"===e.imgState]]),z((n(),a("svg",{class:"icon img-content img-error",onDragstart:t[1]||(t[1]=_((()=>{}),["prevent"])),"aria-hidden":"true",style:j(`transform: scale(${e.imgScale}) rotate(${e.imgRotate}deg);`)},ja,36)),[[R,"error"===e.imgState]])],4),e.showCloseBtn?(n(),a("svg",{key:0,class:"icon close-btn","aria-hidden":"true",onClick:t[2]||(t[2]=_((function(){return e.handleClose&&e.handleClose(...arguments)}),["stop"]))},_a)):P("",!0),e.visibleArrowBtn?(n(),a("div",{key:1,class:"arrow arrow-left",onClick:t[3]||(t[3]=t=>e.toggleImg(!1))},Ia)):P("",!0),e.visibleArrowBtn?(n(),a("div",{key:2,class:"arrow arrow-right",onClick:t[4]||(t[4]=t=>e.toggleImg(!0))},Na)):P("",!0),e.showToolbar?(n(),a("div",$a,[l("section",null,[(n(),a("svg",{class:"icon","aria-hidden":"true",onClick:t[5]||(t[5]=t=>e.handleScale(-.1,!1))},Va)),(n(),a("svg",{class:"icon","aria-hidden":"true",onClick:t[6]||(t[6]=t=>e.handleScale(.1,!1))},Ha)),(n(),a("svg",{class:"icon","aria-hidden":"true",onClick:t[7]||(t[7]=function(){return e.initImgSize&&e.initImgSize(...arguments)})},Ua)),(n(),a("svg",{class:"icon","aria-hidden":"true",onClick:t[8]||(t[8]=t=>e.handleRotate(!1))},Ka)),(n(),a("svg",{class:"icon","aria-hidden":"true",onClick:t[9]||(t[9]=t=>e.handleRotate(!0))},Wa))])])):P("",!0)],512)):P("",!0)])),_:1})},Ma.__scopeId="data-v-50804152";let qa={};const Ga="v3-img-preview-container-id";let Ya={};function Qa(e){if(Ya._instance)return!1;Array.isArray(e)&&(e={images:e}),"string"==typeof e&&(e={url:e}),e=Object.assign(Object.assign({},qa),e);let t=document.getElementById(Ga);return t||(t=document.createElement("div"),t.id=Ga,document.body.appendChild(t)),Ya=F(Ma,Object.assign(Object.assign({},e),{on_unmount_v3_ima_preview_app:()=>Ya.unmount()})),Ya.mount(t),Ya}(()=>{const e=Ma;e.install=(e,t)=>{qa=t,e.config.globalProperties.$v3ImgPreviewFn=Qa}})();let Ja=K(),Xa=Re(),Za=r(!1),el=r(!1),tl=r(!1),nl=r(!1),al=r(!1),ll=r(!1);function rl(){return{openVideo:()=>{Za.value=!0},dialogVideoVisible:Za,openText:()=>{el.value=!0},dialogTextVisible:el,openOffice:()=>{tl.value=!0},dialogOfficeVisible:tl,openImage:e=>{let t=[],n=0;"only"===Ja.zfileConfig.imagePreview.mode?t.push(e.url):Xa.filterFileByType("image").forEach(((a,l)=>{e.name===a.name&&(n=l),t.push(a.url)})),Qa({images:t,index:n})},openAudio:()=>{Xa.updateAudioList(Xa.filterFileByType("audio"))},openPdf:()=>{nl.value=!0},dialogPdfVisible:nl,open3d:()=>{al.value=!0},dialog3dVisible:al,openEpub:()=>{ll.value=!0},dialogEpubVisible:ll}}let{getPathPwd:ol}=Qn();const il=t=>(t.password=ol(t.path),e({url:"/api/file/operator/rename/file",method:"post",data:t})),sl=t=>(t.password=ol(t.path),e({url:"/api/file/operator/rename/folder",method:"post",data:t}));let ul=Re(),dl=ze(),{storageKey:cl,currentPath:pl}=B(),{selectRows:fl,selectRow:gl,selectFolders:hl,selectFiles:vl}=Be(),{getPathPwd:ml}=Qn();const yl=W();function bl(){const{loadFile:n}=ql(),a=e=>{window.open(e)},l=e=>{const t=document.createElement("iframe");t.style.display="none",t.style.height=0,t.src=e,document.body.appendChild(t),setTimeout((()=>{t.remove()}),3e5)};return{batchDownloadFile:e=>{if(!fl.value&&0===fl.value.length)return void t.warning("请至少选择一个文件");let n;const r=(()=>{let e={isChrome:!1,tips:""},t=yl.browser,n=yl.version;return"Chrome"===t?e.isChrome=!0:e.tips=`<br><span class="text-gray-500 text-xs">检测到当前浏览器为 <b>${t}-${n}</b>, 可能不支持此功能，建议使用谷歌浏览器!</span>`,e})();e?.name?n=`是否确认下载文件 <span class="text-blue-500">${e.name}</span> ？`:1===fl.value.length?(n=`是否确认下载文件 <span class="text-blue-500">${fl.value[0].name}</span> ？`,e=fl.value[0]):fl.value.length>1&&(n=`是否确认批量下载 ${fl.value.length} 个文件？`,r.isChrome||(n+=r.tips)),Le.confirm(n,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"info",callback:t=>{"confirm"===t&&(e?.name?a(e.url):fl.value.forEach((e=>{"FILE"===e.type&&l(e.url)})))}})},rename:()=>{let e=gl.value;null!==e?Le.prompt(`将 <b>${e.name}</b> 修改为：`,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",inputValue:e.name,inputValidator:e=>!!e,inputErrorMessage:"模板名称不能为空."}).then((({value:a})=>{let l,r={storageKey:cl.value,path:e.path,name:e.name,newName:a};"FILE"===e.type?l=il:"FOLDER"===e.type&&(l=sl);const o=Ce.service({fullscreen:!0,text:"重命名中...",background:"rgba(255, 255, 255, 0.6)"});l(r).then((()=>{t.success("重命名成功")})).finally((()=>{o.close(),n()}))})):t.warning("请先选中一个文件或文件夹！")},newFolder:()=>{Le.prompt(`在 <b>${pl.value}</b> 下创建文件夹，请输入要创建的文件夹名称`,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",draggable:!0,inputValidator:e=>e?!e.includes("/")||"文件夹名称不能包含 /":"文件夹名称不能为空"}).then((({value:a})=>{let l={storageKey:cl.value,path:pl.value,name:a};var r;(r=l,r.password=ol(r.path),e({url:"/api/file/operator/mkdir",method:"post",data:r})).then((()=>{t.success("创建成功")})).finally((()=>{n()}))}))},moveTo:()=>{t.warning("暂未实现")},copyTo:()=>{t.warning("暂未实现")},batchDelete:()=>{if(!dl.permission.delete)return;if(0===fl.value.length)return void t.warning("请先至少选中一个文件或文件夹！");let a=1===fl.value.length?"是否确认删除 ":"是否确认批量删除 ";hl.value.length>0&&(a+=" "+hl.value.length+" 个文件夹"),hl.value.length>0&&vl.value.length>0&&(a+="，"),vl.value.length>0&&(a+=vl.value.length+" 个文件"),hl.value.length>0&&["s3","tencent","aliyun","qiniu","minio","huawei","upyun"].includes(ul.currentStorageSource.type.key)&&(a+=" (不支持删除非空文件夹)"),a+="?",Le.confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",draggable:!0,callback:a=>{if("confirm"===a){let a={storageKey:cl.value,deleteItems:[]};fl.value.forEach((e=>{a.deleteItems.push({path:e.path,name:e.name,type:e.type,password:ml(e.path)})}));const r=Ce.service({text:"删除中...",background:"rgba(0, 0, 0, .3)"});(l=a,e({url:"/api/file/operator/delete/batch",method:"post",data:l})).then((e=>{t.success(e.msg),n()})).finally((()=>{r.close()}))}var l}})}}}const{encodeAllIgnoreSlashes:wl}=Q();let{routerRef:xl,fullpath:Sl,storageKey:kl,currentPath:Cl}=B(),{getPathPwd:El,putPathPwd:Tl}=Qn();const{storageListAsFileList:Ll}=oa();let Al=Re(),Ol=ze();const Pl=J(Ol.globalConfig.siteName);let Fl=K();const{openAudio:Ml,openImage:Bl,openOffice:Dl,openPdf:zl,openText:Rl,openVideo:jl,open3d:_l,openEpub:Il}=rl(),Nl=r(!1),$l=r(!1);let Vl=y([]);if(0===Vl.length)for(let Or=0;Or<Fl.zfileConfig.skeleton.size;Or++)Vl.push({});let Hl=y({path:"",password:"",orderBy:"",orderDirection:""});const Ul=r(!1);let{selectRows:Kl,clearSelection:Wl}=Be();function ql(){const n=n=>{if(!kl.value)return;Nl.value=!0,Hl.path=Cl.value;let l=n||{};l.storageKey=kl.value,l.path=Cl.value,l.password=l.password||El(),l.orderBy=Hl.orderBy||Ol.globalConfig.defaultSortField,l.orderDirection=Hl.orderDirection||Ol.globalConfig.defaultSortOrder;let r=kl.value;var o;(o=l,e({url:"/api/storage/files",method:"post",data:o,config:{showDefaultMsg:!1}})).then((e=>{let t=e.data.passwordPattern;if(n?.rememberPassword&&Tl(t,l.password),r!==kl.value)return;let o=e.data.files,i=Hl.path;if(""!==i&&"/"!==i){let e=On.basename(On.resolve(Cl.value,"../"));o.unshift({name:e||"/",path:On.resolve(i,"../"),type:"BACK"})}Al.updateFileList(o),Nl.value=!1,$l.value=!0,Kl.value=[],Sl.value?Pl.value=Ol.globalConfig.siteName+" | "+Sl.value[Sl.value.length-1]:Pl.value=Ol.globalConfig.siteName+" | 首页",a(l)})).catch((e=>{let n=e.response.data;n.code===G.responseCode.INVALID_PASSWORD?(t.warning("密码错误，请重新输入！"),i()):n.code===G.responseCode.REQUIRED_PASSWORD?i():t.error(n.msg)}))},a=t=>{let n={storageKey:kl.value,path:Cl.value,password:t.password};var a;(a=n,e({url:"/api/site/config/storage",method:"post",data:a})).then((e=>{Ol.updateFolderConfig(e.data),kl.value!==Al.oldStorageKey&&Al.updateOldStorageKey(kl.value)})).finally((()=>{Ul.value=!0}))};let l=o((()=>{let e=Fl.zfileConfig.skeleton.enable,t=Fl.zfileConfig.skeleton.show;return!!e&&(("always"===t||!$l.value)&&Nl.value)})),r=o((()=>!l.value&&Nl.value)),i=()=>{En("此文件夹已加密，请输入密码：","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password",checkbox:!0,defaultChecked:Ol.globalConfig.defaultSavePwd,inputDefault:El(),checkboxLabel:"记住密码",inputValidator:e=>!!e,inputErrorMessage:"密码不能为空."}).then((({value:e,checkbox:t})=>{n({password:e,rememberPassword:t})})).catch((()=>{if("/"!==Hl.path&&""!==Hl.path||!0!==Ol.globalConfig.rootShowStorage){let e=On.resolve(Hl.path,"../");xl.value.push("/"+kl.value+e)}else Al.updateFileList(Ll.value),xl.value.push("/"),Pl.value=Ol.globalConfig.siteName+" | 首页",Nl.value=!1}))};return{loadFile:n,openRow:e=>{if(e.name)if(Al.updateCurrentClickRow(e),"FILE"===e.type){const{batchDownloadFile:t}=bl();switch(e.fileType){case"video":jl();break;case"image":Bl(e);break;case"text":Rl();break;case"audio":Ml(e);break;case"office":Dl(e);break;case"pdf":zl(e);break;case"three3d":_l(e);break;case"epub":Il(e);break;default:t(e)}Wl()}else if("ROOT"===e.type)xl.value.push(e.path);else if("BACK"===e.type){let t=Mn.removeDuplicateSlashes("/"+kl.value+"/"+e.path);t=wl(t),xl.value.push(t)}else{let t=Mn.removeDuplicateSlashes("/"+kl.value+"/"+e.path+"/"+e.name);t=wl(t),xl.value.push(t)}},searchParam:Hl,sortChangeMethod:({prop:e,order:t})=>{Hl.orderBy=e,Hl.orderDirection="descending"===t?"desc":"asc",n()},skeletonLoading:l,skeletonData:Vl,basicLoading:r,loading:Nl,initStorageConfig:Ul,loadFileConfig:a}}K();let Gl=ze(),Yl=Re();const Ql=X("Meta"),Jl=X("Control"),Xl=X("Shift");let Zl=o((()=>Ql.value||Jl.value)),{batchDelete:er}=bl();const{skeletonLoading:tr,openRow:nr}=ql(),{selectRows:ar,selectRow:lr,clearSelection:rr,toggleRowSelection:or,toggleAllSelection:ir}=Be();window.addEventListener("keydown",(function(e){"Escape"===e.key&&sr()?rr():"a"===e.key&&(e.metaKey||e.ctrlKey)&&sr()?(e.preventDefault(),ir()):"Delete"===e.key&&sr()?er&&ar?.value?.length>0&&(e.preventDefault(),er()):"Backspace"===e.key&&sr()&&Yl.fileList.length>0&&"BACK"===Yl.fileList[0].type&&gr(Yl.fileList[0])}),!1);const sr=()=>ur()&&!1===dr(),ur=()=>document.querySelector(".zfile-index-body:hover"),dr=()=>!!document.querySelector(".el-popup-parent--hidden"),cr=r(-1),pr=r(-1),{pressed:fr}=Z();let gr;function hr(){gr=(e,t)=>{if(void 0===t)return void nr(e);let n="selection"===t.type;if(!n&&"click"===Gl.globalConfig.fileClickMode)return void nr(e);if(tr.value)return;let a=1===ar.value.length&&lr.value?.name===e.name;if(Xl.value){let t=Yl.fileList.findIndex((e=>e.name===lr.value.name));if(null!==t){let n=Yl.fileList.findIndex((t=>t.name===e.name)),a=Math.min(n,t),l=Math.max(n,t);for(let e=a+1;e<l;e++){let t=Yl.fileList[e];or(t,!0)}}}else Zl.value||a||n||rr();or(e)};return{tableClickRow:gr,tableDbClickRow:e=>{tr.value||nr(e)},tableHoverRow:(e,t,n,a)=>{if(1===a.buttons&&-1!==cr.value){if(-1===pr.value){rr();let e=Yl.fileList[cr.value];or(e,!0)}let t=e.index,n=pr.value>=0?pr.value:t-1,a=Math.min(n,t),l=Math.max(n,t);for(let e=a;e<=l;e++){let t=Yl.fileList[e];or(t,!0)}pr.value=t}},tableLeaveRow:(e,t,n,a)=>{1===a.buttons&&-1===cr.value&&(cr.value=e.index)}}}g((()=>fr.value),((e,t)=>{!1===e&&!0===t&&(cr.value=-1,pr.value=-1)}));let vr=Re(),mr=ze(),yr=r(!1),br=!1;const wr=r(!1),xr=r(""),Sr=y([]),kr=y([]),Cr=new Map,Er=new Map;let Tr=0;const Lr={error:1,uploading:2,waiting:3,finished:4};function Ar(){let{storageKey:n,currentPath:a}=B();const l=mr.globalConfig.maxFileUploads,r=e=>{i(e.file,e.uploadBasePath)},i=(t,r)=>{const o=Tr++;let i=r=r||a.value;if(t.webkitRelativePath||t.dropUploadPath){let e=t.webkitRelativePath||t.dropUploadPath;e.startsWith("/")||(e="/"+e);let n=e.split("/");n.forEach(((e,t)=>{let a=0===t,l=n.length-1===t;a||l||e&&(i+="/"+e)}))}let f={storageKey:n.value,path:G.removeDuplicateSeparator(i),name:t.name,size:t.size};if(v.value.totalUploading>=l)return void kr.push({index:o,file:t,uploadBasePath:r});let g={name:t.name,size:t.size,speed:"-",progress:0,loaded:0,status:"uploading",startTime:Date.now(),file:t,index:o};var h;Sr.push(g),Cr.set(o,q.CancelToken.source()),Er.set(o,Sr[Sr.length-1]),(h=f,h.password=ol(h.path),e({url:"/api/file/operator/upload/file",method:"post",data:h})).then((e=>{const{on:n}=ee(`cancel-upload-${o}`);n((()=>{let e=Cr.get(o);e&&(e.cancel(),Sr.find(((e,n)=>{let a=e.name===t.name;return a&&Sr.splice(n,1),a})))}));let a=G.storageType.proxyType,l=G.storageType.s3Type,r=G.storageType.micrsoftType;a.includes(vr.currentStorageSource.type.key)?s(t,e.data,o):l.includes(vr.currentStorageSource.type.key)?u(t,e.data,o):r.includes(vr.currentStorageSource.type.key)?d(t,e.data,o):"upyun"===vr.currentStorageSource.type.key&&c(t,e.data,o)})).catch((e=>{p(o,e)}))},s=(e,t,n)=>{let a=new FormData;a.append("file",e),q.post(t,a,{cancelToken:Cr.get(n).token,onUploadProgress:e=>{h(e,n,!0)}}).then((()=>{f(n)})).catch((e=>{p(n,e)}))},u=(e,t,n)=>{q.put(t,e,{withCredentials:!1,cancelToken:Cr.get(n).token,onUploadProgress:e=>{h(e,n)}}).then((()=>{f(n)})).catch((e=>{p(n,e)}))},d=(e,t,n)=>{let a=1,l=0,r=0,o=e.size;const i=104857599;if(0===o)return void p(n,"当前存储类型不支持上传空文件");const s=()=>{r=l+i>=o?o:l+i,a>1&&Cr.set(n,q.CancelToken.source());let u=e.slice(l,r);q.put(`${t}`,u,{cancelToken:Cr.get(n).token,timeout:1e7,headers:{"Content-Type":"application/octet-stream","Content-Range":`bytes ${l}-${r-1}/${e.size}`},type:"sync",withCredentials:!1,onUploadProgress:e=>{if(e.lengthComputable){let t=Er.get(n);const a=e.loaded+l;t.size=o,t.loaded=a,t.progress=Math.round(a/o*100),t.speed=G.fileSizeFormat(Math.round(a/(Date.now()-t.startTime)*1e3))}}}).then((e=>{202===e.status?(l+=i,a+=1,s()):201!==e.status&&200!==e.status||f(n)})).catch((e=>{p(n,e)}))};s()},c=(e,t,n)=>{let a=JSON.parse(t),l=new FormData;l.append("name",e.name),l.append("authorization",a.signature),l.append("policy",a.policy),l.append("file",e),q.post(a.url,l,{withCredentials:!1,cancelToken:Cr.get(n).token,onUploadProgress:e=>{h(e,n)}}).then((()=>{f(n)})).catch((e=>{p(n,e)}))},p=(e,t)=>{let n=Er.get(e);n.status="error",n.endTime=Date.now(),n.msg=t?.response?.data||t},f=e=>{let t=Er.get(e);t.progress=100,t.status="finished",t.endTime=Date.now(),t.msg="上传成功"},h=(e,t,n)=>{let a=Er.get(t);a.size=e.total,a.loaded=e.loaded,a.progress=Math.round(e.loaded/e.total*100),a.speed=G.fileSizeFormat(Math.round(e.loaded/(Date.now()-a.startTime)*1e3)),n&&100===a.progress&&(a.msg="上传完成, 服务器中转中...")},v=o((()=>{let e=Sr.length,t=0,n=0;Sr.forEach((e=>{"uploading"===e.status?t++:"finished"===e.status&&n++}));let a=t+kr.length;return{totalSize:e,totalUploading:t,totalFinish:n,totalUploadingAndWaiting:a}})),m=o((()=>{let e=[];return e.push(...Sr),kr.forEach((t=>{e.push({name:t.file.name,size:t.file.size,status:"waiting",msg:"排队中...",index:t.index})})),e.sort(((e,t)=>{let n=e.status,a=t.status;return n!==a?Lr[n]-Lr[a]:e.startTime!==t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),e}));br||(g((()=>v.value.totalUploading),(e=>{if(e<l)if(0===kr.length);else{let e=kr.splice(0,1)[0];r({file:e.file,uploadBasePath:e.uploadBasePath})}})),br=!0);const y=e=>{if(null==e)return;let t=Sr.findIndex(((t,n)=>{if(t.index===e)return Sr.splice(n,1),!0}));-1===t&&(t=kr.findIndex(((t,n)=>{if(t.index===e)return kr.splice(n,1),!0}))),-1!==t&&(Er.delete(e),Cr.delete(e))};return{visible:wr,uploadMode:xr,openUploadDialog:()=>{wr.value=!0,xr.value="file"},openUploadFolderDialog:()=>{wr.value=!0,xr.value="folder",x((()=>{document.getElementsByClassName("el-upload__input")[0].webkitdirectory=!0}))},cancelUpload:e=>{Le.confirm(`是否确定取消文件 ${e.name} 上传？`,"提示",{confirmButtonText:"确定",cancelButtonText:"返回",type:"warning",callback:t=>{"confirm"===t&&ee(`cancel-upload-${e.index}`).emit()}})},dropState:yr,listenDropFile:e=>{e=document.querySelector("body");const a=e=>{let t=e.dataTransfer?.files?.length>0;if(s(),yr.value=!1,dr()&&t)return;if(document.querySelector(".is-message-box .el-input__inner")===document.activeElement)return;if(!n.value)return;if(!mr.permission.upload)return;e.stopPropagation(),e.preventDefault();const a=Ce.service({text:"文件读取中...",background:"rgba(0, 0, 0, .3)"}),l=e.clipboardData?.items||e.dataTransfer?.items;o(l).then((e=>{if(x((()=>{a.close()})),0===e.length)return;const t=()=>{wr.value=!0,e.forEach((e=>{r({file:e})}))};e.length>100?Le.confirm(`文件数量为 ${e.length} 个，是否确认上传？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:e=>{"confirm"===e&&t()}}):t()}))};let l=null;e.addEventListener("dragenter",(e=>{n.value&&(wr.value||mr.permission.upload&&(l=e.target,i(),e.stopPropagation(),e.preventDefault(),yr.value=!0))}),!1),e.addEventListener("dragover",(function(e){n.value&&(wr.value||mr.permission.upload&&(e.stopPropagation(),e.preventDefault(),yr.value=!0))}),!1),e.addEventListener("dragleave",(function(e){n.value&&(wr.value||mr.permission.upload&&(l===e.target&&(s(),yr.value=!1),e.stopPropagation(),e.preventDefault()))}),!1),e.addEventListener("drop",a,!1),e.addEventListener("paste",a,!1);const o=async e=>{let n=[],a=[];if(e){let l=new Array(...e);for(let e=0;e<l.length;e++){let r=l[e],o=null;if(r.webkitGetAsEntry){if(o=r.webkitGetAsEntry(),!o&&(o=r.getAsFile(),o)){n.push(o);continue}}else{if(!r.getAsEntry)return void t.warning("浏览器不支持拖拽上传");o=r.getAsEntry()}a.push(o)}if(a.length>0)for(let e=0;e<a.length;e++){let t=a[e];if(t){let e=await d(t);Array.isArray(e)?u(e,n):n.push(e)}}}return n},i=()=>{e.classList.add("dragging-over")},s=()=>{e.classList.remove("dragging-over")};function u(e,t){for(let n=0;n<e.length;n++)Array.isArray(e[n])?u(e[n],t):t.push(e[n])}async function d(e){let t=e.fullPath||"",n=[];if(e.isFile){let n=await function(e){return new Promise(((t,n)=>{e.file((e=>{t(e)}))}))}(e);return n.dropUploadPath=t,n}if(e.isDirectory){let t=e.createReader(),a=await function(e){return new Promise(((t,n)=>{e.readEntries((e=>{t(e)}))}))}(t);for(let e=0;e<a.length;e++){let t=await d(a[e]);n.push(t)}return n}}},beforeUpload:r,uploadFile:i,uploadProgressInfoSorted:m,uploadProgressInfoStatistics:v,clearALlFinishedUploadFile:()=>{let e=0;for(let t=Sr.length-1;t>=0;t--){let n=Sr[t];"finished"===n.status&&(e++,Sr.splice(t,1),Er.delete(n.index),Cr.delete(n.index))}return e},removeUploadFileByIndex:y,retryUpload:e=>{y(e.index),i(e.file)}}}export{Re as a,zn as b,ql as c,Be as d,bl as e,Ar as f,hr as g,ll as h,rl as i,oa as j,Bn as k,Dn as l,Qn as m,Mn as p,Jn as r,ze as u};
