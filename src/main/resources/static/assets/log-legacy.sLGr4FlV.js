System.register(["./base-legacy.C4HCoRVd.js","./card-legacy.B7gTuytK.js","./admin-download-link-legacy.DQAvY6EV.js","./tag-legacy.BUaIpLO9.js","./select-legacy.Cvd99nu-.js","./scrollbar-legacy.5w33Y1a7.js","./popper-legacy.A4J8PAUb.js","./input-legacy.QHqwdb9y.js","./table-legacy.Ce1NlH65.js","./checkbox-legacy.B_X2luMj.js","./tooltip-legacy.thrsW4a0.js","./popover-legacy.4IRfn_Dd.js","./button-legacy.DICWts_D.js","./SvgIcon-legacy.STAJdGcp.js","./table-column-legacy.BliN4mtd.js","./form-item-legacy.CoQmd7Xf.js","./switch-legacy.CjRXBuq6.js","./useLinkSetting-legacy._dHb0dfS.js","./admin-storage-legacy.RIDzcvG_.js","./vue3-clipboard.esm-legacy.E9bUsymz.js","./admin-setting-legacy.DyAKlYCg.js","./common-legacy.Dej0g7Wr.js","./index-legacy.DUvvBSvn.js","./route-block-legacy.wdPIt6g0.js","./plugin-vue_export-helper-legacy.ul8DAaRV.js","./request-legacy.-200HP3-.js","./index-legacy.BFuUyz3E.js","./index-legacy.DdGmP4UA.js","./index-legacy.BI_Z7oJg.js","./debounce-legacy.D6b8stkf.js","./index-legacy.kQS7dIBi.js","./_Uint8Array-legacy.CXcrhg08.js","./castArray-legacy.BWmXikMi.js","./event-legacy.CFsZpNd4.js","./scroll-legacy.DnkC-nvr.js","./index-legacy.BcMCRM2R.js","./_initCloneObject-legacy.BX6ePbVv.js","./validator-legacy.DjRp0Ah9.js","./unit-legacy.Ck5OWA1B.js","./index-legacy.BTvHxeZR.js"],(function(e,n){"use strict";var t,l,a,o,u,r,i,c,d,s,f,p,g,y,m,v,h,w,j,_,b,x,k,V,C,K,U,E,z,A,D,S,T,P,I,L,Y,F,R,H,M,N,O,$,q,G,J,Q,X,Z;return{setters:[function(e){t=e.K,l=e.y,a=e.H},function(e){o=e.E},function(e){u=e.g,r=e.d,i=e.b,c=e.a,d=e.E,s=e.c,f=e.e,p=e.f},function(e){g=e.E},function(e){y=e.E,m=e.a},null,function(e){v=e.E},null,function(e){h=e.E,w=e.a},null,null,null,null,function(e){j=e._},null,function(e){_=e.E,b=e.a},function(e){x=e.E},function(e){k=e.u},function(e){V=e.a},function(e){C=e.t},function(e){K=e.l},function(e){U=e.c},function(e){E=e.E,z=e.r,A=e.o,D=e.a,S=e.e,T=e.i,P=e.w,I=e.k,L=e.u,Y=e.j,F=e.O,R=e.F,H=e.v,M=e.b,N=e.t,O=e.N,$=e.P,q=e.Q},function(e){G=e.b},function(e){J=e._},function(e){Q=e.E},function(e){X=e.E},function(e){Z=e.E},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var n=document.createElement("style");n.textContent=".zfile-admin-down-link[data-v-5dacd582] .el-select-dropdown__item{padding-right:15px}.zfile-admin-down-link[data-v-5dacd582] .el-dialog__header{text-align:center}.zfile-admin-down-link[data-v-5dacd582] .el-dialog__body{height:80vh;overflow-y:auto}\n/*$vite$:1*/",document.head.appendChild(n);var B=function(e){return $("data-v-5dacd582"),e=e(),q(),e},W={class:"zfile-admin-down-link"},ee={class:"flex justify-between"},ne=B((function(){return I("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"下载日志",-1)})),te={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},le=B((function(){return I("span",{class:"text-gray-400 text-sm font-bold"},"记录下载日志：",-1)})),ae={class:"mt-4"},oe={class:"flex justify-between space-x-20"},ue={class:"text-gray-400"},re={class:"mb-2"},ie={key:0,class:"space-x-2"},ce={key:1},de={__name:"log",setup:function(e){var n=k(),$=n.data,q=n.saveData,G=(n.saveLoading,E({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0})),J=function(e){G.limit=e,G.page=1,fe()},B=function(e){G.page=e,fe()},de=function(){return G.date instanceof Array?(G.dateFrom=G.date[0],G.dateTo=G.date[1]):(G.dateFrom="",G.dateTo=""),G},se=z(),fe=function(){u(de()).then((function(e){se.value=e.data,G.total=e.dataCount}))};A((function(){fe(),me(),ge()}));var pe=z(),ge=function(){K().then((function(e){pe.value=e.data}))},ye=z(),me=function(){V().then((function(e){ye.value=e.data}))},ve=z(),he=function(){var e=ve.value.getSelectionRows();0!==e.length?X.confirm("是否确认删除？","提示",{type:"warning"}).then((function(){var n=e.map((function(e){return e.id}));i({ids:n}).then((function(e){Q.success("删除成功"),fe()}))})):Q.warning("请至少选择一条数据")},we=function(){X.confirm("是否确认删除当前查询条件下的 ".concat(G.total," 条直链下载日志？(如数量不对，请先点击查询后再用该功能按条件删除)"),"提示",{type:"warning"}).then((function(){c(de()).then((function(e){Q.success("清空成功"),fe()}))}))},je=function(e){C(e).then((function(){Q.success("复制成功")}))},_e=function(e){window.open(e)},be=function(e){var n;return U.removeDuplicateSeparator("".concat(null==pe||null===(n=pe.value)||void 0===n?void 0:n.domain,"/s/").concat(e))},xe=function(e){var n,t;return U.removeDuplicateSeparator("".concat(null==pe||null===(n=pe.value)||void 0===n?void 0:n.domain,"/").concat(null==pe||null===(t=pe.value)||void 0===t?void 0:t.directLinkPrefix,"/").concat(e.storageKey,"/").concat(e.path))};return function(e,n){var u=x,i=y,c=m,k=_,V=Z,C=d,K=a,U=b,E=h,z=v,A=g,X=j,de=s,pe=w,ge=f,me=p,ke=o;return D(),S("div",W,[T(ke,null,{default:P((function(){return[I("div",ee,[ne,L($)?(D(),S("div",te,[le,T(u,{onChange:L(q),"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:L($).recordDownloadLog,"onUpdate:modelValue":n[0]||(n[0]=function(e){return L($).recordDownloadLog=e})},null,8,["onChange","modelValue"])])):Y("",!0)]),I("div",ae,[T(U,{inline:"",modelValue:L(G),"onUpdate:modelValue":n[8]||(n[8]=function(e){return F(G)?G.value=e:null})},{default:P((function(){return[T(k,{label:"存储源"},{default:P((function(){return[T(c,{clearable:"",teleported:!1,modelValue:L(G).storageKey,"onUpdate:modelValue":n[1]||(n[1]=function(e){return L(G).storageKey=e}),placeholder:"请选择存储源"},{default:P((function(){return[(D(!0),S(R,null,H(L(ye),(function(e){return D(),M(i,{key:e.id,label:e.name,value:e.key},{default:P((function(){return[I("div",oe,[I("span",null,N(e.name),1),I("span",ue,N(e.type.description),1)])]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),T(k,{label:"短链 Key"},{default:P((function(){return[T(V,{modelValue:L(G).shortKey,"onUpdate:modelValue":n[2]||(n[2]=function(e){return L(G).shortKey=e})},null,8,["modelValue"])]})),_:1}),T(k,{label:"文件路径"},{default:P((function(){return[T(V,{modelValue:L(G).path,"onUpdate:modelValue":n[3]||(n[3]=function(e){return L(G).path=e})},null,8,["modelValue"])]})),_:1}),T(k,{label:"请求 IP"},{default:P((function(){return[T(V,{modelValue:L(G).ip,"onUpdate:modelValue":n[4]||(n[4]=function(e){return L(G).ip=e})},null,8,["modelValue"])]})),_:1}),T(k,{label:"UserAgent"},{default:P((function(){return[T(V,{modelValue:L(G).userAgent,"onUpdate:modelValue":n[5]||(n[5]=function(e){return L(G).userAgent=e})},null,8,["modelValue"])]})),_:1}),T(k,{label:"Referer"},{default:P((function(){return[T(V,{modelValue:L(G).referer,"onUpdate:modelValue":n[6]||(n[6]=function(e){return L(G).referer=e})},null,8,["modelValue"])]})),_:1}),T(k,{label:"下载时间"},{default:P((function(){return[T(C,{modelValue:L(G).date,"onUpdate:modelValue":n[7]||(n[7]=function(e){return L(G).date=e}),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","default-time"])]})),_:1}),T(k,null,{default:P((function(){return[T(K,{type:"primary",icon:L(t),onClick:fe},{default:P((function(){return[O("查询")]})),_:1},8,["icon"])]})),_:1})]})),_:1},8,["modelValue"]),I("div",re,[T(K,{onClick:he,icon:L(l),type:"danger"},{default:P((function(){return[O("批量删除选中")]})),_:1},8,["icon"]),T(K,{onClick:we,icon:L(l),type:"danger"},{default:P((function(){return[O("删除全部页")]})),_:1},8,["icon"])]),T(pe,{border:"",ref_key:"linkTableRef",ref:ve,size:"large",data:L(se),style:{width:"100%"}},{default:P((function(){return[T(E,{type:"selection",width:"55"}),T(E,{fixed:"",width:"120",label:"存储源名称"},{default:P((function(e){var n;return[T(z,{content:null===(n=e.row.storageType)||void 0===n?void 0:n.description,placement:"right"},{default:P((function(){return[I("span",null,N(e.row.storageName),1)]})),_:2},1032,["content"])]})),_:1}),T(E,{fixed:"",width:"90",align:"center",label:"下载类型"},{default:P((function(e){return[e.row.shortKey?(D(),M(A,{key:0,type:"success"},{default:P((function(){return[O("短链")]})),_:1})):(D(),M(A,{key:1},{default:P((function(){return[O("直链")]})),_:1}))]})),_:1}),T(E,{"min-width":"400","show-overflow-tooltip":!0,prop:"shortKey",label:"下载链接"},{default:P((function(e){return[e.row.shortKey?(D(),S("div",ie,[I("span",null,N(L(be)(e.row.shortKey)),1),T(X,{onClick:function(n){return L(je)(L(be)(e.row.shortKey))},class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),T(X,{onClick:function(n){return L(_e)(L(be)(e.row.shortKey))},class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])):(D(),S("div",ce,[I("span",null,N(L(xe)(e.row)),1),T(X,{onClick:function(n){return L(je)(L(xe)(e.row))},class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),T(X,{onClick:function(n){return L(_e)(L(xe)(e.row))},class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])]))]})),_:1}),T(E,{width:"300","show-overflow-tooltip":!0,prop:"path",label:"文件路径"}),T(E,{width:"100","show-overflow-tooltip":!0,prop:"ip",label:"请求 IP"}),T(E,{width:"250","show-overflow-tooltip":!0,prop:"userAgent",label:"UserAgent"}),T(E,{width:"200","show-overflow-tooltip":!0,prop:"referer",label:"Referer"}),T(E,{width:"155",prop:"createTime",label:"下载时间"}),T(E,{fixed:"right",width:"120",label:"操作"},{default:P((function(e){return[T(de,{title:"是否确认删除?",onConfirm:function(n){return t=e.row.id,void r(t).then((function(e){Q.success("删除成功"),fe()}));var t}},{reference:P((function(){return[T(K,{icon:L(l),type:"danger"},{default:P((function(){return[O("删除")]})),_:1},8,["icon"])]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),T(me,null,{default:P((function(){return[T(ge,{class:"mt-3","page-size":L(G).limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:B,onSizeChange:J,"current-page":L(G).page,"onUpdate:currentPage":n[9]||(n[9]=function(e){return L(G).page=e}),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:L(G).total},null,8,["page-size","current-page","total"])]})),_:1})])]})),_:1})])}}};"function"==typeof G&&G(de),e("default",J(de,[["__scopeId","data-v-5dacd582"]]))}}}));
