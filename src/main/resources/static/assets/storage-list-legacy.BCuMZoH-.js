System.register(["./admin-storage-legacy.RIDzcvG_.js","./sortable.esm-legacy.D6Tn_V1I.js","./useCommon-legacy.C3Vhrx_t.js","./index-legacy.DUvvBSvn.js","./storage-copy-legacy.BQIc6Qv2.js","./index-legacy.BFuUyz3E.js","./request-legacy.-200HP3-.js"],(function(e,a){"use strict";var n,t,o,c,r,s,i,u,l,d,f,g,h;return{setters:[function(e){n=e.d,t=e.s,o=e.b,c=e.c,r=e.a,s=e.e},function(e){i=e.S},function(e){u=e.u},function(e){l=e.r,d=e.c},function(e){f=e.u},function(e){g=e.E},function(e){h=e.E}],execute:function(){e("u",(function(e){var u=function(a){e.push("/admin/storage-edit/"+a.id)},l=function(e){g.confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(a){"confirm"===a&&n(e.id).then((function(e){h.success("删除成功"),L()}))}})},f=function(a){e.push("/admin/storage-filter/"+a.id)},x=function(a){e.push("/admin/storage-readme/"+a.id)},C=function(a){e.push("/admin/storage-password/"+a.id)},k=function(e){g.confirm("是否确认".concat(e.enable?"停止":"启用","存储源。"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(a){if("confirm"===a){var n=e.enable?"disable":"enable";t(e.id,n).then((function(){h.success((e.enable?"停止":"启用")+"成功"),e.enable=!e.enable}))}}})},S=function(e){m.value=e.id,b.value=!0},L=function(){v.value=!0,r().then((function(e){var n;p.value=e.data,n=document.querySelector(".storage-container"),i.create(n,{draggable:".storage-item",filter:".add-storage-btn",delay:a.value?300:0,onEnd:function(e){if(e.oldIndex!==e.newIndex){var a=p.value.splice(e.oldIndex,1)[0];p.value.splice(e.newIndex,0,a),s(p.value).then((function(){h.success("调整排序成功")}))}}}),v.value=!1}))},M=d((function(){return""===w.value?p.value:p.value.filter((function(e){return!!(e.name&&-1!==e.name.toLowerCase().indexOf(w.value.toLowerCase())||e.remark&&-1!==e.remark.toLowerCase().indexOf(w.value.toLowerCase())||e.type&&-1!==e.type.description.toLowerCase().indexOf(w.value.toLowerCase())||e.type&&-1!==e.type.key.toLowerCase().indexOf(w.value.toLowerCase()))}))}));return{init:L,loading:v,searchKey:w,storageListSearchResult:M,handleOperator:function(e){switch(e.operator){case"edit":u(e.storage);break;case"enable":k(e.storage);break;case"readmeManager":x(e.storage);break;case"cacheManager":S(e.storage);break;case"filterManager":f(e.storage);break;case"pwdManager":C(e.storage);break;case"delete":l(e.storage);break;case"copy":y(e.storage)}},addStorage:function(){e.push("/admin/storage-edit")},editStorage:u,deleteStorage:l,handleClose:function(e){g.confirm("是否确认关闭？关闭后填写的数据不会保留。",{type:"warning"}).then((function(a){e()})).catch((function(e){}))},showFilterPage:f,showReadmePage:x,showPasswordPage:C,switchEnableStatus:k,cacheManageVisible:b,currentCacheManageId:m,switchCacheEnableStatus:function(e){var a=e.enableCache?"enable":"disable";o(e.id,a).then((function(){h.success("修改成功")}))},switchCacheAutoRefreshStatus:function(e){var a=e.autoRefreshCache?"start":"stop";c(e.id,a).then((function(){h.success("修改成功")}))},cacheManage:S}}));var a=u().isMobile,b=l(!1),m=l(),v=l(!1),p=l([]),w=l(""),y=f().openDialog}}}));
