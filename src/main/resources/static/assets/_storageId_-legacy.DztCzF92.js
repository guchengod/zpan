System.register(["./base-legacy.C4HCoRVd.js","./loading-legacy.BfOje5Sp.js","./button-legacy.DICWts_D.js","./tag-legacy.BUaIpLO9.js","./select-legacy.Cvd99nu-.js","./scrollbar-legacy.5w33Y1a7.js","./popper-legacy.A4J8PAUb.js","./input-legacy.QHqwdb9y.js","./alert-legacy.CN_EqTC_.js","./tooltip-legacy.thrsW4a0.js","./switch-legacy.CjRXBuq6.js","./SvgIcon-legacy.STAJdGcp.js","./ZFormItem-legacy.BCuPcTQ5.js","./admin-storage-legacy.RIDzcvG_.js","./common-legacy.CRZnNQJv.js","./index-legacy.DUvvBSvn.js","./sortable.esm-legacy.D6Tn_V1I.js","./request-legacy.-200HP3-.js","./index-legacy.BFuUyz3E.js","./readme-editor-dialog-legacy.BhNYZf9C.js","./route-block-legacy.wdPIt6g0.js","./plugin-vue_export-helper-legacy.ul8DAaRV.js","./CheckBadgeIcon-legacy.D70XKG37.js","./index-legacy.DdGmP4UA.js","./directive-legacy.BxLSi8TL.js","./castArray-legacy.BWmXikMi.js","./event-legacy.CFsZpNd4.js","./scroll-legacy.DnkC-nvr.js","./index-legacy.kQS7dIBi.js","./_Uint8Array-legacy.CXcrhg08.js","./debounce-legacy.D6b8stkf.js","./index-legacy.BcMCRM2R.js","./validator-legacy.DjRp0Ah9.js","./index-legacy.BTvHxeZR.js","./dialog-legacy.BVVlcLPE.js","./overlay-legacy.BFJgWl16.js","./refs-legacy.DfWEeVJd.js"],(function(e,n){"use strict";var t,l,a,i,r,o,u,c,d,s,m,f,p,g,v,y,x,h,b,j,w,_,k,V,I,U,C,E,z,R,T,q,B,M,D,S,F,G,Z,$,A,H,J,L,O,P,Q,K,N,W;return{setters:[function(e){t=e.aT,l=e.aU,a=e.x,i=e.y,r=e.aB,o=e.H},null,null,null,function(e){u=e.E,c=e.a},null,function(e){d=e.E},null,function(e){s=e.E},null,function(e){m=e.E},function(e){f=e._},function(e){p=e.Z,g=e.a},function(e){v=e.p,y=e.q,x=e.l,h=e.r},function(e){b=e.u,j=e.r},function(e){w=e.r,_=e.I,k=e.M,V=e.o,I=e.a6,U=e.J,C=e.u,E=e.a,z=e.b,R=e.w,T=e.k,q=e.i,B=e.t,M=e.O,D=e.N,S=e.e,F=e.F,G=e.v,Z=e.j,$=e.P,A=e.Q},function(e){H=e.S},function(e){J=e.E},function(e){L=e.E},function(e){O=e.default},function(e){P=e.b},function(e){Q=e._},function(e){K=e.r},function(e){N=e.E},function(e){W=e.v},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var n=document.createElement("style");n.textContent=".expression-item[data-v-d1896884] .el-input__wrapper{width:100%}@media (min-width:640px){.expression-item[data-v-d1896884] .el-input__wrapper{width:6rem}}@media (min-width:768px){.expression-item[data-v-d1896884] .el-input__wrapper{width:9rem}}@media (min-width:1024px){.expression-item[data-v-d1896884] .el-input__wrapper{width:12rem}}@media (min-width:1280px){.expression-item[data-v-d1896884] .el-input__wrapper{width:16rem}}.zfile-admin-readme-form[data-v-d1896884] .z-form-sub-title{max-width:100%}.zfile-admin-readme-form .rules-tips[data-v-d1896884]{padding:.25rem;font-size:.875rem;font-weight:700;line-height:1.25rem}.zfile-admin-readme-form .rules-tips-link[data-v-d1896884]{margin-top:.5rem}.zfile-admin-readme-form .rules-tips-link[data-v-d1896884]>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(1.25rem*var(--tw-space-x-reverse));margin-left:calc(1.25rem*calc(1 - var(--tw-space-x-reverse)))}.zfile-admin-readme-form .rules-tips-link svg[data-v-d1896884]{vertical-align:text-bottom;height:1rem;line-height:1.25rem}\n/*$vite$:1*/",document.head.appendChild(n);var X=w([]),Y=w(!1);function ee(e,n){var t=n.params.storageId,l=function(){var e=document.querySelector(".z-form-body");H.create(e,{draggable:".expression-item",filter:".el-button, .editor-input",onEnd:function(e){if(e.oldIndex!==e.newIndex){var n=X.value.splice(e.oldIndex-1,1)[0];X.value.splice(e.newIndex-1,0,n)}}})},a=function(){X.value.push({description:"表达式 - "+(X.value.length+1),expression:"",readmeText:"",displayMode:"top",storageId:t})};return{loading:Y,loadReadmeData:function(){v(t).then((function(e){X.value=e.data,0===X.value.length&&a(),l()}))},readmeList:X,addReadmeItem:a,deleteReadmeItem:function(e){X.value.splice(e,1)},saveReadmeData:function(){if(!X.value.find((function(e){if(b.isEmpty(e.description)||b.isEmpty(e.expression)||b.isEmpty(e.readmeText))return J.warning("请检查数据填写是否完整"),!0}))){Y.value=!0;for(var n=0;n<X.value.length;n++)X.value[n].id=n+1;y(t,X.value).then((function(){L.confirm("保存成功, 是否返回存储源列表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:function(n){"confirm"===n&&e.push("/admin/storage-list")}})})).finally((function(){Y.value=!1}))}}}}var ne=function(e){return $("data-v-d1896884"),e=e(),A(),e},te={class:"flex justify-between"},le=ne((function(){return T("span",{class:"mr-4 text-sm text-gray-500"},"兼容为读取 readme.md",-1)})),ae=ne((function(){return T("div",{class:"rules-tips"},"Glob 表达式规则：",-1)})),ie=ne((function(){return T("div",{class:"rules-tips"},[T("b",null,"/"),D(": 根目录, 如 "),T("span",{class:"code select-all"},"/"),D(" 表示根路径下会加载此文档显示. ")],-1)})),re=ne((function(){return T("div",{class:"rules-tips"},[T("b",null,"*"),D("：单级路径通配符，如表达式 "),T("span",{class:"code select-all"},"/*"),D(" 表示根路径下的直接子文件夹会加载此文档显示. ")],-1)})),oe=ne((function(){return T("div",{class:"rules-tips"},[T("b",null,"**"),D("：多级路径通配符，如表达式 "),T("span",{class:"code select-all"},"/music/**"),D(" 表示 /music 文件夹及以下所有文件夹都会加载此文档. ")],-1)})),ue=ne((function(){return T("div",{class:"rules-tips"}," 注：系统匹配到第一个符合的规则就会取文档进行显示，所以请调整好规则顺序，下方规则可进行拖拽排序。 ",-1)})),ce={class:"rules-tips-link"},de={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},se=ne((function(){return T("span",null,"参考文章 (Wikipedia)",-1)})),me={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},fe={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},pe={class:"sm:flex sm:space-x-2 sm:border-b-0 sm:pb-0 border-b pb-2"},ge={__name:"[storageId]",setup:function(e){var n=_(),v=k(),y=n.params.storageId,b=ee(v,n),$=b.loading,A=b.loadReadmeData,H=b.readmeList,L=b.addReadmeItem,P=b.deleteReadmeItem,Q=b.saveReadmeData;V((function(){A(),Y()}));var X=w(),Y=function(){x(y).then((function(e){e.data.type=e.data.type.key,X.value=e.data}))},ne=w(!1);x(n.params.storageId).then((function(e){ne.value=e.data.compatibilityReadme||!1}));var ge=function(){h(n.params.storageId,ne.value).then((function(e){J.success("保存成功")}))},ve=w({}),ye=w(!1);return function(e,n){var v=f,y=I("router-link"),x=m,h=d,b=s,w=N,_=u,k=c,V=o,A=W;return U((E(),z(g,{model:C(H),class:"zfile-admin-readme-form"},{"form-title":R((function(){var e;return[T("div",te,[T("div",null,[q(y,{to:"/admin/storage-list"},{default:R((function(){return[q(v,{class:"inline mr-2 cursor-pointer",name:"file-type-back"})]})),_:1}),T("span",null,"目录文档（"+B(null===(e=C(X))||void 0===e?void 0:e.name)+"）",1)]),q(h,{placement:"top",content:"启用后下发的规则设置会失效，仅会为读取目录下的 readme.md 文件来渲染文档, 且固定在底部显示."},{default:R((function(){return[T("div",null,[le,q(x,{onChange:ge,"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:C(ne),"onUpdate:modelValue":n[0]||(n[0]=function(e){return M(ne)?ne.value=e:ne=e})},null,8,["modelValue"])])]})),_:1})])]})),"form-sub-title":R((function(){return[q(b,{closable:!1,type:"info"},{default:R((function(){return[ae,ie,re,oe,ue,T("div",ce,[T("a",de,[q(C(t),{class:"inline mr-1"}),se]),T("a",me,[q(C(t),{class:"inline mr-1"}),D("参考文章 (阮一峰)")]),T("a",fe,[q(C(t),{class:"inline mr-1"}),D("参考文章 (Github)")])])]})),_:1})]})),footer:R((function(){return[q(V,{type:"primary",size:"default",icon:C(K),onClick:C(Q)},{default:R((function(){return[D("保存设置")]})),_:1},8,["icon","onClick"])]})),default:R((function(){return[(E(!0),S(F,null,G(C(H),(function(e,n){return E(),z(p,{required:!0,key:e,class:"expression-item"},{default:R((function(){return[T("div",pe,[q(h,{content:"此处可填写表达书描述，用于辅助记忆，防止时间过长后不知道表达式含义.",placement:"top"},{default:R((function(){return[q(w,{"prefix-icon":C(l),placeholder:"请输入表达式描述",modelValue:e.description,"onUpdate:modelValue":function(n){return e.description=n}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]})),_:2},1024),q(w,{"prefix-icon":C(j),placeholder:"请输入表达式",modelValue:e.expression,"onUpdate:modelValue":function(n){return e.expression=n},modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"]),q(w,{class:"editor-input",onClick:function(n){return t=e,ye.value=!0,void(ve.value=t);var t},readonly:"","prefix-icon":C(a),placeholder:"请点击编辑文档",modelValue:e.readmeText,"onUpdate:modelValue":function(n){return e.readmeText=n}},null,8,["onClick","prefix-icon","modelValue","onUpdate:modelValue"]),q(k,{class:"editor-input",modelValue:e.displayMode,"onUpdate:modelValue":function(n){return e.displayMode=n}},{default:R((function(){return[q(_,{label:"顶部显示",value:"top"}),q(_,{label:"底部显示",value:"bottom"}),q(_,{label:"弹窗显示",value:"dialog"})]})),_:2},1032,["modelValue","onUpdate:modelValue"]),q(V,{type:"danger",onClick:function(e){return C(P)(n)},icon:C(i)},null,8,["onClick","icon"])])]})),_:2},1024)})),128)),q(p,null,{default:R((function(){return[q(V,{type:"primary",size:"default",icon:C(r),onClick:C(L)},{default:R((function(){return[D("添加更多")]})),_:1},8,["icon","onClick"])]})),_:1}),C(ye)?(E(),z(O,{key:0,modelValue:C(ve).readmeText,"onUpdate:modelValue":n[1]||(n[1]=function(e){return C(ve).readmeText=e}),visible:C(ye),"onUpdate:visible":n[2]||(n[2]=function(e){return M(ye)?ye.value=e:ye=e})},null,8,["modelValue","visible"])):Z("",!0)]})),_:1},8,["model"])),[[A,C($)]])}}};"function"==typeof P&&P(ge),e("default",Q(ge,[["__scopeId","data-v-d1896884"]]))}}}));
