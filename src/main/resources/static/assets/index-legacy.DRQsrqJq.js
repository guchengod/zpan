System.register(["./base-legacy.C4HCoRVd.js","./loading-legacy.BfOje5Sp.js","./ZFormItem-legacy.BCuPcTQ5.js","./input-legacy.QHqwdb9y.js","./tooltip-legacy.thrsW4a0.js","./popper-legacy.A4J8PAUb.js","./image-viewer-legacy.Ctsg__ty.js","./button-legacy.DICWts_D.js","./radio-legacy.B9rFPEIL.js","./switch-legacy.CjRXBuq6.js","./admin-setting-legacy.DyAKlYCg.js","./index-legacy.DUvvBSvn.js","./vue3-clipboard.esm-legacy.E9bUsymz.js","./request-legacy.-200HP3-.js","./index-legacy.BFuUyz3E.js","./route-block-legacy.wdPIt6g0.js","./plugin-vue_export-helper-legacy.ul8DAaRV.js","./index-legacy.DdGmP4UA.js","./directive-legacy.BxLSi8TL.js","./index-legacy.BcMCRM2R.js","./debounce-legacy.D6b8stkf.js","./scroll-legacy.DnkC-nvr.js","./event-legacy.CFsZpNd4.js","./validator-legacy.DjRp0Ah9.js","./index-legacy.BTvHxeZR.js"],(function(e,n){"use strict";var t,o,l,u,i,a,c,r,f,d,s,y,g,m,v,p,V,b,j,k,_,C,h,x,M,w,A,S,B,E,F,U,T,D,I;return{setters:[function(e){t=e.J,o=e.H},null,function(e){l=e.Z,u=e.a},null,null,function(e){i=e.E},function(e){a=e.E},null,function(e){c=e.E},function(e){r=e.E},function(e){f=e.l,d=e.u,s=e.g,y=e.v},function(e){g=e.r,m=e.$,v=e.m,p=e.u,V=e.J,b=e.a,j=e.b,k=e.w,_=e.N,C=e.i,h=e.D,x=e.e,M=e.j,w=e.P,A=e.Q,S=e.k},function(e){B=e.t},function(e){E=e.E},function(e){F=e.E},function(e){U=e.b},function(e){T=e._},function(e){D=e.E},function(e){I=e.v},null,null,null,null,null,null],execute:function(){var n=document.createElement("style");n.textContent=".el-button[data-v-4b34e889],.el-input[data-v-4b34e889] input{height:35px}\n/*$vite$:1*/",document.head.appendChild(n);var L=g({});function P(){var e=m(f,{formatResult:function(e){return e.data}}),n=e.data,t=e.reload,o=m(d,{manual:!0,onSuccess:function(){E({message:"保存成功",type:"success"})}}),l=o.loading,u=o.run,i=function(){s().then((function(e){L.value=e.data}))};return{data:n,reload:t,saveData:function(){u(n.value)},saveLoading:l,load2FAInfo:i,twoFAData:L,copyTwoFASecret:function(){B(L.value.secret).then((function(){E.success("复制成功")}))},verifyCodeAndBind:function(){y(L.value).then((function(e){E.success("绑定成功"),t()}))},rebind:function(){n.value.loginVerifySecret="",i()},cancelBind:function(){F.confirm("是否确认取消绑定，确认后将自动恢复为图形验证码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:function(e){"confirm"===e&&(n.value.loginVerifySecret="",n.value.loginVerifyMode="image")}})},validBind:function(){F.prompt("请输入双因素认证 APP 中的验证码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return!!e},inputErrorMessage:"验证码不能为空."}).then((function(e){var t=e.value,o={secret:n.value.loginVerifySecret,code:t};y(o).then((function(){E.success("验证成功")}))}))}}}var z=function(e){return w("data-v-4b34e889"),e=e(),A(),e},J=z((function(){return S("b",null,"Google 身份验证器",-1)})),$=z((function(){return S("b",null,"Microsoft Authenticator",-1)})),q=z((function(){return S("br",null,null,-1)})),G={key:0,class:"w-full"},H={key:1},N={__name:"index",setup:function(e){var n=P(),f=n.data,d=n.saveData,s=n.saveLoading,y=n.load2FAInfo,g=n.twoFAData,m=n.copyTwoFASecret,w=n.verifyCodeAndBind,A=n.rebind,S=n.cancelBind,B=n.validBind;return v((function(){var e;return null===(e=f.value)||void 0===e?void 0:e.loginVerifyMode}),(function(e,n){"off"!==e&&"image"!==e||!n||d(),"2fa"!==e||f.value.loginVerifySecret||y()})),v((function(){var e;return null===(e=f.value)||void 0===e?void 0:e.showLogin}),(function(e,n){e!==n&&void 0!==n&&d()})),function(e,n){var d=r,v=l,E=c,F=o,U=a,T=i,L=D,P=u,z=I;return p(f)?V((b(),j(P,{key:0,model:p(f)},{"form-title":k((function(){return[_(" 安全设置 ")]})),"form-sub-title":k((function(){return[_(" 此处设置可保护您的站点安全 ")]})),default:k((function(){return[C(v,{label:"是否显示登录入口"},{tips:k((function(){return[_(" 启用后，会在门户显示后台登录入口，请根据自身情况选择是否启用 ")]})),default:k((function(){return[C(d,{modelValue:p(f).showLogin,"onUpdate:modelValue":n[0]||(n[0]=function(e){return p(f).showLogin=e})},null,8,["modelValue"])]})),_:1}),C(v,{label:"登录验证方式"},h({default:k((function(){return[C(E,{modelValue:p(f).loginVerifyMode,"onUpdate:modelValue":n[1]||(n[1]=function(e){return p(f).loginVerifyMode=e}),label:"off"},{default:k((function(){return[_("不启用登录验证")]})),_:1},8,["modelValue"]),C(E,{modelValue:p(f).loginVerifyMode,"onUpdate:modelValue":n[2]||(n[2]=function(e){return p(f).loginVerifyMode=e}),label:"image"},{default:k((function(){return[_("启用图片验证码")]})),_:1},8,["modelValue"]),C(E,{modelValue:p(f).loginVerifyMode,"onUpdate:modelValue":n[3]||(n[3]=function(e){return p(f).loginVerifyMode=e}),label:"2fa"},{default:k((function(){return[_("启用双因素认证")]})),_:1},8,["modelValue"])]})),_:2},["image"===p(f).loginVerifyMode?{name:"tips",fn:k((function(){return[_(" 图片验证码也可能会被识别，不能完全抵挡暴力破解。 ")]})),key:"0"}:void 0,"2fa"===p(f).loginVerifyMode?{name:"tips",fn:k((function(){return[_(" 双因素认证可完美保护登录认证，可使用任意支持 2FA 认证的软件，如 "),J,_("、"),$,_(" 等软件. "),q]})),key:"1"}:void 0]),1024),"2fa"===p(f).loginVerifyMode?(b(),j(v,{key:0,label:"双因素认证密钥"},h({default:k((function(){var e;return[p(f).loginVerifySecret?(b(),x("div",G,[C(F,{size:"small",type:"primary",onClick:p(A)},{default:k((function(){return[_("重新绑定")]})),_:1},8,["onClick"]),C(F,{size:"small",type:"primary",onClick:p(S)},{default:k((function(){return[_("取消绑定")]})),_:1},8,["onClick"]),C(F,{size:"small",type:"primary",onClick:p(B)},{default:k((function(){return[_("验证绑定")]})),_:1},8,["onClick"])])):(b(),x("div",H,[C(U,{onClick:p(y),src:null===(e=p(g))||void 0===e?void 0:e.qrcode},null,8,["onClick","src"]),C(L,{readonly:"",modelValue:p(g).secret,"onUpdate:modelValue":n[4]||(n[4]=function(e){return p(g).secret=e})},{append:k((function(){return[C(T,{class:"item",effect:"dark",content:"复制",placement:"bottom"},{default:k((function(){return[C(F,{onClick:p(m),icon:p(t)},null,8,["onClick","icon"])]})),_:1})]})),_:1},8,["modelValue"])]))]})),_:2},[p(f).loginVerifySecret?void 0:{name:"tips",fn:k((function(){return[_(" 可扫描上方二维码或复制下方密钥到支持双因素认证的软件中添加。 ")]})),key:"0"}]),1024)):M("",!0),"2fa"!==p(f).loginVerifyMode||p(f).loginVerifySecret?M("",!0):(b(),j(v,{key:1,label:"双因素认证验证码"},{tips:k((function(){return[_(" 请绑定双因素认证软件后，输入显示的验证码进行绑定 ")]})),default:k((function(){return[C(L,{modelValue:p(g).code,"onUpdate:modelValue":n[5]||(n[5]=function(e){return p(g).code=e})},null,8,["modelValue"]),C(F,{onClick:p(w),type:"primary"},{default:k((function(){return[_("验证并绑定")]})),_:1},8,["onClick"])]})),_:1}))]})),_:1},8,["model"])),[[z,p(s)]]):M("",!0)}}};"function"==typeof U&&U(N),e("default",T(N,[["__scopeId","data-v-4b34e889"]]))}}}));
